(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"1m8g":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var o=function(t,e,i){this.bu=t,this.bv=e,this.distance=i,this.faceId=0,this.subMeshId=0}},"2/Cc":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var o=i("mHtN"),r=i("/SR9"),n=i("Q86s"),a=i("1m8g"),s=i("tVVT"),c=i("CAkI"),h=function(){function t(t,e,i){void 0===i&&(i=Number.MAX_VALUE),this.origin=t,this.direction=e,this.length=i}return t.prototype.intersectsBoxMinMax=function(e,i,o){void 0===o&&(o=0);var r,n,a,s,c=t.TmpVector3[0].copyFromFloats(e.x-o,e.y-o,e.z-o),h=t.TmpVector3[1].copyFromFloats(i.x+o,i.y+o,i.z+o),u=0,p=Number.MAX_VALUE;if(Math.abs(this.direction.x)<1e-7){if(this.origin.x<c.x||this.origin.x>h.x)return!1}else if(r=1/this.direction.x,n=(c.x-this.origin.x)*r,(a=(h.x-this.origin.x)*r)===-1/0&&(a=1/0),n>a&&(s=n,n=a,a=s),(u=Math.max(n,u))>(p=Math.min(a,p)))return!1;if(Math.abs(this.direction.y)<1e-7){if(this.origin.y<c.y||this.origin.y>h.y)return!1}else if(r=1/this.direction.y,n=(c.y-this.origin.y)*r,(a=(h.y-this.origin.y)*r)===-1/0&&(a=1/0),n>a&&(s=n,n=a,a=s),(u=Math.max(n,u))>(p=Math.min(a,p)))return!1;if(Math.abs(this.direction.z)<1e-7){if(this.origin.z<c.z||this.origin.z>h.z)return!1}else if(r=1/this.direction.z,n=(c.z-this.origin.z)*r,(a=(h.z-this.origin.z)*r)===-1/0&&(a=1/0),n>a&&(s=n,n=a,a=s),(u=Math.max(n,u))>(p=Math.min(a,p)))return!1;return!0},t.prototype.intersectsBox=function(t,e){return void 0===e&&(e=0),this.intersectsBoxMinMax(t.minimum,t.maximum,e)},t.prototype.intersectsSphere=function(t,e){void 0===e&&(e=0);var i=t.center.x-this.origin.x,o=t.center.y-this.origin.y,r=t.center.z-this.origin.z,n=i*i+o*o+r*r,a=t.radius+e,s=a*a;if(n<=s)return!0;var c=i*this.direction.x+o*this.direction.y+r*this.direction.z;return!(c<0)&&n-c*c<=s},t.prototype.intersectsTriangle=function(e,i,o){var n=t.TmpVector3[0],s=t.TmpVector3[1],c=t.TmpVector3[2],h=t.TmpVector3[3],u=t.TmpVector3[4];i.subtractToRef(e,n),o.subtractToRef(e,s),r.e.CrossToRef(this.direction,s,c);var p=r.e.Dot(n,c);if(0===p)return null;var l=1/p;this.origin.subtractToRef(e,h);var d=r.e.Dot(h,c)*l;if(d<0||d>1)return null;r.e.CrossToRef(h,n,u);var m=r.e.Dot(this.direction,u)*l;if(m<0||d+m>1)return null;var f=r.e.Dot(s,u)*l;return f>this.length?null:new a.a(1-d-m,d,f)},t.prototype.intersectsPlane=function(t){var e,i=r.e.Dot(t.normal,this.direction);if(Math.abs(i)<9.99999997475243e-7)return null;var o=r.e.Dot(t.normal,this.origin);return(e=(-t.d-o)/i)<0?e<-9.99999997475243e-7?null:0:e},t.prototype.intersectsAxis=function(t,e){switch(void 0===e&&(e=0),t){case"y":return(i=(this.origin.y-e)/this.direction.y)>0?null:new r.e(this.origin.x+this.direction.x*-i,e,this.origin.z+this.direction.z*-i);case"x":return(i=(this.origin.x-e)/this.direction.x)>0?null:new r.e(e,this.origin.y+this.direction.y*-i,this.origin.z+this.direction.z*-i);case"z":var i;return(i=(this.origin.z-e)/this.direction.z)>0?null:new r.e(this.origin.x+this.direction.x*-i,this.origin.y+this.direction.y*-i,e);default:return null}},t.prototype.intersectsMesh=function(e,i){var o=r.c.Matrix[0];return e.getWorldMatrix().invertToRef(o),this._tmpRay?t.TransformToRef(this,o,this._tmpRay):this._tmpRay=t.Transform(this,o),e.intersects(this._tmpRay,i)},t.prototype.intersectsMeshes=function(t,e,i){i?i.length=0:i=[];for(var o=0;o<t.length;o++){var r=this.intersectsMesh(t[o],e);r.hit&&i.push(r)}return i.sort(this._comparePickingInfo),i},t.prototype._comparePickingInfo=function(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0},t.prototype.intersectionSegment=function(e,i,o){var n=this.origin,a=r.c.Vector3[0],s=r.c.Vector3[1],c=r.c.Vector3[2],h=r.c.Vector3[3];i.subtractToRef(e,a),this.direction.scaleToRef(t.rayl,c),n.addToRef(c,s),e.subtractToRef(n,h);var u,p,l,d,m=r.e.Dot(a,a),f=r.e.Dot(a,c),y=r.e.Dot(c,c),g=r.e.Dot(a,h),_=r.e.Dot(c,h),b=m*y-f*f,v=b,R=b;b<t.smallnum?(p=0,v=1,d=_,R=y):(d=m*_-f*g,(p=f*_-y*g)<0?(p=0,d=_,R=y):p>v&&(p=v,d=_+f,R=y)),d<0?(d=0,-g<0?p=0:-g>m?p=v:(p=-g,v=m)):d>R&&(d=R,-g+f<0?p=0:-g+f>m?p=v:(p=-g+f,v=m)),u=Math.abs(p)<t.smallnum?0:p/v,l=Math.abs(d)<t.smallnum?0:d/R;var M=r.c.Vector3[4];c.scaleToRef(l,M);var P=r.c.Vector3[5];a.scaleToRef(u,P),P.addInPlace(h);var O=r.c.Vector3[6];return P.subtractToRef(M,O),l>0&&l<=this.length&&O.lengthSquared()<o*o?P.length():-1},t.prototype.update=function(t,e,i,o,r,n,a){return this.unprojectRayToRef(t,e,i,o,r,n,a),this},t.Zero=function(){return new t(r.e.Zero(),r.e.Zero())},t.CreateNew=function(e,i,o,r,n,a,s){return t.Zero().update(e,i,o,r,n,a,s)},t.CreateNewFromTo=function(e,i,o){void 0===o&&(o=r.a.IdentityReadOnly);var n=i.subtract(e),a=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);return n.normalize(),t.Transform(new t(e,n,a),o)},t.Transform=function(e,i){var o=new t(new r.e(0,0,0),new r.e(0,0,0));return t.TransformToRef(e,i,o),o},t.TransformToRef=function(t,e,i){r.e.TransformCoordinatesToRef(t.origin,e,i.origin),r.e.TransformNormalToRef(t.direction,e,i.direction),i.length=t.length;var o=i.direction,n=o.length();if(0!==n&&1!==n){var a=1/n;o.x*=a,o.y*=a,o.z*=a,i.length*=n}},t.prototype.unprojectRayToRef=function(t,e,i,o,n,a,s){var c=r.c.Matrix[0];n.multiplyToRef(a,c),c.multiplyToRef(s,c),c.invert();var h=r.c.Vector3[0];h.x=t/i*2-1,h.y=-(e/o*2-1),h.z=-1;var u=r.c.Vector3[1].copyFromFloats(h.x,h.y,1),p=r.c.Vector3[2],l=r.c.Vector3[3];r.e._UnprojectFromInvertedMatrixToRef(h,c,p),r.e._UnprojectFromInvertedMatrixToRef(u,c,l),this.origin.copyFrom(p),l.subtractToRef(p,this.direction),this.direction.normalize()},t.TmpVector3=o.a.BuildArray(6,r.e.Zero),t.smallnum=1e-8,t.rayl=1e9,t}();s.a.prototype.createPickingRay=function(t,e,i,o,r){void 0===r&&(r=!1);var n=h.Zero();return this.createPickingRayToRef(t,e,i,n,o,r),n},s.a.prototype.createPickingRayToRef=function(t,e,i,o,n,a){void 0===a&&(a=!1);var s=this.getEngine();if(!n){if(!this.activeCamera)return this;n=this.activeCamera}var c=n.viewport.toGlobal(s.getRenderWidth(),s.getRenderHeight());return t=t/s.getHardwareScalingLevel()-c.x,e=e/s.getHardwareScalingLevel()-(s.getRenderHeight()-c.y-c.height),o.update(t,e,c.width,c.height,i||r.a.IdentityReadOnly,a?r.a.IdentityReadOnly:n.getViewMatrix(),n.getProjectionMatrix()),this},s.a.prototype.createPickingRayInCameraSpace=function(t,e,i){var o=h.Zero();return this.createPickingRayInCameraSpaceToRef(t,e,o,i),o},s.a.prototype.createPickingRayInCameraSpaceToRef=function(t,e,i,o){if(!n.a)return this;var a=this.getEngine();if(!o){if(!this.activeCamera)throw new Error("Active camera not set");o=this.activeCamera}var s=o.viewport.toGlobal(a.getRenderWidth(),a.getRenderHeight()),c=r.a.Identity();return t=t/a.getHardwareScalingLevel()-s.x,e=e/a.getHardwareScalingLevel()-(a.getRenderHeight()-s.y-s.height),i.update(t,e,s.width,s.height,c,c,o.getProjectionMatrix()),this},s.a.prototype._internalPick=function(t,e,i,o){if(!n.a)return null;for(var r=null,a=0;a<this.meshes.length;a++){var s=this.meshes[a];if(e){if(!e(s))continue}else if(!s.isEnabled()||!s.isVisible||!s.isPickable)continue;var c=t(s.getWorldMatrix()),h=s.intersects(c,i,o);if(h&&h.hit&&((i||null==r||!(h.distance>=r.distance))&&(r=h,i)))break}return r||new n.a},s.a.prototype._internalMultiPick=function(t,e,i){if(!n.a)return null;for(var o=new Array,r=0;r<this.meshes.length;r++){var a=this.meshes[r];if(e){if(!e(a))continue}else if(!a.isEnabled()||!a.isVisible||!a.isPickable)continue;var s=t(a.getWorldMatrix()),c=a.intersects(s,!1,i);c&&c.hit&&o.push(c)}return o},s.a.prototype.pick=function(t,e,i,o,a,s){var c=this;if(!n.a)return null;var u=this._internalPick((function(i){return c._tempPickingRay||(c._tempPickingRay=h.Zero()),c.createPickingRayToRef(t,e,i,c._tempPickingRay,a||null),c._tempPickingRay}),i,o,s);return u&&(u.ray=this.createPickingRay(t,e,r.a.Identity(),a||null)),u},s.a.prototype.pickWithRay=function(t,e,i,o){var n=this,a=this._internalPick((function(e){return n._pickWithRayInverseMatrix||(n._pickWithRayInverseMatrix=r.a.Identity()),e.invertToRef(n._pickWithRayInverseMatrix),n._cachedRayForTransform||(n._cachedRayForTransform=h.Zero()),h.TransformToRef(t,n._pickWithRayInverseMatrix,n._cachedRayForTransform),n._cachedRayForTransform}),e,i,o);return a&&(a.ray=t),a},s.a.prototype.multiPick=function(t,e,i,o,r){var n=this;return this._internalMultiPick((function(i){return n.createPickingRay(t,e,i,o||null)}),i,r)},s.a.prototype.multiPickWithRay=function(t,e,i){var o=this;return this._internalMultiPick((function(e){return o._pickWithRayInverseMatrix||(o._pickWithRayInverseMatrix=r.a.Identity()),e.invertToRef(o._pickWithRayInverseMatrix),o._cachedRayForTransform||(o._cachedRayForTransform=h.Zero()),h.TransformToRef(t,o._pickWithRayInverseMatrix,o._cachedRayForTransform),o._cachedRayForTransform}),e,i)},c.a.prototype.getForwardRay=function(t,e,i){void 0===t&&(t=100),e||(e=this.getWorldMatrix()),i||(i=this.position);var o=this._scene.useRightHandedSystem?new r.e(0,0,-1):new r.e(0,0,1),n=r.e.TransformNormal(o,e),a=r.e.Normalize(n);return new h(i,a,t)}},"5Jap":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var o=i("mrSG"),r=i("ADVu"),n=i("xCqU"),a=i("/SR9"),s=i("M9Dn"),c=function(){function t(){this.gamepadAngularSensibility=200,this.gamepadMoveSensibility=40,this._yAxisScale=1,this._cameraTransform=a.a.Identity(),this._deltaTransform=a.e.Zero(),this._vector3=a.e.Zero(),this._vector2=a.d.Zero()}return Object.defineProperty(t.prototype,"invertYAxis",{get:function(){return 1!==this._yAxisScale},set:function(t){this._yAxisScale=t?-1:1},enumerable:!0,configurable:!0}),t.prototype.attachControl=function(t,e){var i=this,o=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=o.onGamepadConnectedObservable.add((function(t){t.type!==s.a.POSE_ENABLED&&(i.gamepad&&t.type!==s.a.XBOX||(i.gamepad=t))})),this._onGamepadDisconnectedObserver=o.onGamepadDisconnectedObservable.add((function(t){i.gamepad===t&&(i.gamepad=null)})),this.gamepad=o.getGamepadByType(s.a.XBOX)},t.prototype.detachControl=function(t){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},t.prototype.checkInputs=function(){if(this.gamepad&&this.gamepad.leftStick){var t=this.camera,e=this.gamepad.leftStick,i=e.x/this.gamepadMoveSensibility,o=e.y/this.gamepadMoveSensibility;e.x=Math.abs(i)>.005?0+i:0,e.y=Math.abs(o)>.005?0+o:0;var r=this.gamepad.rightStick;if(r){var n=r.x/this.gamepadAngularSensibility,s=r.y/this.gamepadAngularSensibility*this._yAxisScale;r.x=Math.abs(n)>.001?0+n:0,r.y=Math.abs(s)>.001?0+s:0}else r={x:0,y:0};t.rotationQuaternion?t.rotationQuaternion.toRotationMatrix(this._cameraTransform):a.a.RotationYawPitchRollToRef(t.rotation.y,t.rotation.x,0,this._cameraTransform);var c=50*t._computeLocalCameraSpeed();this._vector3.copyFromFloats(e.x*c,0,-e.y*c),a.e.TransformCoordinatesToRef(this._vector3,this._cameraTransform,this._deltaTransform),t.cameraDirection.addInPlace(this._deltaTransform),this._vector2.copyFromFloats(r.y,r.x),t.cameraRotation.addInPlace(this._vector2)}},t.prototype.getClassName=function(){return"FreeCameraGamepadInput"},t.prototype.getSimpleName=function(){return"gamepad"},Object(o.b)([Object(r.c)()],t.prototype,"gamepadAngularSensibility",void 0),Object(o.b)([Object(r.c)()],t.prototype,"gamepadMoveSensibility",void 0),t}();n.a.FreeCameraGamepadInput=c},CAkI:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var o=i("mrSG"),r=i("ADVu"),n=i("Bfey"),a=i("YKqZ"),s=i("ps+7"),c=i("/SR9"),h=i("Ufda"),u=i("uyO6"),p=i("WHS4"),l=i("n5HA"),d=i("JIAX"),m=i("DwXJ"),f=function(t){function e(i,o,r,a){void 0===a&&(a=!0);var h=t.call(this,i,r)||this;return h._position=c.e.Zero(),h.upVector=c.e.Up(),h.orthoLeft=null,h.orthoRight=null,h.orthoBottom=null,h.orthoTop=null,h.fov=.8,h.minZ=1,h.maxZ=1e4,h.inertia=.9,h.mode=e.PERSPECTIVE_CAMERA,h.isIntermediate=!1,h.viewport=new d.a(0,0,1,1),h.layerMask=268435455,h.fovMode=e.FOVMODE_VERTICAL_FIXED,h.cameraRigMode=e.RIG_MODE_NONE,h.customRenderTargets=new Array,h.outputRenderTarget=null,h.onViewMatrixChangedObservable=new s.a,h.onProjectionMatrixChangedObservable=new s.a,h.onAfterCheckInputsObservable=new s.a,h.onRestoreStateObservable=new s.a,h.isRigCamera=!1,h._rigCameras=new Array,h._webvrViewMatrix=c.a.Identity(),h._skipRendering=!1,h._projectionMatrix=new c.a,h._postProcesses=new Array,h._activeMeshes=new n.a(256),h._globalPosition=c.e.Zero(),h._computedViewMatrix=c.a.Identity(),h._doNotComputeProjectionMatrix=!1,h._transformMatrix=c.a.Zero(),h._refreshFrustumPlanes=!0,h._isCamera=!0,h._isLeftCamera=!1,h._isRightCamera=!1,h.getScene().addCamera(h),a&&!h.getScene().activeCamera&&(h.getScene().activeCamera=h),h.position=o,h}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),e.prototype.storeState=function(){return this._stateStored=!0,this._storedFov=this.fov,this},e.prototype._restoreStateValues=function(){return!!this._stateStored&&(this.fov=this._storedFov,!0)},e.prototype.restoreState=function(){return!!this._restoreStateValues()&&(this.onRestoreStateObservable.notifyObservers(this),!0)},e.prototype.getClassName=function(){return"Camera"},e.prototype.toString=function(t){var e="Name: "+this.name;if(e+=", type: "+this.getClassName(),this.animations)for(var i=0;i<this.animations.length;i++)e+=", animation[0]: "+this.animations[i].toString(t);return e},Object.defineProperty(e.prototype,"globalPosition",{get:function(){return this._globalPosition},enumerable:!0,configurable:!0}),e.prototype.getActiveMeshes=function(){return this._activeMeshes},e.prototype.isActiveMesh=function(t){return-1!==this._activeMeshes.indexOf(t)},e.prototype.isReady=function(e){if(void 0===e&&(e=!1),e)for(var i=0,o=this._postProcesses;i<o.length;i++){var r=o[i];if(r&&!r.isReady())return!1}return t.prototype.isReady.call(this,e)},e.prototype._initCache=function(){t.prototype._initCache.call(this),this._cache.position=new c.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.upVector=new c.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.mode=void 0,this._cache.minZ=void 0,this._cache.maxZ=void 0,this._cache.fov=void 0,this._cache.fovMode=void 0,this._cache.aspectRatio=void 0,this._cache.orthoLeft=void 0,this._cache.orthoRight=void 0,this._cache.orthoBottom=void 0,this._cache.orthoTop=void 0,this._cache.renderWidth=void 0,this._cache.renderHeight=void 0},e.prototype._updateCache=function(e){e||t.prototype._updateCache.call(this),this._cache.position.copyFrom(this.position),this._cache.upVector.copyFrom(this.upVector)},e.prototype._isSynchronized=function(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()},e.prototype._isSynchronizedViewMatrix=function(){return!!t.prototype._isSynchronized.call(this)&&(this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent())},e.prototype._isSynchronizedProjectionMatrix=function(){var t=this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ;if(!t)return!1;var i=this.getEngine();return t=this.mode===e.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&this._cache.aspectRatio===i.getAspectRatio(this):this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===i.getRenderWidth()&&this._cache.renderHeight===i.getRenderHeight()},e.prototype.attachControl=function(t,e){},e.prototype.detachControl=function(t){},e.prototype.update=function(){this._checkInputs(),this.cameraRigMode!==e.RIG_MODE_NONE&&this._updateRigCameras()},e.prototype._checkInputs=function(){this.onAfterCheckInputsObservable.notifyObservers(this)},Object.defineProperty(e.prototype,"rigCameras",{get:function(){return this._rigCameras},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rigPostProcess",{get:function(){return this._rigPostProcess},enumerable:!0,configurable:!0}),e.prototype._getFirstPostProcess=function(){for(var t=0;t<this._postProcesses.length;t++)if(null!==this._postProcesses[t])return this._postProcesses[t];return null},e.prototype._cascadePostProcessesToRigCams=function(){var t=this._getFirstPostProcess();t&&t.markTextureDirty();for(var e=0,i=this._rigCameras.length;e<i;e++){var o=this._rigCameras[e],r=o._rigPostProcess;if(r)"pass"===r.getEffectName()&&(o.isIntermediate=0===this._postProcesses.length),o._postProcesses=this._postProcesses.slice(0).concat(r),r.markTextureDirty();else o._postProcesses=this._postProcesses.slice(0)}},e.prototype.attachPostProcess=function(t,e){return void 0===e&&(e=null),!t.isReusable()&&this._postProcesses.indexOf(t)>-1?(u.a.Error("You're trying to reuse a post process not defined as reusable."),0):(null==e||e<0?this._postProcesses.push(t):null===this._postProcesses[e]?this._postProcesses[e]=t:this._postProcesses.splice(e,0,t),this._cascadePostProcessesToRigCams(),this._postProcesses.indexOf(t))},e.prototype.detachPostProcess=function(t){var e=this._postProcesses.indexOf(t);-1!==e&&(this._postProcesses[e]=null),this._cascadePostProcessesToRigCams()},e.prototype.getWorldMatrix=function(){return this._isSynchronizedViewMatrix()||this.getViewMatrix(),this._worldMatrix},e.prototype._getViewMatrix=function(){return c.a.Identity()},e.prototype.getViewMatrix=function(t){return!t&&this._isSynchronizedViewMatrix()||(this.updateCache(),this._computedViewMatrix=this._getViewMatrix(),this._currentRenderId=this.getScene().getRenderId(),this._childUpdateId++,this._refreshFrustumPlanes=!0,this._cameraRigParams&&this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix),this.parent&&this.parent.onViewMatrixChangedObservable&&this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent),this.onViewMatrixChangedObservable.notifyObservers(this),this._computedViewMatrix.invertToRef(this._worldMatrix)),this._computedViewMatrix},e.prototype.freezeProjectionMatrix=function(t){this._doNotComputeProjectionMatrix=!0,void 0!==t&&(this._projectionMatrix=t)},e.prototype.unfreezeProjectionMatrix=function(){this._doNotComputeProjectionMatrix=!1},e.prototype.getProjectionMatrix=function(t){if(this._doNotComputeProjectionMatrix||!t&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode,this._cache.minZ=this.minZ,this._cache.maxZ=this.maxZ,this._refreshFrustumPlanes=!0;var i=this.getEngine(),o=this.getScene();if(this.mode===e.PERSPECTIVE_CAMERA){this._cache.fov=this.fov,this._cache.fovMode=this.fovMode,this._cache.aspectRatio=i.getAspectRatio(this),this.minZ<=0&&(this.minZ=.1);var r=i.useReverseDepthBuffer;(o.useRightHandedSystem?r?c.a.PerspectiveFovReverseRHToRef:c.a.PerspectiveFovRHToRef:r?c.a.PerspectiveFovReverseLHToRef:c.a.PerspectiveFovLHToRef)(this.fov,i.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===e.FOVMODE_VERTICAL_FIXED)}else{var n=i.getRenderWidth()/2,a=i.getRenderHeight()/2;o.useRightHandedSystem?c.a.OrthoOffCenterRHToRef(this.orthoLeft||-n,this.orthoRight||n,this.orthoBottom||-a,this.orthoTop||a,this.minZ,this.maxZ,this._projectionMatrix):c.a.OrthoOffCenterLHToRef(this.orthoLeft||-n,this.orthoRight||n,this.orthoBottom||-a,this.orthoTop||a,this.minZ,this.maxZ,this._projectionMatrix),this._cache.orthoLeft=this.orthoLeft,this._cache.orthoRight=this.orthoRight,this._cache.orthoBottom=this.orthoBottom,this._cache.orthoTop=this.orthoTop,this._cache.renderWidth=i.getRenderWidth(),this._cache.renderHeight=i.getRenderHeight()}return this.onProjectionMatrixChangedObservable.notifyObservers(this),this._projectionMatrix},e.prototype.getTransformationMatrix=function(){return this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._transformMatrix},e.prototype._updateFrustumPlanes=function(){this._refreshFrustumPlanes&&(this.getTransformationMatrix(),this._frustumPlanes?m.a.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=m.a.GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)},e.prototype.isInFrustum=function(t,e){if(void 0===e&&(e=!1),this._updateFrustumPlanes(),e&&this.rigCameras.length>0){var i=!1;return this.rigCameras.forEach((function(e){e._updateFrustumPlanes(),i=i||t.isInFrustum(e._frustumPlanes)})),i}return t.isInFrustum(this._frustumPlanes)},e.prototype.isCompletelyInFrustum=function(t){return this._updateFrustumPlanes(),t.isCompletelyInFrustum(this._frustumPlanes)},e.prototype.getForwardRay=function(t,e,i){throw void 0===t&&(t=100),l.a.WarnImport("Ray")},e.prototype.dispose=function(i,o){for(void 0===o&&(o=!1),this.onViewMatrixChangedObservable.clear(),this.onProjectionMatrixChangedObservable.clear(),this.onAfterCheckInputsObservable.clear(),this.onRestoreStateObservable.clear(),this.inputs&&this.inputs.clear(),this.getScene().stopAnimation(this),this.getScene().removeCamera(this);this._rigCameras.length>0;){var r=this._rigCameras.pop();r&&r.dispose()}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses=[];else if(this.cameraRigMode!==e.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses=[];else for(var n=this._postProcesses.length;--n>=0;){var a=this._postProcesses[n];a&&a.dispose(this)}for(n=this.customRenderTargets.length;--n>=0;)this.customRenderTargets[n].dispose();this.customRenderTargets=[],this._activeMeshes.dispose(),t.prototype.dispose.call(this,i,o)},Object.defineProperty(e.prototype,"isLeftCamera",{get:function(){return this._isLeftCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRightCamera",{get:function(){return this._isRightCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftCamera",{get:function(){return this._rigCameras.length<1?null:this._rigCameras[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightCamera",{get:function(){return this._rigCameras.length<2?null:this._rigCameras[1]},enumerable:!0,configurable:!0}),e.prototype.getLeftTarget=function(){return this._rigCameras.length<1?null:this._rigCameras[0].getTarget()},e.prototype.getRightTarget=function(){return this._rigCameras.length<2?null:this._rigCameras[1].getTarget()},e.prototype.setCameraRigMode=function(t,i){if(this.cameraRigMode!==t){for(;this._rigCameras.length>0;){var o=this._rigCameras.pop();o&&o.dispose()}if(this.cameraRigMode=t,this._cameraRigParams={},this._cameraRigParams.interaxialDistance=i.interaxialDistance||.0637,this._cameraRigParams.stereoHalfAngle=a.b.ToRadians(this._cameraRigParams.interaxialDistance/.0637),this.cameraRigMode!==e.RIG_MODE_NONE){var r=this.createRigCamera(this.name+"_L",0);r&&(r._isLeftCamera=!0);var n=this.createRigCamera(this.name+"_R",1);n&&(n._isRightCamera=!0),r&&n&&(this._rigCameras.push(r),this._rigCameras.push(n))}switch(this.cameraRigMode){case e.RIG_MODE_STEREOSCOPIC_ANAGLYPH:e._setStereoscopicAnaglyphRigMode(this);break;case e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case e.RIG_MODE_STEREOSCOPIC_OVERUNDER:case e.RIG_MODE_STEREOSCOPIC_INTERLACED:e._setStereoscopicRigMode(this);break;case e.RIG_MODE_VR:e._setVRRigMode(this,i);break;case e.RIG_MODE_WEBVR:e._setWebVRRigMode(this,i)}this._cascadePostProcessesToRigCams(),this.update()}},e._setStereoscopicRigMode=function(t){throw"Import Cameras/RigModes/stereoscopicRigMode before using stereoscopic rig mode"},e._setStereoscopicAnaglyphRigMode=function(t){throw"Import Cameras/RigModes/stereoscopicAnaglyphRigMode before using stereoscopic anaglyph rig mode"},e._setVRRigMode=function(t,e){throw"Import Cameras/RigModes/vrRigMode before using VR rig mode"},e._setWebVRRigMode=function(t,e){throw"Import Cameras/RigModes/WebVRRigMode before using Web VR rig mode"},e.prototype._getVRProjectionMatrix=function(){return c.a.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,this._cameraRigParams.vrWorkMatrix),this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix),this._projectionMatrix},e.prototype._updateCameraRotationMatrix=function(){},e.prototype._updateWebVRCameraRotationMatrix=function(){},e.prototype._getWebVRProjectionMatrix=function(){return c.a.Identity()},e.prototype._getWebVRViewMatrix=function(){return c.a.Identity()},e.prototype.setCameraRigParameter=function(t,e){this._cameraRigParams||(this._cameraRigParams={}),this._cameraRigParams[t]=e,"interaxialDistance"===t&&(this._cameraRigParams.stereoHalfAngle=a.b.ToRadians(e/.0637))},e.prototype.createRigCamera=function(t,e){return null},e.prototype._updateRigCameras=function(){for(var t=0;t<this._rigCameras.length;t++)this._rigCameras[t].minZ=this.minZ,this._rigCameras[t].maxZ=this.maxZ,this._rigCameras[t].fov=this.fov,this._rigCameras[t].upVector.copyFrom(this.upVector);this.cameraRigMode===e.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=this.viewport)},e.prototype._setupInputs=function(){},e.prototype.serialize=function(){var t=r.a.Serialize(this);return t.type=this.getClassName(),this.parent&&(t.parentId=this.parent.id),this.inputs&&this.inputs.serialize(t),r.a.AppendSerializedAnimations(this,t),t.ranges=this.serializeAnimationRanges(),t},e.prototype.clone=function(t){return r.a.Clone(e.GetConstructorFromName(this.getClassName(),t,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this)},e.prototype.getDirection=function(t){var e=c.e.Zero();return this.getDirectionToRef(t,e),e},Object.defineProperty(e.prototype,"absoluteRotation",{get:function(){var t=c.b.Zero();return this.getWorldMatrix().decompose(void 0,t),t},enumerable:!0,configurable:!0}),e.prototype.getDirectionToRef=function(t,e){c.e.TransformNormalToRef(t,this.getWorldMatrix(),e)},e.GetConstructorFromName=function(t,i,o,r,n){void 0===r&&(r=0),void 0===n&&(n=!0);var a=h.a.Construct(t,i,o,{interaxial_distance:r,isStereoscopicSideBySide:n});return a||function(){return e._createDefaultParsedCamera(i,o)}},e.prototype.computeWorldMatrix=function(){return this.getWorldMatrix()},e.Parse=function(t,i){var o=t.type,n=e.GetConstructorFromName(o,t.name,i,t.interaxial_distance,t.isStereoscopicSideBySide),a=r.a.Parse(n,t,i);if(t.parentId&&(a._waitingParentId=t.parentId),a.inputs&&(a.inputs.parse(t),a._setupInputs()),a.setPosition&&(a.position.copyFromFloats(0,0,0),a.setPosition(c.e.FromArray(t.position))),t.target&&a.setTarget&&a.setTarget(c.e.FromArray(t.target)),t.cameraRigMode){var s=t.interaxial_distance?{interaxialDistance:t.interaxial_distance}:{};a.setCameraRigMode(t.cameraRigMode,s)}if(t.animations){for(var u=0;u<t.animations.length;u++){var l=t.animations[u],d=p.a.GetClass("BABYLON.Animation");d&&a.animations.push(d.Parse(l))}h.a.ParseAnimationRanges(a,t,i)}return t.autoAnimate&&i.beginAnimation(a,t.autoAnimateFrom,t.autoAnimateTo,t.autoAnimateLoop,t.autoAnimateSpeed||1),a},e._createDefaultParsedCamera=function(t,e){throw l.a.WarnImport("UniversalCamera")},e.PERSPECTIVE_CAMERA=0,e.ORTHOGRAPHIC_CAMERA=1,e.FOVMODE_VERTICAL_FIXED=0,e.FOVMODE_HORIZONTAL_FIXED=1,e.RIG_MODE_NONE=0,e.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,e.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,e.RIG_MODE_STEREOSCOPIC_OVERUNDER=13,e.RIG_MODE_STEREOSCOPIC_INTERLACED=14,e.RIG_MODE_VR=20,e.RIG_MODE_WEBVR=21,e.RIG_MODE_CUSTOM=22,e.ForceAttachControlToAlwaysPreventDefault=!1,Object(o.b)([Object(r.l)("position")],e.prototype,"_position",void 0),Object(o.b)([Object(r.l)()],e.prototype,"upVector",void 0),Object(o.b)([Object(r.c)()],e.prototype,"orthoLeft",void 0),Object(o.b)([Object(r.c)()],e.prototype,"orthoRight",void 0),Object(o.b)([Object(r.c)()],e.prototype,"orthoBottom",void 0),Object(o.b)([Object(r.c)()],e.prototype,"orthoTop",void 0),Object(o.b)([Object(r.c)()],e.prototype,"fov",void 0),Object(o.b)([Object(r.c)()],e.prototype,"minZ",void 0),Object(o.b)([Object(r.c)()],e.prototype,"maxZ",void 0),Object(o.b)([Object(r.c)()],e.prototype,"inertia",void 0),Object(o.b)([Object(r.c)()],e.prototype,"mode",void 0),Object(o.b)([Object(r.c)()],e.prototype,"layerMask",void 0),Object(o.b)([Object(r.c)()],e.prototype,"fovMode",void 0),Object(o.b)([Object(r.c)()],e.prototype,"cameraRigMode",void 0),Object(o.b)([Object(r.c)()],e.prototype,"interaxialDistance",void 0),Object(o.b)([Object(r.c)()],e.prototype,"isStereoscopicSideBySide",void 0),e}(h.a)},HcSi:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var o=i("mrSG"),r=i("ADVu"),n=i("xCqU"),a=i("YKqZ"),s=i("98Qd"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttons=[0,1,2],e.angularSensibilityX=1e3,e.angularSensibilityY=1e3,e.pinchPrecision=12,e.pinchDeltaPercentage=0,e.useNaturalPinchZoom=!1,e.panningSensibility=1e3,e.multiTouchPanning=!0,e.multiTouchPanAndZoom=!0,e.pinchInwards=!0,e._isPanClick=!1,e._twoFingerActivityCount=0,e._isPinching=!1,e}return Object(o.c)(e,t),e.prototype.getClassName=function(){return"ArcRotateCameraPointersInput"},e.prototype.onTouch=function(t,e,i){0!==this.panningSensibility&&(this._ctrlKey&&this.camera._useCtrlForPanning||this._isPanClick)?(this.camera.inertialPanningX+=-e/this.panningSensibility,this.camera.inertialPanningY+=i/this.panningSensibility):(this.camera.inertialAlphaOffset-=e/this.angularSensibilityX,this.camera.inertialBetaOffset-=i/this.angularSensibilityY)},e.prototype.onDoubleTap=function(t){this.camera.useInputToRestoreState&&this.camera.restoreState()},e.prototype.onMultiTouch=function(t,e,i,o,r,n){if(!(0===i&&null===r||0===o&&null===n)){var a=this.pinchInwards?1:-1;if(this.multiTouchPanAndZoom){if(this.useNaturalPinchZoom?this.camera.radius=this.camera.radius*Math.sqrt(i)/Math.sqrt(o):this.pinchDeltaPercentage?this.camera.inertialRadiusOffset+=.001*(o-i)*this.camera.radius*this.pinchDeltaPercentage:this.camera.inertialRadiusOffset+=(o-i)/(this.pinchPrecision*a*(this.angularSensibilityX+this.angularSensibilityY)/2),0!==this.panningSensibility&&r&&n){var s=n.x-r.x,c=n.y-r.y;this.camera.inertialPanningX+=-s/this.panningSensibility,this.camera.inertialPanningY+=c/this.panningSensibility}}else{this._twoFingerActivityCount++;var h=Math.sqrt(i),u=Math.sqrt(o);if(this._isPinching||this._twoFingerActivityCount<20&&Math.abs(u-h)>this.camera.pinchToPanMaxDistance)this.pinchDeltaPercentage?this.camera.inertialRadiusOffset+=.001*(o-i)*this.camera.radius*this.pinchDeltaPercentage:this.camera.inertialRadiusOffset+=(o-i)/(this.pinchPrecision*a*(this.angularSensibilityX+this.angularSensibilityY)/2),this._isPinching=!0;else if(0!==this.panningSensibility&&this.multiTouchPanning&&n&&r){s=n.x-r.x,c=n.y-r.y;this.camera.inertialPanningX+=-s/this.panningSensibility,this.camera.inertialPanningY+=c/this.panningSensibility}}}},e.prototype.onButtonDown=function(t){this._isPanClick=t.button===this.camera._panningMouseButton},e.prototype.onButtonUp=function(t){this._twoFingerActivityCount=0,this._isPinching=!1},e.prototype.onLostFocus=function(){this._isPanClick=!1,this._twoFingerActivityCount=0,this._isPinching=!1},Object(o.b)([Object(r.c)()],e.prototype,"buttons",void 0),Object(o.b)([Object(r.c)()],e.prototype,"angularSensibilityX",void 0),Object(o.b)([Object(r.c)()],e.prototype,"angularSensibilityY",void 0),Object(o.b)([Object(r.c)()],e.prototype,"pinchPrecision",void 0),Object(o.b)([Object(r.c)()],e.prototype,"pinchDeltaPercentage",void 0),Object(o.b)([Object(r.c)()],e.prototype,"useNaturalPinchZoom",void 0),Object(o.b)([Object(r.c)()],e.prototype,"panningSensibility",void 0),Object(o.b)([Object(r.c)()],e.prototype,"multiTouchPanning",void 0),Object(o.b)([Object(r.c)()],e.prototype,"multiTouchPanAndZoom",void 0),e}(function(){function t(){this.buttons=[0,1,2]}return t.prototype.attachControl=function(t,e){var i=this,o=this.camera.getEngine(),r=0,n=null;this.pointA=null,this.pointB=null,this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0,this._pointerInput=function(a,c){var h=a.event,u="touch"===h.pointerType;if(!o.isInVRExclusivePointerMode&&(a.type===s.a.POINTERMOVE||-1!==i.buttons.indexOf(h.button))){var p=h.srcElement||h.target;if(i._altKey=h.altKey,i._ctrlKey=h.ctrlKey,i._metaKey=h.metaKey,i._shiftKey=h.shiftKey,i._buttonsPressed=h.buttons,o.isPointerLock){var l=h.movementX||h.mozMovementX||h.webkitMovementX||h.msMovementX||0,d=h.movementY||h.mozMovementY||h.webkitMovementY||h.msMovementY||0;i.onTouch(null,l,d),i.pointA=null,i.pointB=null}else if(a.type===s.a.POINTERDOWN&&p){try{p.setPointerCapture(h.pointerId)}catch(t){}null===i.pointA?i.pointA={x:h.clientX,y:h.clientY,pointerId:h.pointerId,type:h.pointerType}:null===i.pointB&&(i.pointB={x:h.clientX,y:h.clientY,pointerId:h.pointerId,type:h.pointerType}),i.onButtonDown(h),e||(h.preventDefault(),t.focus())}else if(a.type===s.a.POINTERDOUBLETAP)i.onDoubleTap(h.pointerType);else if(a.type===s.a.POINTERUP&&p){try{p.releasePointerCapture(h.pointerId)}catch(t){}u||(i.pointB=null),o._badOS?i.pointA=i.pointB=null:i.pointB&&i.pointA&&i.pointA.pointerId==h.pointerId?(i.pointA=i.pointB,i.pointB=null):i.pointA&&i.pointB&&i.pointB.pointerId==h.pointerId?i.pointB=null:i.pointA=i.pointB=null,(0!==r||n)&&(i.onMultiTouch(i.pointA,i.pointB,r,0,n,null),r=0,n=null),i.onButtonUp(h),e||h.preventDefault()}else if(a.type===s.a.POINTERMOVE)if(e||h.preventDefault(),i.pointA&&null===i.pointB){l=h.clientX-i.pointA.x,d=h.clientY-i.pointA.y;i.onTouch(i.pointA,l,d),i.pointA.x=h.clientX,i.pointA.y=h.clientY}else if(i.pointA&&i.pointB){var m=i.pointA.pointerId===h.pointerId?i.pointA:i.pointB;m.x=h.clientX,m.y=h.clientY;var f=i.pointA.x-i.pointB.x,y=i.pointA.y-i.pointB.y,g=f*f+y*y,_={x:(i.pointA.x+i.pointB.x)/2,y:(i.pointA.y+i.pointB.y)/2,pointerId:h.pointerId,type:a.type};i.onMultiTouch(i.pointA,i.pointB,r,g,n,_),n=_,r=g}}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,s.a.POINTERDOWN|s.a.POINTERUP|s.a.POINTERMOVE),this._onLostFocus=function(){i.pointA=i.pointB=null,r=0,n=null,i.onLostFocus()},t.addEventListener("contextmenu",this.onContextMenu.bind(this),!1);var c=this.camera.getScene().getEngine().getHostWindow();c&&a.b.RegisterTopRootEvents(c,[{name:"blur",handler:this._onLostFocus}])},t.prototype.detachControl=function(t){if(this._onLostFocus){var e=this.camera.getScene().getEngine().getHostWindow();e&&a.b.UnregisterTopRootEvents(e,[{name:"blur",handler:this._onLostFocus}])}t&&this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this.onContextMenu&&t.removeEventListener("contextmenu",this.onContextMenu),this._onLostFocus=null),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0},t.prototype.getClassName=function(){return"BaseCameraPointersInput"},t.prototype.getSimpleName=function(){return"pointers"},t.prototype.onDoubleTap=function(t){},t.prototype.onTouch=function(t,e,i){},t.prototype.onMultiTouch=function(t,e,i,o,r,n){},t.prototype.onContextMenu=function(t){t.preventDefault()},t.prototype.onButtonDown=function(t){},t.prototype.onButtonUp=function(t){},t.prototype.onLostFocus=function(){},Object(o.b)([Object(r.c)()],t.prototype,"buttons",void 0),t}());n.a.ArcRotateCameraPointersInput=c;var h=i("jSHE"),u=function(){function t(){this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this.keysReset=[220],this.panningSensibility=50,this.zoomingSensibility=25,this.useAltToZoom=!0,this.angularSpeed=.01,this._keys=new Array}return t.prototype.attachControl=function(t,e){var i=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((function(){i._keys=[]})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((function(t){var o,r=t.event;r.metaKey||(t.type===h.a.KEYDOWN?(i._ctrlPressed=r.ctrlKey,i._altPressed=r.altKey,(-1!==i.keysUp.indexOf(r.keyCode)||-1!==i.keysDown.indexOf(r.keyCode)||-1!==i.keysLeft.indexOf(r.keyCode)||-1!==i.keysRight.indexOf(r.keyCode)||-1!==i.keysReset.indexOf(r.keyCode))&&(-1===(o=i._keys.indexOf(r.keyCode))&&i._keys.push(r.keyCode),r.preventDefault&&(e||r.preventDefault()))):-1===i.keysUp.indexOf(r.keyCode)&&-1===i.keysDown.indexOf(r.keyCode)&&-1===i.keysLeft.indexOf(r.keyCode)&&-1===i.keysRight.indexOf(r.keyCode)&&-1===i.keysReset.indexOf(r.keyCode)||((o=i._keys.indexOf(r.keyCode))>=0&&i._keys.splice(o,1),r.preventDefault&&(e||r.preventDefault())))})))},t.prototype.detachControl=function(t){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},t.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var t=this.camera,e=0;e<this._keys.length;e++){var i=this._keys[e];-1!==this.keysLeft.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningX-=1/this.panningSensibility:t.inertialAlphaOffset-=this.angularSpeed:-1!==this.keysUp.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningY+=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?t.inertialRadiusOffset+=1/this.zoomingSensibility:t.inertialBetaOffset-=this.angularSpeed:-1!==this.keysRight.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningX+=1/this.panningSensibility:t.inertialAlphaOffset+=this.angularSpeed:-1!==this.keysDown.indexOf(i)?this._ctrlPressed&&this.camera._useCtrlForPanning?t.inertialPanningY-=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?t.inertialRadiusOffset-=1/this.zoomingSensibility:t.inertialBetaOffset+=this.angularSpeed:-1!==this.keysReset.indexOf(i)&&t.useInputToRestoreState&&t.restoreState()}},t.prototype.getClassName=function(){return"ArcRotateCameraKeyboardMoveInput"},t.prototype.getSimpleName=function(){return"keyboard"},Object(o.b)([Object(r.c)()],t.prototype,"keysUp",void 0),Object(o.b)([Object(r.c)()],t.prototype,"keysDown",void 0),Object(o.b)([Object(r.c)()],t.prototype,"keysLeft",void 0),Object(o.b)([Object(r.c)()],t.prototype,"keysRight",void 0),Object(o.b)([Object(r.c)()],t.prototype,"keysReset",void 0),Object(o.b)([Object(r.c)()],t.prototype,"panningSensibility",void 0),Object(o.b)([Object(r.c)()],t.prototype,"zoomingSensibility",void 0),Object(o.b)([Object(r.c)()],t.prototype,"useAltToZoom",void 0),Object(o.b)([Object(r.c)()],t.prototype,"angularSpeed",void 0),t}();n.a.ArcRotateCameraKeyboardMoveInput=u;var p=i("sH6m"),l=function(){function t(){this.wheelPrecision=3,this.wheelDeltaPercentage=0}return t.prototype.computeDeltaFromMouseWheelLegacyEvent=function(t,e){var i=.01*t*this.wheelDeltaPercentage*e;return t>0?i/(1+this.wheelDeltaPercentage):i*(1+this.wheelDeltaPercentage)},t.prototype.attachControl=function(t,e){var i=this;this._wheel=function(t,o){if(t.type===s.a.POINTERWHEEL){var r=t.event,n=0,a=r,c=0;if(c=a.wheelDelta?a.wheelDelta:60*-(r.deltaY||r.detail),i.wheelDeltaPercentage){if((n=i.computeDeltaFromMouseWheelLegacyEvent(c,i.camera.radius))>0){for(var h=i.camera.radius,u=i.camera.inertialRadiusOffset+n,l=0;l<20&&Math.abs(u)>.001;l++)h-=u,u*=i.camera.inertia;h=p.a.Clamp(h,0,Number.MAX_VALUE),n=i.computeDeltaFromMouseWheelLegacyEvent(c,h)}}else n=c/(40*i.wheelPrecision);n&&(i.camera.inertialRadiusOffset+=n),r.preventDefault&&(e||r.preventDefault())}},this._observer=this.camera.getScene().onPointerObservable.add(this._wheel,s.a.POINTERWHEEL)},t.prototype.detachControl=function(t){this._observer&&t&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._wheel=null)},t.prototype.getClassName=function(){return"ArcRotateCameraMouseWheelInput"},t.prototype.getSimpleName=function(){return"mousewheel"},Object(o.b)([Object(r.c)()],t.prototype,"wheelPrecision",void 0),Object(o.b)([Object(r.c)()],t.prototype,"wheelDeltaPercentage",void 0),t}();n.a.ArcRotateCameraMouseWheelInput=l;var d=function(t){function e(e){return t.call(this,e)||this}return Object(o.c)(e,t),e.prototype.addMouseWheel=function(){return this.add(new l),this},e.prototype.addPointers=function(){return this.add(new c),this},e.prototype.addKeyboard=function(){return this.add(new u),this},e}(n.b)},IIVm:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var o=function(){function t(t,e,i,o,r,n){this.source=t,this.pointerX=e,this.pointerY=i,this.meshUnderPointer=o,this.sourceEvent=r,this.additionalData=n}return t.CreateNew=function(e,i,o){var r=e.getScene();return new t(e,r.pointerX,r.pointerY,r.meshUnderPointer||e,i,o)},t.CreateNewFromSprite=function(e,i,o,r){return new t(e,i.pointerX,i.pointerY,i.meshUnderPointer,o,r)},t.CreateNewFromScene=function(e,i){return new t(null,e.pointerX,e.pointerY,e.meshUnderPointer,i)},t.CreateNewFromPrimitive=function(e,i,o,r){return new t(e,i.x,i.y,null,o,r)},t}()},"O+AM":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("/SR9"),r=function(){this._checkCollisions=!1,this._collisionMask=-1,this._collisionGroup=-1,this._collider=null,this._oldPositionForCollisions=new o.e(0,0,0),this._diffPositionForCollisions=new o.e(0,0,0)}},Q86s:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("/SR9"),r=i("y4Ty"),n=function(){function t(){this._pickingUnavailable=!1,this.hit=!1,this.distance=0,this.pickedPoint=null,this.pickedMesh=null,this.bu=0,this.bv=0,this.faceId=-1,this.subMeshId=0,this.pickedSprite=null,this.originMesh=null,this.ray=null}return t.prototype.getNormal=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!0),!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(r.b.NormalKind))return null;var i,n=this.pickedMesh.getIndices();if(!n)return null;if(e){var a=this.pickedMesh.getVerticesData(r.b.NormalKind),s=o.e.FromArray(a,3*n[3*this.faceId]),c=o.e.FromArray(a,3*n[3*this.faceId+1]),h=o.e.FromArray(a,3*n[3*this.faceId+2]);s=s.scale(this.bu),c=c.scale(this.bv),h=h.scale(1-this.bu-this.bv),i=new o.e(s.x+c.x+h.x,s.y+c.y+h.y,s.z+c.z+h.z)}else{var u=this.pickedMesh.getVerticesData(r.b.PositionKind),p=o.e.FromArray(u,3*n[3*this.faceId]),l=o.e.FromArray(u,3*n[3*this.faceId+1]),d=o.e.FromArray(u,3*n[3*this.faceId+2]),m=p.subtract(l),f=d.subtract(l);i=o.e.Cross(m,f)}if(t){var y=this.pickedMesh.getWorldMatrix();this.pickedMesh.nonUniformScaling&&(o.c.Matrix[0].copyFrom(y),(y=o.c.Matrix[0]).setTranslationFromFloats(0,0,0),y.invert(),y.transposeToRef(o.c.Matrix[1]),y=o.c.Matrix[1]),i=o.e.TransformNormal(i,y)}return i.normalize(),i},t.prototype.getTextureCoordinates=function(){if(!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(r.b.UVKind))return null;var t=this.pickedMesh.getIndices();if(!t)return null;var e=this.pickedMesh.getVerticesData(r.b.UVKind);if(!e)return null;var i=o.d.FromArray(e,2*t[3*this.faceId]),n=o.d.FromArray(e,2*t[3*this.faceId+1]),a=o.d.FromArray(e,2*t[3*this.faceId+2]);return i=i.scale(this.bu),n=n.scale(this.bv),a=a.scale(1-this.bu-this.bv),new o.d(i.x+n.x+a.x,i.y+n.y+a.y)},t}()},T5H4:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var o=i("mHtN"),r=i("/SR9"),n=i("MhaC"),a=function(){function t(t,e,i){this.vectors=o.a.BuildArray(8,r.e.Zero),this.center=r.e.Zero(),this.centerWorld=r.e.Zero(),this.extendSize=r.e.Zero(),this.extendSizeWorld=r.e.Zero(),this.directions=o.a.BuildArray(3,r.e.Zero),this.vectorsWorld=o.a.BuildArray(8,r.e.Zero),this.minimumWorld=r.e.Zero(),this.maximumWorld=r.e.Zero(),this.minimum=r.e.Zero(),this.maximum=r.e.Zero(),this.reConstruct(t,e,i)}return t.prototype.reConstruct=function(t,e,i){var o=t.x,n=t.y,a=t.z,s=e.x,c=e.y,h=e.z,u=this.vectors;this.minimum.copyFromFloats(o,n,a),this.maximum.copyFromFloats(s,c,h),u[0].copyFromFloats(o,n,a),u[1].copyFromFloats(s,c,h),u[2].copyFromFloats(s,n,a),u[3].copyFromFloats(o,c,a),u[4].copyFromFloats(o,n,h),u[5].copyFromFloats(s,c,a),u[6].copyFromFloats(o,c,h),u[7].copyFromFloats(s,n,h),e.addToRef(t,this.center).scaleInPlace(.5),e.subtractToRef(t,this.extendSize).scaleInPlace(.5),this._worldMatrix=i||r.a.IdentityReadOnly,this._update(this._worldMatrix)},t.prototype.scale=function(e){var i=t.TmpVector3,o=this.maximum.subtractToRef(this.minimum,i[0]),r=o.length();o.normalizeFromLength(r);var n=r*e,a=o.scaleInPlace(.5*n),s=this.center.subtractToRef(a,i[1]),c=this.center.addToRef(a,i[2]);return this.reConstruct(s,c,this._worldMatrix),this},t.prototype.getWorldMatrix=function(){return this._worldMatrix},t.prototype._update=function(t){var e=this.minimumWorld,i=this.maximumWorld,o=this.directions,n=this.vectorsWorld,a=this.vectors;if(t.isIdentity()){e.copyFrom(this.minimum),i.copyFrom(this.maximum);for(s=0;s<8;++s)n[s].copyFrom(a[s]);this.extendSizeWorld.copyFrom(this.extendSize),this.centerWorld.copyFrom(this.center)}else{e.setAll(Number.MAX_VALUE),i.setAll(-Number.MAX_VALUE);for(var s=0;s<8;++s){var c=n[s];r.e.TransformCoordinatesToRef(a[s],t,c),e.minimizeInPlace(c),i.maximizeInPlace(c)}i.subtractToRef(e,this.extendSizeWorld).scaleInPlace(.5),i.addToRef(e,this.centerWorld).scaleInPlace(.5)}r.e.FromArrayToRef(t.m,0,o[0]),r.e.FromArrayToRef(t.m,4,o[1]),r.e.FromArrayToRef(t.m,8,o[2]),this._worldMatrix=t},t.prototype.isInFrustum=function(e){return t.IsInFrustum(this.vectorsWorld,e)},t.prototype.isCompletelyInFrustum=function(e){return t.IsCompletelyInFrustum(this.vectorsWorld,e)},t.prototype.intersectsPoint=function(t){var e=this.minimumWorld,i=this.maximumWorld,o=e.x,r=e.y,a=e.z,s=i.x,c=i.y,h=i.z,u=t.x,p=t.y,l=t.z,d=-n.a;return!(s-u<d||d>u-o)&&(!(c-p<d||d>p-r)&&!(h-l<d||d>l-a))},t.prototype.intersectsSphere=function(e){return t.IntersectsSphere(this.minimumWorld,this.maximumWorld,e.centerWorld,e.radiusWorld)},t.prototype.intersectsMinMax=function(t,e){var i=this.minimumWorld,o=this.maximumWorld,r=i.x,n=i.y,a=i.z,s=o.x,c=o.y,h=o.z,u=t.x,p=t.y,l=t.z,d=e.x,m=e.y,f=e.z;return!(s<u||r>d)&&(!(c<p||n>m)&&!(h<l||a>f))},t.Intersects=function(t,e){return t.intersectsMinMax(e.minimumWorld,e.maximumWorld)},t.IntersectsSphere=function(e,i,o,n){var a=t.TmpVector3[0];return r.e.ClampToRef(o,e,i,a),r.e.DistanceSquared(o,a)<=n*n},t.IsCompletelyInFrustum=function(t,e){for(var i=0;i<6;++i)for(var o=e[i],r=0;r<8;++r)if(o.dotCoordinate(t[r])<0)return!1;return!0},t.IsInFrustum=function(t,e){for(var i=0;i<6;++i){for(var o=!0,r=e[i],n=0;n<8;++n)if(r.dotCoordinate(t[n])>=0){o=!1;break}if(o)return!1}return!0},t.TmpVector3=o.a.BuildArray(3,r.e.Zero),t}(),s=function(){function t(t,e,i){this.center=r.e.Zero(),this.centerWorld=r.e.Zero(),this.minimum=r.e.Zero(),this.maximum=r.e.Zero(),this.reConstruct(t,e,i)}return t.prototype.reConstruct=function(t,e,i){this.minimum.copyFrom(t),this.maximum.copyFrom(e);var o=r.e.Distance(t,e);e.addToRef(t,this.center).scaleInPlace(.5),this.radius=.5*o,this._update(i||r.a.IdentityReadOnly)},t.prototype.scale=function(e){var i=this.radius*e,o=t.TmpVector3,r=o[0].setAll(i),n=this.center.subtractToRef(r,o[1]),a=this.center.addToRef(r,o[2]);return this.reConstruct(n,a,this._worldMatrix),this},t.prototype.getWorldMatrix=function(){return this._worldMatrix},t.prototype._update=function(e){if(e.isIdentity())this.centerWorld.copyFrom(this.center),this.radiusWorld=this.radius;else{r.e.TransformCoordinatesToRef(this.center,e,this.centerWorld);var i=t.TmpVector3[0];r.e.TransformNormalFromFloatsToRef(1,1,1,e,i),this.radiusWorld=Math.max(Math.abs(i.x),Math.abs(i.y),Math.abs(i.z))*this.radius}},t.prototype.isInFrustum=function(t){for(var e=this.centerWorld,i=this.radiusWorld,o=0;o<6;o++)if(t[o].dotCoordinate(e)<=-i)return!1;return!0},t.prototype.isCenterInFrustum=function(t){for(var e=this.centerWorld,i=0;i<6;i++)if(t[i].dotCoordinate(e)<0)return!1;return!0},t.prototype.intersectsPoint=function(t){var e=r.e.DistanceSquared(this.centerWorld,t);return!(this.radiusWorld*this.radiusWorld<e)},t.Intersects=function(t,e){var i=r.e.DistanceSquared(t.centerWorld,e.centerWorld),o=t.radiusWorld+e.radiusWorld;return!(o*o<i)},t.TmpVector3=o.a.BuildArray(3,r.e.Zero),t}(),c={min:0,max:0},h={min:0,max:0},u=function(t,e,i){var o=r.e.Dot(e.centerWorld,t),n=Math.abs(r.e.Dot(e.directions[0],t))*e.extendSize.x+Math.abs(r.e.Dot(e.directions[1],t))*e.extendSize.y+Math.abs(r.e.Dot(e.directions[2],t))*e.extendSize.z;i.min=o-n,i.max=o+n},p=function(t,e,i){return u(t,e,c),u(t,i,h),!(c.min>h.max||h.min>c.max)},l=function(){function t(t,e,i){this._isLocked=!1,this.boundingBox=new a(t,e,i),this.boundingSphere=new s(t,e,i)}return t.prototype.reConstruct=function(t,e,i){this.boundingBox.reConstruct(t,e,i),this.boundingSphere.reConstruct(t,e,i)},Object.defineProperty(t.prototype,"minimum",{get:function(){return this.boundingBox.minimum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximum",{get:function(){return this.boundingBox.maximum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isLocked},set:function(t){this._isLocked=t},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this._isLocked||(this.boundingBox._update(t),this.boundingSphere._update(t))},t.prototype.centerOn=function(e,i){var o=t.TmpVector3[0].copyFrom(e).subtractInPlace(i),r=t.TmpVector3[1].copyFrom(e).addInPlace(i);return this.boundingBox.reConstruct(o,r,this.boundingBox.getWorldMatrix()),this.boundingSphere.reConstruct(o,r,this.boundingBox.getWorldMatrix()),this},t.prototype.scale=function(t){return this.boundingBox.scale(t),this.boundingSphere.scale(t),this},t.prototype.isInFrustum=function(t,e){return void 0===e&&(e=0),!(2!==e&&3!==e||!this.boundingSphere.isCenterInFrustum(t))||!!this.boundingSphere.isInFrustum(t)&&(!(1!==e&&3!==e)||this.boundingBox.isInFrustum(t))},Object.defineProperty(t.prototype,"diagonalLength",{get:function(){var e=this.boundingBox;return e.maximumWorld.subtractToRef(e.minimumWorld,t.TmpVector3[0]).length()},enumerable:!0,configurable:!0}),t.prototype.isCompletelyInFrustum=function(t){return this.boundingBox.isCompletelyInFrustum(t)},t.prototype._checkCollision=function(t){return t._canDoCollision(this.boundingSphere.centerWorld,this.boundingSphere.radiusWorld,this.boundingBox.minimumWorld,this.boundingBox.maximumWorld)},t.prototype.intersectsPoint=function(t){return!!this.boundingSphere.centerWorld&&(!!this.boundingSphere.intersectsPoint(t)&&!!this.boundingBox.intersectsPoint(t))},t.prototype.intersects=function(t,e){if(!s.Intersects(this.boundingSphere,t.boundingSphere))return!1;if(!a.Intersects(this.boundingBox,t.boundingBox))return!1;if(!e)return!0;var i=this.boundingBox,o=t.boundingBox;return!!p(i.directions[0],i,o)&&(!!p(i.directions[1],i,o)&&(!!p(i.directions[2],i,o)&&(!!p(o.directions[0],i,o)&&(!!p(o.directions[1],i,o)&&(!!p(o.directions[2],i,o)&&(!!p(r.e.Cross(i.directions[0],o.directions[0]),i,o)&&(!!p(r.e.Cross(i.directions[0],o.directions[1]),i,o)&&(!!p(r.e.Cross(i.directions[0],o.directions[2]),i,o)&&(!!p(r.e.Cross(i.directions[1],o.directions[0]),i,o)&&(!!p(r.e.Cross(i.directions[1],o.directions[1]),i,o)&&(!!p(r.e.Cross(i.directions[1],o.directions[2]),i,o)&&(!!p(r.e.Cross(i.directions[2],o.directions[0]),i,o)&&(!!p(r.e.Cross(i.directions[2],o.directions[1]),i,o)&&!!p(r.e.Cross(i.directions[2],o.directions[2]),i,o))))))))))))))},t.TmpVector3=o.a.BuildArray(2,r.e.Zero),t}()},fZF6:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var o=function(){function t(){this.hoverCursor="",this.actions=new Array,this.isRecursive=!1}return Object.defineProperty(t,"HasTriggers",{get:function(){for(var e in t.Triggers)if(t.Triggers.hasOwnProperty(e))return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HasPickTriggers",{get:function(){for(var e in t.Triggers)if(t.Triggers.hasOwnProperty(e)){var i=parseInt(e);if(i>=1&&i<=7)return!0}return!1},enumerable:!0,configurable:!0}),t.HasSpecificTrigger=function(e){for(var i in t.Triggers){if(t.Triggers.hasOwnProperty(i))if(parseInt(i)===e)return!0}return!1},t.Triggers={},t}()},g739:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var o=i("mrSG"),r=i("xCqU"),n=i("ADVu"),a=i("jSHE"),s=i("/SR9"),c=function(){function t(){this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this._keys=new Array}return t.prototype.attachControl=function(t,e){var i=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add((function(){i._keys=[]})),this._onKeyboardObserver=this._scene.onKeyboardObservable.add((function(t){var o,r=t.event;r.metaKey||(t.type===a.a.KEYDOWN?-1===i.keysUp.indexOf(r.keyCode)&&-1===i.keysDown.indexOf(r.keyCode)&&-1===i.keysLeft.indexOf(r.keyCode)&&-1===i.keysRight.indexOf(r.keyCode)||(-1===(o=i._keys.indexOf(r.keyCode))&&i._keys.push(r.keyCode),e||r.preventDefault()):-1===i.keysUp.indexOf(r.keyCode)&&-1===i.keysDown.indexOf(r.keyCode)&&-1===i.keysLeft.indexOf(r.keyCode)&&-1===i.keysRight.indexOf(r.keyCode)||((o=i._keys.indexOf(r.keyCode))>=0&&i._keys.splice(o,1),e||r.preventDefault()))})))},t.prototype.detachControl=function(t){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},t.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var t=this.camera,e=0;e<this._keys.length;e++){var i=this._keys[e],o=t._computeLocalCameraSpeed();-1!==this.keysLeft.indexOf(i)?t._localDirection.copyFromFloats(-o,0,0):-1!==this.keysUp.indexOf(i)?t._localDirection.copyFromFloats(0,0,o):-1!==this.keysRight.indexOf(i)?t._localDirection.copyFromFloats(o,0,0):-1!==this.keysDown.indexOf(i)&&t._localDirection.copyFromFloats(0,0,-o),t.getScene().useRightHandedSystem&&(t._localDirection.z*=-1),t.getViewMatrix().invertToRef(t._cameraTransformMatrix),s.e.TransformNormalToRef(t._localDirection,t._cameraTransformMatrix,t._transformedDirection),t.cameraDirection.addInPlace(t._transformedDirection)}},t.prototype.getClassName=function(){return"FreeCameraKeyboardMoveInput"},t.prototype._onLostFocus=function(){this._keys=[]},t.prototype.getSimpleName=function(){return"keyboard"},Object(o.b)([Object(n.c)()],t.prototype,"keysUp",void 0),Object(o.b)([Object(n.c)()],t.prototype,"keysDown",void 0),Object(o.b)([Object(n.c)()],t.prototype,"keysLeft",void 0),Object(o.b)([Object(n.c)()],t.prototype,"keysRight",void 0),t}();r.a.FreeCameraKeyboardMoveInput=c;var h=i("ps+7"),u=i("98Qd"),p=function(){function t(t){void 0===t&&(t=!0),this.touchEnabled=t,this.buttons=[0,1,2],this.angularSensibility=2e3,this.previousPosition=null,this.onPointerMovedObservable=new h.a,this._allowCameraRotation=!0}return t.prototype.attachControl=function(t,e){var i=this,o=this.camera.getEngine();this._pointerInput||(this._pointerInput=function(r){var n=r.event;if(!o.isInVRExclusivePointerMode&&(i.touchEnabled||"touch"!==n.pointerType)&&(r.type===u.a.POINTERMOVE||-1!==i.buttons.indexOf(n.button))){var a=n.srcElement||n.target;if(r.type===u.a.POINTERDOWN&&a){try{a.setPointerCapture(n.pointerId)}catch(t){}i.previousPosition={x:n.clientX,y:n.clientY},e||(n.preventDefault(),t.focus())}else if(r.type===u.a.POINTERUP&&a){try{a.releasePointerCapture(n.pointerId)}catch(t){}i.previousPosition=null,e||n.preventDefault()}else if(r.type===u.a.POINTERMOVE){if(!i.previousPosition||o.isPointerLock)return;var s=n.clientX-i.previousPosition.x,c=n.clientY-i.previousPosition.y;i.camera.getScene().useRightHandedSystem&&(s*=-1),i.camera.parent&&i.camera.parent._getWorldMatrixDeterminant()<0&&(s*=-1),i._allowCameraRotation&&(i.camera.cameraRotation.y+=s/i.angularSensibility,i.camera.cameraRotation.x+=c/i.angularSensibility),i.onPointerMovedObservable.notifyObservers({offsetX:s,offsetY:c}),i.previousPosition={x:n.clientX,y:n.clientY},e||n.preventDefault()}}}),this._onMouseMove=function(t){if(o.isPointerLock&&!o.isInVRExclusivePointerMode){var r=t.movementX||t.mozMovementX||t.webkitMovementX||t.msMovementX||0;i.camera.getScene().useRightHandedSystem&&(r*=-1),i.camera.parent&&i.camera.parent._getWorldMatrixDeterminant()<0&&(r*=-1),i.camera.cameraRotation.y+=r/i.angularSensibility;var n=t.movementY||t.mozMovementY||t.webkitMovementY||t.msMovementY||0;i.camera.cameraRotation.x+=n/i.angularSensibility,i.previousPosition=null,e||t.preventDefault()}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,u.a.POINTERDOWN|u.a.POINTERUP|u.a.POINTERMOVE),t.addEventListener("mousemove",this._onMouseMove,!1),t.addEventListener("contextmenu",this.onContextMenu.bind(this),!1)},t.prototype.onContextMenu=function(t){t.preventDefault()},t.prototype.detachControl=function(t){this._observer&&t&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._onMouseMove&&t.removeEventListener("mousemove",this._onMouseMove),this.onContextMenu&&t.removeEventListener("contextmenu",this.onContextMenu),this.onPointerMovedObservable&&this.onPointerMovedObservable.clear(),this._observer=null,this._onMouseMove=null,this.previousPosition=null)},t.prototype.getClassName=function(){return"FreeCameraMouseInput"},t.prototype.getSimpleName=function(){return"mouse"},Object(o.b)([Object(n.c)()],t.prototype,"buttons",void 0),Object(o.b)([Object(n.c)()],t.prototype,"angularSensibility",void 0),t}();r.a.FreeCameraMouseInput=p;var l=function(){function t(){this.touchAngularSensibility=2e5,this.touchMoveSensibility=250,this._offsetX=null,this._offsetY=null,this._pointerPressed=new Array}return t.prototype.attachControl=function(t,e){var i=this,o=null;void 0===this._pointerInput&&(this._onLostFocus=function(){i._offsetX=null,i._offsetY=null},this._pointerInput=function(t){var r=t.event;if("mouse"!==r.pointerType)if(t.type===u.a.POINTERDOWN){if(e||r.preventDefault(),i._pointerPressed.push(r.pointerId),1!==i._pointerPressed.length)return;o={x:r.clientX,y:r.clientY}}else if(t.type===u.a.POINTERUP){if(e||r.preventDefault(),-1===(n=i._pointerPressed.indexOf(r.pointerId)))return;if(i._pointerPressed.splice(n,1),0!=n)return;o=null,i._offsetX=null,i._offsetY=null}else if(t.type===u.a.POINTERMOVE){if(e||r.preventDefault(),!o)return;var n;if(0!=(n=i._pointerPressed.indexOf(r.pointerId)))return;i._offsetX=r.clientX-o.x,i._offsetY=-(r.clientY-o.y)}}),this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,u.a.POINTERDOWN|u.a.POINTERUP|u.a.POINTERMOVE),this._onLostFocus&&t.addEventListener("blur",this._onLostFocus)},t.prototype.detachControl=function(t){this._pointerInput&&t&&(this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null),this._onLostFocus&&(t.removeEventListener("blur",this._onLostFocus),this._onLostFocus=null),this._pointerPressed=[],this._offsetX=null,this._offsetY=null)},t.prototype.checkInputs=function(){if(this._offsetX&&this._offsetY){var t=this.camera;if(t.cameraRotation.y+=this._offsetX/this.touchAngularSensibility,this._pointerPressed.length>1)t.cameraRotation.x+=-this._offsetY/this.touchAngularSensibility;else{var e=t._computeLocalCameraSpeed(),i=new s.e(0,0,e*this._offsetY/this.touchMoveSensibility);s.a.RotationYawPitchRollToRef(t.rotation.y,t.rotation.x,0,t._cameraRotationMatrix),t.cameraDirection.addInPlace(s.e.TransformCoordinates(i,t._cameraRotationMatrix))}}},t.prototype.getClassName=function(){return"FreeCameraTouchInput"},t.prototype.getSimpleName=function(){return"touch"},Object(o.b)([Object(n.c)()],t.prototype,"touchAngularSensibility",void 0),Object(o.b)([Object(n.c)()],t.prototype,"touchMoveSensibility",void 0),t}();r.a.FreeCameraTouchInput=l;var d=function(t){function e(e){var i=t.call(this,e)||this;return i._mouseInput=null,i}return Object(o.c)(e,t),e.prototype.addKeyboard=function(){return this.add(new c),this},e.prototype.addMouse=function(t){return void 0===t&&(t=!0),this._mouseInput||(this._mouseInput=new p(t),this.add(this._mouseInput)),this},e.prototype.removeMouse=function(){return this._mouseInput&&this.remove(this._mouseInput),this},e.prototype.addTouch=function(){return this.add(new l),this},e.prototype.clear=function(){t.prototype.clear.call(this),this._mouseInput=null},e}(r.b)},gJ7H:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var o=i("mrSG"),r=i("ADVu"),n=i("xCqU"),a=i("M9Dn"),s=function(){function t(){this.gamepadRotationSensibility=80,this.gamepadMoveSensibility=40,this._yAxisScale=1}return Object.defineProperty(t.prototype,"invertYAxis",{get:function(){return 1!==this._yAxisScale},set:function(t){this._yAxisScale=t?-1:1},enumerable:!0,configurable:!0}),t.prototype.attachControl=function(t,e){var i=this,o=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=o.onGamepadConnectedObservable.add((function(t){t.type!==a.a.POSE_ENABLED&&(i.gamepad&&t.type!==a.a.XBOX||(i.gamepad=t))})),this._onGamepadDisconnectedObserver=o.onGamepadDisconnectedObservable.add((function(t){i.gamepad===t&&(i.gamepad=null)})),this.gamepad=o.getGamepadByType(a.a.XBOX)},t.prototype.detachControl=function(t){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},t.prototype.checkInputs=function(){if(this.gamepad){var t=this.camera,e=this.gamepad.rightStick;if(e){if(0!=e.x){var i=e.x/this.gamepadRotationSensibility;0!=i&&Math.abs(i)>.005&&(t.inertialAlphaOffset+=i)}if(0!=e.y){var o=e.y/this.gamepadRotationSensibility*this._yAxisScale;0!=o&&Math.abs(o)>.005&&(t.inertialBetaOffset+=o)}}var r=this.gamepad.leftStick;if(r&&0!=r.y){var n=r.y/this.gamepadMoveSensibility;0!=n&&Math.abs(n)>.005&&(this.camera.inertialRadiusOffset-=n)}}},t.prototype.getClassName=function(){return"ArcRotateCameraGamepadInput"},t.prototype.getSimpleName=function(){return"gamepad"},Object(o.b)([Object(r.c)()],t.prototype,"gamepadRotationSensibility",void 0),Object(o.b)([Object(r.c)()],t.prototype,"gamepadMoveSensibility",void 0),t}();n.a.ArcRotateCameraGamepadInput=s},wN8c:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var o=i("mrSG"),r=i("ADVu"),n=i("/SR9"),a=i("qUIE"),s=i("CAkI"),c=i("MhaC"),h=i("SYzJ"),u=function(t){function e(e,i,o,r){void 0===r&&(r=!0);var a=t.call(this,e,i,o,r)||this;return a.cameraDirection=new n.e(0,0,0),a.cameraRotation=new n.d(0,0),a.updateUpVectorFromRotation=!1,a._tmpQuaternion=new n.b,a.rotation=new n.e(0,0,0),a.speed=2,a.noRotationConstraint=!1,a.lockedTarget=null,a._currentTarget=n.e.Zero(),a._initialFocalDistance=1,a._viewMatrix=n.a.Zero(),a._camMatrix=n.a.Zero(),a._cameraTransformMatrix=n.a.Zero(),a._cameraRotationMatrix=n.a.Zero(),a._referencePoint=new n.e(0,0,1),a._transformedReferencePoint=n.e.Zero(),a._globalCurrentTarget=n.e.Zero(),a._globalCurrentUpVector=n.e.Zero(),a._defaultUp=n.e.Up(),a._cachedRotationZ=0,a._cachedQuaternionRotationZ=0,a}return Object(o.c)(e,t),e.prototype.getFrontPosition=function(t){this.getWorldMatrix();var e=this.getTarget().subtract(this.position);return e.normalize(),e.scaleInPlace(t),this.globalPosition.add(e)},e.prototype._getLockedTargetPosition=function(){return this.lockedTarget?(this.lockedTarget.absolutePosition&&this.lockedTarget.computeWorldMatrix(),this.lockedTarget.absolutePosition||this.lockedTarget):null},e.prototype.storeState=function(){return this._storedPosition=this.position.clone(),this._storedRotation=this.rotation.clone(),this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone()),t.prototype.storeState.call(this)},e.prototype._restoreStateValues=function(){return!!t.prototype._restoreStateValues.call(this)&&(this.position=this._storedPosition.clone(),this.rotation=this._storedRotation.clone(),this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone()),this.cameraDirection.copyFromFloats(0,0,0),this.cameraRotation.copyFromFloats(0,0),!0)},e.prototype._initCache=function(){t.prototype._initCache.call(this),this._cache.lockedTarget=new n.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotation=new n.e(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotationQuaternion=new n.b(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},e.prototype._updateCache=function(e){e||t.prototype._updateCache.call(this);var i=this._getLockedTargetPosition();i?this._cache.lockedTarget?this._cache.lockedTarget.copyFrom(i):this._cache.lockedTarget=i.clone():this._cache.lockedTarget=null,this._cache.rotation.copyFrom(this.rotation),this.rotationQuaternion&&this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)},e.prototype._isSynchronizedViewMatrix=function(){if(!t.prototype._isSynchronizedViewMatrix.call(this))return!1;var e=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(e):!e)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))},e.prototype._computeLocalCameraSpeed=function(){var t=this.getEngine();return this.speed*Math.sqrt(t.getDeltaTime()/(100*t.getFps()))},e.prototype.setTarget=function(t){this.upVector.normalize(),this._initialFocalDistance=t.subtract(this.position).length(),this.position.z===t.z&&(this.position.z+=c.a),n.a.LookAtLHToRef(this.position,t,this._defaultUp,this._camMatrix),this._camMatrix.invert(),this.rotation.x=Math.atan(this._camMatrix.m[6]/this._camMatrix.m[10]);var e=t.subtract(this.position);e.x>=0?this.rotation.y=-Math.atan(e.z/e.x)+Math.PI/2:this.rotation.y=-Math.atan(e.z/e.x)-Math.PI/2,this.rotation.z=0,isNaN(this.rotation.x)&&(this.rotation.x=0),isNaN(this.rotation.y)&&(this.rotation.y=0),isNaN(this.rotation.z)&&(this.rotation.z=0),this.rotationQuaternion&&n.b.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)},e.prototype.getTarget=function(){return this._currentTarget},e.prototype._decideIfNeedsToMove=function(){return Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},e.prototype._updatePosition=function(){if(this.parent)return this.parent.getWorldMatrix().invertToRef(n.c.Matrix[0]),n.e.TransformNormalToRef(this.cameraDirection,n.c.Matrix[0],n.c.Vector3[0]),void this.position.addInPlace(n.c.Vector3[0]);this.position.addInPlace(this.cameraDirection)},e.prototype._checkInputs=function(){var e=this._decideIfNeedsToMove(),i=Math.abs(this.cameraRotation.x)>0||Math.abs(this.cameraRotation.y)>0;if(e&&this._updatePosition(),i){if(this.rotation.x+=this.cameraRotation.x,this.rotation.y+=this.cameraRotation.y,this.rotationQuaternion)this.rotation.lengthSquared()&&n.b.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion);if(!this.noRotationConstraint){this.rotation.x>1.570796&&(this.rotation.x=1.570796),this.rotation.x<-1.570796&&(this.rotation.x=-1.570796)}}e&&(Math.abs(this.cameraDirection.x)<this.speed*c.a&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*c.a&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*c.a&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia)),i&&(Math.abs(this.cameraRotation.x)<this.speed*c.a&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*c.a&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia)),t.prototype._checkInputs.call(this)},e.prototype._updateCameraRotationMatrix=function(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):n.a.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix)},e.prototype._rotateUpVectorWithCameraRotationMatrix=function(){return n.e.TransformNormalToRef(this._defaultUp,this._cameraRotationMatrix,this.upVector),this},e.prototype._getViewMatrix=function(){return this.lockedTarget&&this.setTarget(this._getLockedTargetPosition()),this._updateCameraRotationMatrix(),this.rotationQuaternion&&this._cachedQuaternionRotationZ!=this.rotationQuaternion.z?(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedQuaternionRotationZ=this.rotationQuaternion.z):this._cachedRotationZ!=this.rotation.z&&(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedRotationZ=this.rotation.z),n.e.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),this.updateUpVectorFromRotation&&(this.rotationQuaternion?h.a.Y.rotateByQuaternionToRef(this.rotationQuaternion,this.upVector):(n.b.FromEulerVectorToRef(this.rotation,this._tmpQuaternion),h.a.Y.rotateByQuaternionToRef(this._tmpQuaternion,this.upVector))),this._computeViewMatrix(this.position,this._currentTarget,this.upVector),this._viewMatrix},e.prototype._computeViewMatrix=function(t,e,i){if(this.parent){var o=this.parent.getWorldMatrix();n.e.TransformCoordinatesToRef(t,o,this._globalPosition),n.e.TransformCoordinatesToRef(e,o,this._globalCurrentTarget),n.e.TransformNormalToRef(i,o,this._globalCurrentUpVector),this._markSyncedWithParent()}else this._globalPosition.copyFrom(t),this._globalCurrentTarget.copyFrom(e),this._globalCurrentUpVector.copyFrom(i);this.getScene().useRightHandedSystem?n.a.LookAtRHToRef(this._globalPosition,this._globalCurrentTarget,this._globalCurrentUpVector,this._viewMatrix):n.a.LookAtLHToRef(this._globalPosition,this._globalCurrentTarget,this._globalCurrentUpVector,this._viewMatrix)},e.prototype.createRigCamera=function(t,i){if(this.cameraRigMode!==s.a.RIG_MODE_NONE){var o=new e(t,this.position.clone(),this.getScene());return o.isRigCamera=!0,o.rigParent=this,this.cameraRigMode!==s.a.RIG_MODE_VR&&this.cameraRigMode!==s.a.RIG_MODE_WEBVR||(this.rotationQuaternion||(this.rotationQuaternion=new n.b),o._cameraRigParams={},o.rotationQuaternion=new n.b),o}return null},e.prototype._updateRigCameras=function(){var e=this._rigCameras[0],i=this._rigCameras[1];switch(this.computeWorldMatrix(),this.cameraRigMode){case s.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case s.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case s.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case s.a.RIG_MODE_STEREOSCOPIC_OVERUNDER:case s.a.RIG_MODE_STEREOSCOPIC_INTERLACED:var o=this.cameraRigMode===s.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1,r=this.cameraRigMode===s.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*o,e),this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*r,i);break;case s.a.RIG_MODE_VR:e.rotationQuaternion?(e.rotationQuaternion.copyFrom(this.rotationQuaternion),i.rotationQuaternion.copyFrom(this.rotationQuaternion)):(e.rotation.copyFrom(this.rotation),i.rotation.copyFrom(this.rotation)),e.position.copyFrom(this.position),i.position.copyFrom(this.position)}t.prototype._updateRigCameras.call(this)},e.prototype._getRigCamPositionAndTarget=function(t,i){this.getTarget().subtractToRef(this.position,e._TargetFocalPoint),e._TargetFocalPoint.normalize().scaleInPlace(this._initialFocalDistance);var o=e._TargetFocalPoint.addInPlace(this.position);n.a.TranslationToRef(-o.x,-o.y,-o.z,e._TargetTransformMatrix),e._TargetTransformMatrix.multiplyToRef(n.a.RotationY(t),e._RigCamTransformMatrix),n.a.TranslationToRef(o.x,o.y,o.z,e._TargetTransformMatrix),e._RigCamTransformMatrix.multiplyToRef(e._TargetTransformMatrix,e._RigCamTransformMatrix),n.e.TransformCoordinatesToRef(this.position,e._RigCamTransformMatrix,i.position),i.setTarget(o)},e.prototype.getClassName=function(){return"TargetCamera"},e._RigCamTransformMatrix=new n.a,e._TargetTransformMatrix=new n.a,e._TargetFocalPoint=new n.e,Object(o.b)([Object(r.l)()],e.prototype,"rotation",void 0),Object(o.b)([Object(r.c)()],e.prototype,"speed",void 0),Object(o.b)([Object(r.i)("lockedTargetId")],e.prototype,"lockedTarget",void 0),e}(s.a),p=i("g739"),l=function(t){function e(e,i,o,r){void 0===r&&(r=!0);var s=t.call(this,e,i,o,r)||this;return s.ellipsoid=new n.e(.5,1,.5),s.ellipsoidOffset=new n.e(0,0,0),s.checkCollisions=!1,s.applyGravity=!1,s._needMoveForGravity=!1,s._oldPosition=n.e.Zero(),s._diffPosition=n.e.Zero(),s._newPosition=n.e.Zero(),s._collisionMask=-1,s._onCollisionPositionChange=function(t,e,i){void 0===i&&(i=null);var o;o=e,s._newPosition.copyFrom(o),s._newPosition.subtractToRef(s._oldPosition,s._diffPosition),s._diffPosition.length()>a.a.CollisionsEpsilon&&(s.position.addInPlace(s._diffPosition),s.onCollide&&i&&s.onCollide(i))},s.inputs=new p.a(s),s.inputs.addKeyboard().addMouse(),s}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"angularSensibility",{get:function(){var t=this.inputs.attached.mouse;return t?t.angularSensibility:0},set:function(t){var e=this.inputs.attached.mouse;e&&(e.angularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keysUp",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysUp:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysUp=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keysDown",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysDown:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysDown=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keysLeft",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysLeft:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysLeft=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keysRight",{get:function(){var t=this.inputs.attached.keyboard;return t?t.keysRight:[]},set:function(t){var e=this.inputs.attached.keyboard;e&&(e.keysRight=t)},enumerable:!0,configurable:!0}),e.prototype.attachControl=function(t,e){this.inputs.attachElement(t,e)},e.prototype.detachControl=function(t){this.inputs.detachElement(t),this.cameraDirection=new n.e(0,0,0),this.cameraRotation=new n.d(0,0)},Object.defineProperty(e.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(t){this._collisionMask=isNaN(t)?-1:t},enumerable:!0,configurable:!0}),e.prototype._collideWithWorld=function(t){(this.parent?n.e.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);var e=this.getScene().collisionCoordinator;this._collider||(this._collider=e.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;var i=t;this.applyGravity&&(i=t.add(this.getScene().gravity)),e.getNewPosition(this._oldPosition,i,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)},e.prototype._checkInputs=function(){this._localDirection||(this._localDirection=n.e.Zero(),this._transformedDirection=n.e.Zero()),this.inputs.checkInputs(),t.prototype._checkInputs.call(this)},e.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},e.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):t.prototype._updatePosition.call(this)},e.prototype.dispose=function(){this.inputs.clear(),t.prototype.dispose.call(this)},e.prototype.getClassName=function(){return"FreeCamera"},Object(o.b)([Object(r.l)()],e.prototype,"ellipsoid",void 0),Object(o.b)([Object(r.l)()],e.prototype,"ellipsoidOffset",void 0),Object(o.b)([Object(r.c)()],e.prototype,"checkCollisions",void 0),Object(o.b)([Object(r.c)()],e.prototype,"applyGravity",void 0),e}(u),d=i("Ufda");d.a.AddNodeConstructor("TouchCamera",(function(t,e){return function(){return new m(t,n.e.Zero(),e)}}));var m=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r.inputs.addTouch(),r._setupInputs(),r}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"touchAngularSensibility",{get:function(){var t=this.inputs.attached.touch;return t?t.touchAngularSensibility:0},set:function(t){var e=this.inputs.attached.touch;e&&(e.touchAngularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchMoveSensibility",{get:function(){var t=this.inputs.attached.touch;return t?t.touchMoveSensibility:0},set:function(t){var e=this.inputs.attached.touch;e&&(e.touchMoveSensibility=t)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"TouchCamera"},e.prototype._setupInputs=function(){var t=this.inputs.attached.mouse;t&&(t.touchEnabled=!1)},e}(l);i("K1vB");d.a.AddNodeConstructor("FreeCamera",(function(t,e){return function(){return new f(t,n.e.Zero(),e)}}));var f=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r.inputs.addGamepad(),r}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"gamepadAngularSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadAngularSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadAngularSensibility=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamepadMoveSensibility",{get:function(){var t=this.inputs.attached.gamepad;return t?t.gamepadMoveSensibility:0},set:function(t){var e=this.inputs.attached.gamepad;e&&(e.gamepadMoveSensibility=t)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"UniversalCamera"},e}(m);s.a._createDefaultParsedCamera=function(t,e){return new f(t,n.e.Zero(),e)}},xCqU:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var o=i("uyO6"),r=i("ADVu"),n=i("CAkI"),a={},s=function(){function t(t){this.attached={},this.camera=t,this.checkInputs=function(){}}return t.prototype.add=function(t){var e=t.getSimpleName();this.attached[e]?o.a.Warn("camera input of type "+e+" already exists on camera"):(this.attached[e]=t,t.camera=this.camera,t.checkInputs&&(this.checkInputs=this._addCheckInputs(t.checkInputs.bind(t))),this.attachedElement&&t.attachControl(this.attachedElement))},t.prototype.remove=function(t){for(var e in this.attached){var i=this.attached[e];i===t&&(i.detachControl(this.attachedElement),i.camera=null,delete this.attached[e],this.rebuildInputCheck())}},t.prototype.removeByType=function(t){for(var e in this.attached){var i=this.attached[e];i.getClassName()===t&&(i.detachControl(this.attachedElement),i.camera=null,delete this.attached[e],this.rebuildInputCheck())}},t.prototype._addCheckInputs=function(t){var e=this.checkInputs;return function(){e(),t()}},t.prototype.attachInput=function(t){this.attachedElement&&t.attachControl(this.attachedElement,this.noPreventDefault)},t.prototype.attachElement=function(t,e){if(void 0===e&&(e=!1),!this.attachedElement)for(var i in e=!n.a.ForceAttachControlToAlwaysPreventDefault&&e,this.attachedElement=t,this.noPreventDefault=e,this.attached)this.attached[i].attachControl(t,e)},t.prototype.detachElement=function(t,e){if(void 0===e&&(e=!1),this.attachedElement===t){for(var i in this.attached)this.attached[i].detachControl(t),e&&(this.attached[i].camera=null);this.attachedElement=null}},t.prototype.rebuildInputCheck=function(){for(var t in this.checkInputs=function(){},this.attached){var e=this.attached[t];e.checkInputs&&(this.checkInputs=this._addCheckInputs(e.checkInputs.bind(e)))}},t.prototype.clear=function(){this.attachedElement&&this.detachElement(this.attachedElement,!0),this.attached={},this.attachedElement=null,this.checkInputs=function(){}},t.prototype.serialize=function(t){var e={};for(var i in this.attached){var o=this.attached[i],n=r.a.Serialize(o);e[o.getClassName()]=n}t.inputsmgr=e},t.prototype.parse=function(t){var e=t.inputsmgr;if(e)for(var i in this.clear(),e){if(s=a[i]){var o=e[i],n=r.a.Parse((function(){return new s}),o,null);this.add(n)}}else for(var i in this.attached){var s;if(s=a[this.attached[i].getClassName()]){n=r.a.Parse((function(){return new s}),t,null);this.remove(this.attached[i]),this.add(n)}}},t}()}}]);