(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{M8EM:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var r=i("mrSG"),n=i("ADVu"),s=i("/SR9"),o=i("y4Ty"),a=i("aCSs"),h=i("srWW"),c=i("cdI9"),u=i("AGTA"),l=i("YKqZ"),d=i("ps+7"),p=i("Xeau"),f=i("qUIE"),_=i("e2Mr"),g=i("/eyM"),P=(i("W+To"),i("1Fe0"),i("n5HA")),v=i("UpSL"),b=function(){function e(t,i){this._vertexBuffers={},this._maxSize=0,this._mainTextureDesiredSize={width:0,height:0},this._shouldRender=!0,this._postProcesses=[],this._textures=[],this._emissiveTextureAndColor={texture:null,color:new p.b},this.neutralColor=new p.b,this.isEnabled=!0,this.onDisposeObservable=new d.a,this.onBeforeRenderMainTextureObservable=new d.a,this.onBeforeComposeObservable=new d.a,this.onBeforeRenderMeshToEffect=new d.a,this.onAfterRenderMeshToEffect=new d.a,this.onAfterComposeObservable=new d.a,this.onSizeChangedObservable=new d.a,this.name=t,this._scene=i||_.a.LastCreatedScene,e._SceneComponentInitialization(this._scene),this._engine=this._scene.getEngine(),this._maxSize=this._engine.getCaps().maxTextureSize,this._scene.effectLayers.push(this),this._generateIndexBuffer(),this._generateVertexBuffer()}return Object.defineProperty(e.prototype,"camera",{get:function(){return this._effectLayerOptions.camera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderingGroupId",{get:function(){return this._effectLayerOptions.renderingGroupId},set:function(e){this._effectLayerOptions.renderingGroupId=e},enumerable:!0,configurable:!0}),e.prototype._init=function(e){this._effectLayerOptions=Object(r.a)({mainTextureRatio:.5,alphaBlendingMode:2,camera:null,renderingGroupId:-1},e),this._setMainTextureSize(),this._createMainTexture(),this._createTextureAndPostProcesses(),this._mergeEffect=this._createMergeEffect()},e.prototype._generateIndexBuffer=function(){var e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=this._engine.createIndexBuffer(e)},e.prototype._generateVertexBuffer=function(){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1);var t=new o.b(this._engine,e,o.b.PositionKind,!1,!1,2);this._vertexBuffers[o.b.PositionKind]=t},e.prototype._setMainTextureSize=function(){this._effectLayerOptions.mainTextureFixedSize?(this._mainTextureDesiredSize.width=this._effectLayerOptions.mainTextureFixedSize,this._mainTextureDesiredSize.height=this._effectLayerOptions.mainTextureFixedSize):(this._mainTextureDesiredSize.width=this._engine.getRenderWidth()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.height=this._engine.getRenderHeight()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.width=this._engine.needPOTTextures?f.a.GetExponentOfTwo(this._mainTextureDesiredSize.width,this._maxSize):this._mainTextureDesiredSize.width,this._mainTextureDesiredSize.height=this._engine.needPOTTextures?f.a.GetExponentOfTwo(this._mainTextureDesiredSize.height,this._maxSize):this._mainTextureDesiredSize.height),this._mainTextureDesiredSize.width=Math.floor(this._mainTextureDesiredSize.width),this._mainTextureDesiredSize.height=Math.floor(this._mainTextureDesiredSize.height)},e.prototype._createMainTexture=function(){var e=this;this._mainTexture=new h.a("HighlightLayerMainRTT",{width:this._mainTextureDesiredSize.width,height:this._mainTextureDesiredSize.height},this._scene,!1,!0,0),this._mainTexture.activeCamera=this._effectLayerOptions.camera,this._mainTexture.wrapU=a.a.CLAMP_ADDRESSMODE,this._mainTexture.wrapV=a.a.CLAMP_ADDRESSMODE,this._mainTexture.anisotropicFilteringLevel=1,this._mainTexture.updateSamplingMode(a.a.BILINEAR_SAMPLINGMODE),this._mainTexture.renderParticles=!1,this._mainTexture.renderList=null,this._mainTexture.ignoreCameraViewport=!0,this._mainTexture.customRenderFunction=function(t,i,r,n){var s;e.onBeforeRenderMainTextureObservable.notifyObservers(e);var o=e._scene.getEngine();if(n.length){for(o.setColorWrite(!1),s=0;s<n.length;s++)e._renderSubMesh(n.data[s]);o.setColorWrite(!0)}for(s=0;s<t.length;s++)e._renderSubMesh(t.data[s]);for(s=0;s<i.length;s++)e._renderSubMesh(i.data[s]);var a=o.getAlphaMode();for(s=0;s<r.length;s++)e._renderSubMesh(r.data[s],!0);o.setAlphaMode(a)},this._mainTexture.onClearObservable.add((function(t){t.clear(e.neutralColor,!0,!0,!0)}))},e.prototype._addCustomEffectDefines=function(e){},e.prototype._isReady=function(e,t,i){var r=e.getMaterial();if(!r)return!1;if(!r.isReadyForSubMesh(e.getMesh(),e,t))return!1;var n=[],s=[o.b.PositionKind],a=e.getMesh(),h=!1,c=!1;if(r){var u=r.needAlphaTesting(),l=r.getAlphaTestTexture(),d=l&&l.hasAlpha&&(r.useAlphaFromDiffuseTexture||r._useAlphaFromAlbedoTexture);l&&(u||d)&&(n.push("#define DIFFUSE"),a.isVerticesDataPresent(o.b.UV2Kind)&&1===l.coordinatesIndex?(n.push("#define DIFFUSEUV2"),c=!0):a.isVerticesDataPresent(o.b.UVKind)&&(n.push("#define DIFFUSEUV1"),h=!0),u&&(n.push("#define ALPHATEST"),n.push("#define ALPHATESTVALUE 0.4")));var p=r.opacityTexture;p&&(n.push("#define OPACITY"),a.isVerticesDataPresent(o.b.UV2Kind)&&1===p.coordinatesIndex?(n.push("#define OPACITYUV2"),c=!0):a.isVerticesDataPresent(o.b.UVKind)&&(n.push("#define OPACITYUV1"),h=!0))}i&&(n.push("#define EMISSIVE"),a.isVerticesDataPresent(o.b.UV2Kind)&&1===i.coordinatesIndex?(n.push("#define EMISSIVEUV2"),c=!0):a.isVerticesDataPresent(o.b.UVKind)&&(n.push("#define EMISSIVEUV1"),h=!0)),a.isVerticesDataPresent(o.b.ColorKind)&&a.hasVertexAlpha&&(s.push(o.b.ColorKind),n.push("#define VERTEXALPHA")),h&&(s.push(o.b.UVKind),n.push("#define UV1")),c&&(s.push(o.b.UV2Kind),n.push("#define UV2"));var f=new v.a;if(a.useBones&&a.computeBonesUsingShaders){s.push(o.b.MatricesIndicesKind),s.push(o.b.MatricesWeightsKind),a.numBoneInfluencers>4&&(s.push(o.b.MatricesIndicesExtraKind),s.push(o.b.MatricesWeightsExtraKind)),n.push("#define NUM_BONE_INFLUENCERS "+a.numBoneInfluencers);var _=a.skeleton;_&&_.isUsingTextureForMatrices?n.push("#define BONETEXTURE"):n.push("#define BonesPerMesh "+(_?_.bones.length+1:0)),a.numBoneInfluencers>0&&f.addCPUSkinningFallback(0,a)}else n.push("#define NUM_BONE_INFLUENCERS 0");var P=a.morphTargetManager,b=0;P&&P.numInfluencers>0&&(n.push("#define MORPHTARGETS"),b=P.numInfluencers,n.push("#define NUM_MORPH_INFLUENCERS "+b),g.a.PrepareAttributesForMorphTargetsInfluencers(s,a,b)),t&&(n.push("#define INSTANCES"),g.a.PushAttributesForInstances(s)),this._addCustomEffectDefines(n);var T=n.join("\n");return this._cachedDefines!==T&&(this._cachedDefines=T,this._effectLayerMapGenerationEffect=this._scene.getEngine().createEffect("glowMapGeneration",s,["world","mBones","viewProjection","glowColor","morphTargetInfluences","boneTextureWidth","diffuseMatrix","emissiveMatrix","opacityMatrix","opacityIntensity"],["diffuseSampler","emissiveSampler","opacitySampler","boneSampler"],T,f,void 0,void 0,{maxSimultaneousMorphTargets:b})),this._effectLayerMapGenerationEffect.isReady()},e.prototype.render=function(){var e=this._mergeEffect;if(e.isReady()){for(var t=0;t<this._postProcesses.length;t++)if(!this._postProcesses[t].isReady())return;var i=this._scene.getEngine();this.onBeforeComposeObservable.notifyObservers(this),i.enableEffect(e),i.setState(!1),i.bindBuffers(this._vertexBuffers,this._indexBuffer,e);var r=i.getAlphaMode();i.setAlphaMode(this._effectLayerOptions.alphaBlendingMode),this._internalRender(e),i.setAlphaMode(r),this.onAfterComposeObservable.notifyObservers(this);var n=this._mainTexture.getSize();this._setMainTextureSize(),n.width===this._mainTextureDesiredSize.width&&n.height===this._mainTextureDesiredSize.height||(this.onSizeChangedObservable.notifyObservers(this),this._disposeTextureAndPostProcesses(),this._createMainTexture(),this._createTextureAndPostProcesses())}},e.prototype.hasMesh=function(e){return-1===this.renderingGroupId||e.renderingGroupId===this.renderingGroupId},e.prototype.shouldRender=function(){return this.isEnabled&&this._shouldRender},e.prototype._shouldRenderMesh=function(e){return!0},e.prototype._canRenderMesh=function(e,t){return!t.needAlphaBlendingForMesh(e)},e.prototype._shouldRenderEmissiveTextureForMesh=function(){return!0},e.prototype._renderSubMesh=function(e,t){var i=this;if(void 0===t&&(t=!1),this.shouldRender()){var r=e.getMaterial(),n=e.getRenderingMesh(),s=this._scene,o=s.getEngine();if(n._internalAbstractMeshDataInfo._isActiveIntermediate=!1,r&&this._canRenderMesh(n,r)){o.setState(r.backFaceCulling);var a=n._getInstancesRenderList(e._id);if(!a.mustReturn&&this._shouldRenderMesh(n)){var h=a.hardwareInstancedRendering[e._id];if(this._setEmissiveTextureAndColor(n,e,r),this.onBeforeRenderMeshToEffect.notifyObservers(n),this._useMeshMaterial(n))n.render(e,h);else if(this._isReady(e,h,this._emissiveTextureAndColor.texture)){o.enableEffect(this._effectLayerMapGenerationEffect),n._bind(e,this._effectLayerMapGenerationEffect,c.a.TriangleFillMode),this._effectLayerMapGenerationEffect.setMatrix("viewProjection",s.getTransformMatrix()),this._effectLayerMapGenerationEffect.setFloat4("glowColor",this._emissiveTextureAndColor.color.r,this._emissiveTextureAndColor.color.g,this._emissiveTextureAndColor.color.b,this._emissiveTextureAndColor.color.a);var u=r.needAlphaTesting(),l=r.getAlphaTestTexture(),d=l&&l.hasAlpha&&(r.useAlphaFromDiffuseTexture||r._useAlphaFromAlbedoTexture);if(l&&(u||d))this._effectLayerMapGenerationEffect.setTexture("diffuseSampler",l),(p=l.getTextureMatrix())&&this._effectLayerMapGenerationEffect.setMatrix("diffuseMatrix",p);var p,f=r.opacityTexture;if(f)this._effectLayerMapGenerationEffect.setTexture("opacitySampler",f),this._effectLayerMapGenerationEffect.setFloat("opacityIntensity",f.level),(p=f.getTextureMatrix())&&this._effectLayerMapGenerationEffect.setMatrix("opacityMatrix",p);if(this._emissiveTextureAndColor.texture&&(this._effectLayerMapGenerationEffect.setTexture("emissiveSampler",this._emissiveTextureAndColor.texture),this._effectLayerMapGenerationEffect.setMatrix("emissiveMatrix",this._emissiveTextureAndColor.texture.getTextureMatrix())),n.useBones&&n.computeBonesUsingShaders&&n.skeleton){var _=n.skeleton;if(_.isUsingTextureForMatrices){var P=_.getTransformMatrixTexture(n);if(!P)return;this._effectLayerMapGenerationEffect.setTexture("boneSampler",P),this._effectLayerMapGenerationEffect.setFloat("boneTextureWidth",4*(_.bones.length+1))}else this._effectLayerMapGenerationEffect.setMatrices("mBones",_.getTransformMatrices(n))}g.a.BindMorphTargetParameters(n,this._effectLayerMapGenerationEffect),t&&o.setAlphaMode(r.alphaMode),n._processRendering(e,this._effectLayerMapGenerationEffect,r.fillMode,a,h,(function(e,t){return i._effectLayerMapGenerationEffect.setMatrix("world",t)}))}else this._mainTexture.resetRefreshCounter();this.onAfterRenderMeshToEffect.notifyObservers(n)}}}},e.prototype._useMeshMaterial=function(e){return!1},e.prototype._rebuild=function(){var e=this._vertexBuffers[o.b.PositionKind];e&&e._rebuild(),this._generateIndexBuffer()},e.prototype._disposeTextureAndPostProcesses=function(){this._mainTexture.dispose();for(var e=0;e<this._postProcesses.length;e++)this._postProcesses[e]&&this._postProcesses[e].dispose();this._postProcesses=[];for(e=0;e<this._textures.length;e++)this._textures[e]&&this._textures[e].dispose();this._textures=[]},e.prototype.dispose=function(){var e=this._vertexBuffers[o.b.PositionKind];e&&(e.dispose(),this._vertexBuffers[o.b.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this._disposeTextureAndPostProcesses();var t=this._scene.effectLayers.indexOf(this,0);t>-1&&this._scene.effectLayers.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderMainTextureObservable.clear(),this.onBeforeComposeObservable.clear(),this.onBeforeRenderMeshToEffect.clear(),this.onAfterRenderMeshToEffect.clear(),this.onAfterComposeObservable.clear(),this.onSizeChangedObservable.clear()},e.prototype.getClassName=function(){return"EffectLayer"},e.Parse=function(e,t,i){return l.b.Instantiate(e.customType).Parse(e,t,i)},e._SceneComponentInitialization=function(e){throw P.a.WarnImport("EffectLayerSceneComponent")},Object(r.b)([Object(n.c)()],e.prototype,"name",void 0),Object(r.b)([Object(n.f)()],e.prototype,"neutralColor",void 0),Object(r.b)([Object(n.c)()],e.prototype,"isEnabled",void 0),Object(r.b)([Object(n.d)()],e.prototype,"camera",null),Object(r.b)([Object(n.c)()],e.prototype,"renderingGroupId",null),e}(),T=i("KbzI"),M=i("WHS4"),m=(i("YzlU"),i("ibn2"),i("CAkI")),y=i("Yap0");T.a.AddParser(y.a.NAME_EFFECTLAYER,(function(e,t,i,r){if(e.effectLayers){i.effectLayers||(i.effectLayers=new Array);for(var n=0;n<e.effectLayers.length;n++){var s=b.Parse(e.effectLayers[n],t,r);i.effectLayers.push(s)}}})),T.a.prototype.removeEffectLayer=function(e){var t=this.effectLayers.indexOf(e);return-1!==t&&this.effectLayers.splice(t,1),t},T.a.prototype.addEffectLayer=function(e){this.effectLayers.push(e)};var E=function(){function e(e){this.name=y.a.NAME_EFFECTLAYER,this._renderEffects=!1,this._needStencil=!1,this._previousStencilState=!1,this.scene=e,this._engine=e.getEngine(),e.effectLayers=new Array}return e.prototype.register=function(){this.scene._isReadyForMeshStage.registerStep(y.a.STEP_ISREADYFORMESH_EFFECTLAYER,this,this._isReadyForMesh),this.scene._cameraDrawRenderTargetStage.registerStep(y.a.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER,this,this._renderMainTexture),this.scene._beforeCameraDrawStage.registerStep(y.a.STEP_BEFORECAMERADRAW_EFFECTLAYER,this,this._setStencil),this.scene._afterRenderingGroupDrawStage.registerStep(y.a.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW,this,this._drawRenderingGroup),this.scene._afterCameraDrawStage.registerStep(y.a.STEP_AFTERCAMERADRAW_EFFECTLAYER,this,this._setStencilBack),this.scene._afterCameraDrawStage.registerStep(y.a.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW,this,this._drawCamera)},e.prototype.rebuild=function(){for(var e=0,t=this.scene.effectLayers;e<t.length;e++){t[e]._rebuild()}},e.prototype.serialize=function(e){e.effectLayers=[];for(var t=0,i=this.scene.effectLayers;t<i.length;t++){var r=i[t];r.serialize&&e.effectLayers.push(r.serialize())}},e.prototype.addFromContainer=function(e){var t=this;e.effectLayers&&e.effectLayers.forEach((function(e){t.scene.addEffectLayer(e)}))},e.prototype.removeFromContainer=function(e,t){var i=this;e.effectLayers&&e.effectLayers.forEach((function(e){i.scene.removeEffectLayer(e),t&&e.dispose()}))},e.prototype.dispose=function(){for(var e=this.scene.effectLayers;e.length;)e[0].dispose()},e.prototype._isReadyForMesh=function(e,t){for(var i=0,r=this.scene.effectLayers;i<r.length;i++){var n=r[i];if(n.hasMesh(e))for(var s=0,o=e.subMeshes;s<o.length;s++){var a=o[s];if(!n.isReady(a,t))return!1}}return!0},e.prototype._renderMainTexture=function(e){this._renderEffects=!1,this._needStencil=!1;var t=!1,i=this.scene.effectLayers;if(i&&i.length>0){this._previousStencilState=this._engine.getStencilBuffer();for(var r=0,n=i;r<n.length;r++){var s=n[r];if(s.shouldRender()&&(!s.camera||s.camera.cameraRigMode===m.a.RIG_MODE_NONE&&e===s.camera||s.camera.cameraRigMode!==m.a.RIG_MODE_NONE&&s.camera._rigCameras.indexOf(e)>-1)){this._renderEffects=!0,this._needStencil=this._needStencil||s.needStencil();var o=s._mainTexture;o._shouldRender()&&(this.scene.incrementRenderId(),o.render(!1,!1),t=!0)}}this.scene.incrementRenderId()}return t},e.prototype._setStencil=function(){this._needStencil&&this._engine.setStencilBuffer(!0)},e.prototype._setStencilBack=function(){this._needStencil&&this._engine.setStencilBuffer(this._previousStencilState)},e.prototype._draw=function(e){if(this._renderEffects){this._engine.setDepthBuffer(!1);for(var t=this.scene.effectLayers,i=0;i<t.length;i++){var r=t[i];r.renderingGroupId===e&&r.shouldRender()&&r.render()}this._engine.setDepthBuffer(!0)}},e.prototype._drawCamera=function(){this._renderEffects&&this._draw(-1)},e.prototype._drawRenderingGroup=function(e){!this.scene._isInIntermediateRendering()&&this._renderEffects&&this._draw(e)},e}();b._SceneComponentInitialization=function(e){var t=e._getComponent(y.a.NAME_EFFECTLAYER);t||(t=new E(e),e._addComponent(t))},T.a.prototype.getGlowLayerByName=function(e){for(var t=0;t<this.effectLayers.length;t++)if(this.effectLayers[t].name===e&&this.effectLayers[t].getEffectName()===O.EffectName)return this.effectLayers[t];return null};var O=function(e){function t(i,n,s){var o=e.call(this,i,n)||this;return o._intensity=1,o._includedOnlyMeshes=[],o._excludedMeshes=[],o._meshesUsingTheirOwnMaterials=[],o.neutralColor=new p.b(0,0,0,1),o._options=Object(r.a)({mainTextureRatio:t.DefaultTextureRatio,blurKernelSize:32,mainTextureFixedSize:void 0,camera:null,mainTextureSamples:1,renderingGroupId:-1},s),o._init({alphaBlendingMode:1,camera:o._options.camera,mainTextureFixedSize:o._options.mainTextureFixedSize,mainTextureRatio:o._options.mainTextureRatio,renderingGroupId:o._options.renderingGroupId}),o}return Object(r.c)(t,e),Object.defineProperty(t.prototype,"blurKernelSize",{get:function(){return this._horizontalBlurPostprocess1.kernel},set:function(e){this._horizontalBlurPostprocess1.kernel=e,this._verticalBlurPostprocess1.kernel=e,this._horizontalBlurPostprocess2.kernel=e,this._verticalBlurPostprocess2.kernel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this._intensity},set:function(e){this._intensity=e},enumerable:!0,configurable:!0}),t.prototype.getEffectName=function(){return t.EffectName},t.prototype._createMergeEffect=function(){return this._engine.createEffect("glowMapMerge",[o.b.PositionKind],["offset"],["textureSampler","textureSampler2"],"#define EMISSIVE \n")},t.prototype._createTextureAndPostProcesses=function(){var e=this,t=this._mainTextureDesiredSize.width,i=this._mainTextureDesiredSize.height;t=this._engine.needPOTTextures?f.a.GetExponentOfTwo(t,this._maxSize):t,i=this._engine.needPOTTextures?f.a.GetExponentOfTwo(i,this._maxSize):i;var r=0;r=this._engine.getCaps().textureHalfFloatRender?2:0,this._blurTexture1=new h.a("GlowLayerBlurRTT",{width:t,height:i},this._scene,!1,!0,r),this._blurTexture1.wrapU=a.a.CLAMP_ADDRESSMODE,this._blurTexture1.wrapV=a.a.CLAMP_ADDRESSMODE,this._blurTexture1.updateSamplingMode(a.a.BILINEAR_SAMPLINGMODE),this._blurTexture1.renderParticles=!1,this._blurTexture1.ignoreCameraViewport=!0;var n=Math.floor(t/2),o=Math.floor(i/2);this._blurTexture2=new h.a("GlowLayerBlurRTT2",{width:n,height:o},this._scene,!1,!0,r),this._blurTexture2.wrapU=a.a.CLAMP_ADDRESSMODE,this._blurTexture2.wrapV=a.a.CLAMP_ADDRESSMODE,this._blurTexture2.updateSamplingMode(a.a.BILINEAR_SAMPLINGMODE),this._blurTexture2.renderParticles=!1,this._blurTexture2.ignoreCameraViewport=!0,this._textures=[this._blurTexture1,this._blurTexture2],this._horizontalBlurPostprocess1=new u.a("GlowLayerHBP1",new s.d(1,0),this._options.blurKernelSize/2,{width:t,height:i},null,a.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,r),this._horizontalBlurPostprocess1.width=t,this._horizontalBlurPostprocess1.height=i,this._horizontalBlurPostprocess1.onApplyObservable.add((function(t){t.setTexture("textureSampler",e._mainTexture)})),this._verticalBlurPostprocess1=new u.a("GlowLayerVBP1",new s.d(0,1),this._options.blurKernelSize/2,{width:t,height:i},null,a.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,r),this._horizontalBlurPostprocess2=new u.a("GlowLayerHBP2",new s.d(1,0),this._options.blurKernelSize/2,{width:n,height:o},null,a.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,r),this._horizontalBlurPostprocess2.width=n,this._horizontalBlurPostprocess2.height=o,this._horizontalBlurPostprocess2.onApplyObservable.add((function(t){t.setTexture("textureSampler",e._blurTexture1)})),this._verticalBlurPostprocess2=new u.a("GlowLayerVBP2",new s.d(0,1),this._options.blurKernelSize/2,{width:n,height:o},null,a.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,r),this._postProcesses=[this._horizontalBlurPostprocess1,this._verticalBlurPostprocess1,this._horizontalBlurPostprocess2,this._verticalBlurPostprocess2],this._postProcesses1=[this._horizontalBlurPostprocess1,this._verticalBlurPostprocess1],this._postProcesses2=[this._horizontalBlurPostprocess2,this._verticalBlurPostprocess2],this._mainTexture.samples=this._options.mainTextureSamples,this._mainTexture.onAfterUnbindObservable.add((function(){var t=e._blurTexture1.getInternalTexture();t&&(e._scene.postProcessManager.directRender(e._postProcesses1,t,!0),(t=e._blurTexture2.getInternalTexture())&&e._scene.postProcessManager.directRender(e._postProcesses2,t,!0))})),this._postProcesses.map((function(e){e.autoClear=!1}))},t.prototype.isReady=function(t,i){var r=t.getMaterial(),n=t.getRenderingMesh();if(!r||!n)return!1;var s=r.emissiveTexture;return e.prototype._isReady.call(this,t,i,s)},t.prototype.needStencil=function(){return!1},t.prototype._canRenderMesh=function(e,t){return!0},t.prototype._internalRender=function(e){e.setTexture("textureSampler",this._blurTexture1),e.setTexture("textureSampler2",this._blurTexture2),e.setFloat("offset",this._intensity);var t=this._engine,i=t.getStencilBuffer();t.setStencilBuffer(!1),t.drawElementsType(c.a.TriangleFillMode,0,6),t.setStencilBuffer(i)},t.prototype._setEmissiveTextureAndColor=function(e,t,i){var r=1;this.customEmissiveTextureSelector?this._emissiveTextureAndColor.texture=this.customEmissiveTextureSelector(e,t,i):i?(this._emissiveTextureAndColor.texture=i.emissiveTexture,this._emissiveTextureAndColor.texture&&(r=this._emissiveTextureAndColor.texture.level)):this._emissiveTextureAndColor.texture=null,this.customEmissiveColorSelector?this.customEmissiveColorSelector(e,t,i,this._emissiveTextureAndColor.color):i.emissiveColor?this._emissiveTextureAndColor.color.set(i.emissiveColor.r*r,i.emissiveColor.g*r,i.emissiveColor.b*r,i.alpha):this._emissiveTextureAndColor.color.set(this.neutralColor.r,this.neutralColor.g,this.neutralColor.b,this.neutralColor.a)},t.prototype._shouldRenderMesh=function(e){return this.hasMesh(e)},t.prototype._addCustomEffectDefines=function(e){e.push("#define GLOW")},t.prototype.addExcludedMesh=function(e){-1===this._excludedMeshes.indexOf(e.uniqueId)&&this._excludedMeshes.push(e.uniqueId)},t.prototype.removeExcludedMesh=function(e){var t=this._excludedMeshes.indexOf(e.uniqueId);-1!==t&&this._excludedMeshes.splice(t,1)},t.prototype.addIncludedOnlyMesh=function(e){-1===this._includedOnlyMeshes.indexOf(e.uniqueId)&&this._includedOnlyMeshes.push(e.uniqueId)},t.prototype.removeIncludedOnlyMesh=function(e){var t=this._includedOnlyMeshes.indexOf(e.uniqueId);-1!==t&&this._includedOnlyMeshes.splice(t,1)},t.prototype.hasMesh=function(t){return!!e.prototype.hasMesh.call(this,t)&&(this._includedOnlyMeshes.length?-1!==this._includedOnlyMeshes.indexOf(t.uniqueId):!this._excludedMeshes.length||-1===this._excludedMeshes.indexOf(t.uniqueId))},t.prototype._useMeshMaterial=function(e){return 0!=this._meshesUsingTheirOwnMaterials.length&&this._meshesUsingTheirOwnMaterials.indexOf(e.uniqueId)>-1},t.prototype.referenceMeshToUseItsOwnMaterial=function(e){this._meshesUsingTheirOwnMaterials.push(e.uniqueId)},t.prototype.unReferenceMeshFromUsingItsOwnMaterial=function(e){for(var t=this._meshesUsingTheirOwnMaterials.indexOf(e.uniqueId);t>0;)this._meshesUsingTheirOwnMaterials.slice(t,t+1),t=this._meshesUsingTheirOwnMaterials.indexOf(e.uniqueId)},t.prototype._disposeMesh=function(e){this.removeIncludedOnlyMesh(e),this.removeExcludedMesh(e)},t.prototype.getClassName=function(){return"GlowLayer"},t.prototype.serialize=function(){var e,t=n.a.Serialize(this);if(t.customType="BABYLON.GlowLayer",t.includedMeshes=[],this._includedOnlyMeshes.length)for(e=0;e<this._includedOnlyMeshes.length;e++){(i=this._scene.getMeshByUniqueID(this._includedOnlyMeshes[e]))&&t.includedMeshes.push(i.id)}if(t.excludedMeshes=[],this._excludedMeshes.length)for(e=0;e<this._excludedMeshes.length;e++){var i;(i=this._scene.getMeshByUniqueID(this._excludedMeshes[e]))&&t.excludedMeshes.push(i.id)}return t},t.Parse=function(e,i,r){var s,o=n.a.Parse((function(){return new t(e.name,i,e.options)}),e,i,r);for(s=0;s<e.excludedMeshes.length;s++){(a=i.getMeshByID(e.excludedMeshes[s]))&&o.addExcludedMesh(a)}for(s=0;s<e.includedMeshes.length;s++){var a;(a=i.getMeshByID(e.includedMeshes[s]))&&o.addIncludedOnlyMesh(a)}return o},t.EffectName="GlowLayer",t.DefaultBlurKernelSize=32,t.DefaultTextureRatio=.5,Object(r.b)([Object(n.c)()],t.prototype,"blurKernelSize",null),Object(r.b)([Object(n.c)()],t.prototype,"intensity",null),Object(r.b)([Object(n.c)("options")],t.prototype,"_options",void 0),t}(b);M.a.RegisteredTypes["BABYLON.GlowLayer"]=O},XdJO:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var r=i("98Qd"),n=i("fZF6"),s=i("/SR9"),o=i("IIVm"),a=i("YKqZ"),h=i("jSHE"),c=function(){function e(){this._singleClick=!1,this._doubleClick=!1,this._hasSwiped=!1,this._ignore=!1}return Object.defineProperty(e.prototype,"singleClick",{get:function(){return this._singleClick},set:function(e){this._singleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(e){this._doubleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(e){this._hasSwiped=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignore",{get:function(){return this._ignore},set:function(e){this._ignore=e},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e){this._wheelEventName="",this._meshPickProceed=!1,this._currentPickResult=null,this._previousPickResult=null,this._totalPointersPressed=0,this._doubleClickOccured=!1,this._pointerX=0,this._pointerY=0,this._startingPointerPosition=new s.d(0,0),this._previousStartingPointerPosition=new s.d(0,0),this._startingPointerTime=0,this._previousStartingPointerTime=0,this._pointerCaptures={},this._scene=e}return Object.defineProperty(e.prototype,"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unTranslatedPointer",{get:function(){return new s.d(this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerX",{get:function(){return this._pointerX},set:function(e){this._pointerX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerY",{get:function(){return this._pointerY},set:function(e){this._pointerY=e},enumerable:!0,configurable:!0}),e.prototype._updatePointerPosition=function(e){var t=this._scene.getEngine().getInputElementClientRect();t&&(this._pointerX=e.clientX-t.left,this._pointerY=e.clientY-t.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)},e.prototype._processPointerMove=function(e,t){var i=this._scene,n=i.getEngine(),s=n.getInputElement();if(s){s.tabIndex=n.canvasTabIndex,i.doNotHandleCursors||(s.style.cursor=i.defaultCursor);var o=!!(e&&e.hit&&e.pickedMesh);o?(i.setPointerOverMesh(e.pickedMesh),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers&&(i.doNotHandleCursors||(this._pointerOverMesh.actionManager.hoverCursor?s.style.cursor=this._pointerOverMesh.actionManager.hoverCursor:s.style.cursor=i.hoverCursor))):i.setPointerOverMesh(null);for(var a=0,h=i._pointerMoveStage;a<h.length;a++){e=h[a].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,o,s)}if(e){var c=t.type===this._wheelEventName?r.a.POINTERWHEEL:r.a.POINTERMOVE;if(i.onPointerMove&&i.onPointerMove(t,e,c),i.onPointerObservable.hasObservers()){var u=new r.b(c,t,e);this._setRayOnPointerInfo(u),i.onPointerObservable.notifyObservers(u,c)}}}},e.prototype._setRayOnPointerInfo=function(e){var t=this._scene;e.pickInfo&&!e.pickInfo._pickingUnavailable&&(e.pickInfo.ray||(e.pickInfo.ray=t.createPickingRay(e.event.offsetX,e.event.offsetY,s.a.Identity(),t.activeCamera)))},e.prototype._checkPrePointerObservable=function(e,t,i){var n=this._scene,s=new r.c(i,t,this._unTranslatedPointerX,this._unTranslatedPointerY);return e&&(s.ray=e.ray),n.onPrePointerObservable.notifyObservers(s,i),!!s.skipOnPointerObservable},e.prototype.simulatePointerMove=function(e,t){var i=new PointerEvent("pointermove",t);this._checkPrePointerObservable(e,i,r.a.POINTERMOVE)||this._processPointerMove(e,i)},e.prototype.simulatePointerDown=function(e,t){var i=new PointerEvent("pointerdown",t);this._checkPrePointerObservable(e,i,r.a.POINTERDOWN)||this._processPointerDown(e,i)},e.prototype._processPointerDown=function(t,i){var n=this,s=this._scene;if(t&&t.hit&&t.pickedMesh){this._pickedDownMesh=t.pickedMesh;var a=t.pickedMesh._getActionManagerForTrigger();if(a){if(a.hasPickTriggers)switch(a.processTrigger(5,o.a.CreateNew(t.pickedMesh,i)),i.button){case 0:a.processTrigger(2,o.a.CreateNew(t.pickedMesh,i));break;case 1:a.processTrigger(4,o.a.CreateNew(t.pickedMesh,i));break;case 2:a.processTrigger(3,o.a.CreateNew(t.pickedMesh,i))}a.hasSpecificTrigger(8)&&window.setTimeout((function(){var t=s.pick(n._unTranslatedPointerX,n._unTranslatedPointerY,(function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.actionManager&&e.actionManager.hasSpecificTrigger(8)&&e==n._pickedDownMesh}),!1,s.cameraToUseForPointers);t&&t.hit&&t.pickedMesh&&a&&0!==n._totalPointersPressed&&Date.now()-n._startingPointerTime>e.LongPressDelay&&!n._isPointerSwiping()&&(n._startingPointerTime=0,a.processTrigger(8,o.a.CreateNew(t.pickedMesh,i)))}),e.LongPressDelay)}}else for(var h=0,c=s._pointerDownStage;h<c.length;h++){t=c[h].action(this._unTranslatedPointerX,this._unTranslatedPointerY,t,i)}if(t){var u=r.a.POINTERDOWN;if(s.onPointerDown&&s.onPointerDown(i,t,u),s.onPointerObservable.hasObservers()){var l=new r.b(u,i,t);this._setRayOnPointerInfo(l),s.onPointerObservable.notifyObservers(l,u)}}},e.prototype._isPointerSwiping=function(){return Math.abs(this._startingPointerPosition.x-this._pointerX)>e.DragMovementThreshold||Math.abs(this._startingPointerPosition.y-this._pointerY)>e.DragMovementThreshold},e.prototype.simulatePointerUp=function(e,t,i){var n=new PointerEvent("pointerup",t),s=new c;i?s.doubleClick=!0:s.singleClick=!0,this._checkPrePointerObservable(e,n,r.a.POINTERUP)||this._processPointerUp(e,n,s)},e.prototype._processPointerUp=function(e,t,i){var n=this._scene;if(e&&e&&e.pickedMesh){if(this._pickedUpMesh=e.pickedMesh,this._pickedDownMesh===this._pickedUpMesh&&(n.onPointerPick&&n.onPointerPick(t,e),i.singleClick&&!i.ignore&&n.onPointerObservable.hasObservers())){var s=r.a.POINTERPICK,a=new r.b(s,t,e);this._setRayOnPointerInfo(a),n.onPointerObservable.notifyObservers(a,s)}var h=e.pickedMesh._getActionManagerForTrigger();if(h&&!i.ignore){h.processTrigger(7,o.a.CreateNew(e.pickedMesh,t)),!i.hasSwiped&&i.singleClick&&h.processTrigger(1,o.a.CreateNew(e.pickedMesh,t));var c=e.pickedMesh._getActionManagerForTrigger(6);i.doubleClick&&c&&c.processTrigger(6,o.a.CreateNew(e.pickedMesh,t))}}else if(!i.ignore)for(var u=0,l=n._pointerUpStage;u<l.length;u++){e=l[u].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,t)}if(this._pickedDownMesh&&this._pickedDownMesh!==this._pickedUpMesh){var d=this._pickedDownMesh._getActionManagerForTrigger(16);d&&d.processTrigger(16,o.a.CreateNew(this._pickedDownMesh,t))}var p=0;if(n.onPointerObservable.hasObservers()){if(!i.ignore&&!i.hasSwiped&&(i.singleClick&&n.onPointerObservable.hasSpecificMask(r.a.POINTERTAP)?p=r.a.POINTERTAP:i.doubleClick&&n.onPointerObservable.hasSpecificMask(r.a.POINTERDOUBLETAP)&&(p=r.a.POINTERDOUBLETAP),p)){a=new r.b(p,t,e);this._setRayOnPointerInfo(a),n.onPointerObservable.notifyObservers(a,p)}if(!i.ignore){p=r.a.POINTERUP;a=new r.b(p,t,e);this._setRayOnPointerInfo(a),n.onPointerObservable.notifyObservers(a,p)}}n.onPointerUp&&!i.ignore&&n.onPointerUp(t,e,p)},e.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._pointerCaptures[e]},e.prototype.attachControl=function(t,i,s,u){var l=this;void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===u&&(u=null);var d=this._scene;if(u||(u=d.getEngine().getInputElement()),u){var p,f=d.getEngine();this._initActionManager=function(e,t){if(!l._meshPickProceed){var i=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers);l._currentPickResult=i,i&&(e=i.hit&&i.pickedMesh?i.pickedMesh._getActionManagerForTrigger():null),l._meshPickProceed=!0}return e},this._delayedSimpleClick=function(t,i,r){(Date.now()-l._previousStartingPointerTime>e.DoubleClickDelay&&!l._doubleClickOccured||t!==l._previousButtonPressed)&&(l._doubleClickOccured=!1,i.singleClick=!0,i.ignore=!1,r(i,l._currentPickResult))},this._initClickEvent=function(t,i,s,o){var a=new c;l._currentPickResult=null;var h=null,u=t.hasSpecificMask(r.a.POINTERPICK)||i.hasSpecificMask(r.a.POINTERPICK)||t.hasSpecificMask(r.a.POINTERTAP)||i.hasSpecificMask(r.a.POINTERTAP)||t.hasSpecificMask(r.a.POINTERDOUBLETAP)||i.hasSpecificMask(r.a.POINTERDOUBLETAP);!u&&n.a&&(h=l._initActionManager(h,a))&&(u=h.hasPickTriggers);var d=!1;if(u){var p=s.button;if(a.hasSwiped=l._isPointerSwiping(),!a.hasSwiped){var f=!e.ExclusiveDoubleClickMode;f||(f=!t.hasSpecificMask(r.a.POINTERDOUBLETAP)&&!i.hasSpecificMask(r.a.POINTERDOUBLETAP))&&!n.a.HasSpecificTrigger(6)&&(h=l._initActionManager(h,a))&&(f=!h.hasSpecificTrigger(6)),f?(Date.now()-l._previousStartingPointerTime>e.DoubleClickDelay||p!==l._previousButtonPressed)&&(a.singleClick=!0,o(a,l._currentPickResult),d=!0):(l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,l._delayedSimpleClickTimeout=window.setTimeout(l._delayedSimpleClick.bind(l,p,a,o),e.DoubleClickDelay));var _=t.hasSpecificMask(r.a.POINTERDOUBLETAP)||i.hasSpecificMask(r.a.POINTERDOUBLETAP);!_&&n.a.HasSpecificTrigger(6)&&(h=l._initActionManager(h,a))&&(_=h.hasSpecificTrigger(6)),_&&(p===l._previousButtonPressed&&Date.now()-l._previousStartingPointerTime<e.DoubleClickDelay&&!l._doubleClickOccured?(a.hasSwiped||l._isPointerSwiping()?(l._doubleClickOccured=!1,l._previousStartingPointerTime=l._startingPointerTime,l._previousStartingPointerPosition.x=l._startingPointerPosition.x,l._previousStartingPointerPosition.y=l._startingPointerPosition.y,l._previousButtonPressed=p,e.ExclusiveDoubleClickMode?(l._previousDelayedSimpleClickTimeout&&clearTimeout(l._previousDelayedSimpleClickTimeout),l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,o(a,l._previousPickResult)):o(a,l._currentPickResult)):(l._previousStartingPointerTime=0,l._doubleClickOccured=!0,a.doubleClick=!0,a.ignore=!1,e.ExclusiveDoubleClickMode&&l._previousDelayedSimpleClickTimeout&&clearTimeout(l._previousDelayedSimpleClickTimeout),l._previousDelayedSimpleClickTimeout=l._delayedSimpleClickTimeout,o(a,l._currentPickResult)),d=!0):(l._doubleClickOccured=!1,l._previousStartingPointerTime=l._startingPointerTime,l._previousStartingPointerPosition.x=l._startingPointerPosition.x,l._previousStartingPointerPosition.y=l._startingPointerPosition.y,l._previousButtonPressed=p))}}d||o(a,l._currentPickResult)},this._onPointerMove=function(e){if(l._updatePointerPosition(e),!l._checkPrePointerObservable(null,e,e.type===l._wheelEventName?r.a.POINTERWHEEL:r.a.POINTERMOVE)&&(d.cameraToUseForPointers||d.activeCamera)){d.pointerMovePredicate||(d.pointerMovePredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(e.enablePointerMoveEvents||d.constantlyUpdateMeshUnderPointer||null!=e._getActionManagerForTrigger())&&(!d.cameraToUseForPointers||0!=(d.cameraToUseForPointers.layerMask&e.layerMask))});var t=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerMovePredicate,!1,d.cameraToUseForPointers);l._processPointerMove(t,e)}},this._onPointerDown=function(e){if(l._totalPointersPressed++,l._pickedDownMesh=null,l._meshPickProceed=!1,l._updatePointerPosition(e),d.preventDefaultOnPointerDown&&u&&(e.preventDefault(),u.focus()),l._startingPointerPosition.x=l._pointerX,l._startingPointerPosition.y=l._pointerY,l._startingPointerTime=Date.now(),!l._checkPrePointerObservable(null,e,r.a.POINTERDOWN)&&(d.cameraToUseForPointers||d.activeCamera)){l._pointerCaptures[e.pointerId]=!0,d.pointerDownPredicate||(d.pointerDownPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!d.cameraToUseForPointers||0!=(d.cameraToUseForPointers.layerMask&e.layerMask))}),l._pickedDownMesh=null;var t=d.pick(l._unTranslatedPointerX,l._unTranslatedPointerY,d.pointerDownPredicate,!1,d.cameraToUseForPointers);l._processPointerDown(t,e)}},this._onPointerUp=function(e){0!==l._totalPointersPressed&&(l._totalPointersPressed--,l._pickedUpMesh=null,l._meshPickProceed=!1,l._updatePointerPosition(e),d.preventDefaultOnPointerUp&&u&&(e.preventDefault(),u.focus()),l._initClickEvent(d.onPrePointerObservable,d.onPointerObservable,e,(function(t,i){if(d.onPrePointerObservable.hasObservers()&&!t.ignore){if(!t.hasSwiped){if(t.singleClick&&d.onPrePointerObservable.hasSpecificMask(r.a.POINTERTAP)&&l._checkPrePointerObservable(null,e,r.a.POINTERTAP))return;if(t.doubleClick&&d.onPrePointerObservable.hasSpecificMask(r.a.POINTERDOUBLETAP)&&l._checkPrePointerObservable(null,e,r.a.POINTERDOUBLETAP))return}if(l._checkPrePointerObservable(null,e,r.a.POINTERUP))return}l._pointerCaptures[e.pointerId]&&(l._pointerCaptures[e.pointerId]=!1,(d.cameraToUseForPointers||d.activeCamera)&&(d.pointerUpPredicate||(d.pointerUpPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!d.cameraToUseForPointers||0!=(d.cameraToUseForPointers.layerMask&e.layerMask))}),!l._meshPickProceed&&(n.a&&n.a.HasTriggers||d.onPointerObservable.hasObservers())&&l._initActionManager(null,t),i||(i=l._currentPickResult),l._processPointerUp(i,e,t),l._previousPickResult=l._currentPickResult))})))},this._onKeyDown=function(e){var t=h.a.KEYDOWN;if(d.onPreKeyboardObservable.hasObservers()){var i=new h.c(t,e);if(d.onPreKeyboardObservable.notifyObservers(i,t),i.skipOnPointerObservable)return}if(d.onKeyboardObservable.hasObservers()){i=new h.b(t,e);d.onKeyboardObservable.notifyObservers(i,t)}d.actionManager&&d.actionManager.processTrigger(14,o.a.CreateNewFromScene(d,e))},this._onKeyUp=function(e){var t=h.a.KEYUP;if(d.onPreKeyboardObservable.hasObservers()){var i=new h.c(t,e);if(d.onPreKeyboardObservable.notifyObservers(i,t),i.skipOnPointerObservable)return}if(d.onKeyboardObservable.hasObservers()){i=new h.b(t,e);d.onKeyboardObservable.notifyObservers(i,t)}d.actionManager&&d.actionManager.processTrigger(15,o.a.CreateNewFromScene(d,e))},this._onCanvasFocusObserver=f.onCanvasFocusObservable.add((p=function(){u&&(u.addEventListener("keydown",l._onKeyDown,!1),u.addEventListener("keyup",l._onKeyUp,!1))},document.activeElement===u&&p(),p)),this._onCanvasBlurObserver=f.onCanvasBlurObservable.add((function(){u&&(u.removeEventListener("keydown",l._onKeyDown),u.removeEventListener("keyup",l._onKeyUp))}));var _=a.b.GetPointerPrefix();if(s&&(u.addEventListener(_+"move",this._onPointerMove,!1),this._wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",u.addEventListener(this._wheelEventName,this._onPointerMove,!1)),i&&u.addEventListener(_+"down",this._onPointerDown,!1),t){var g=d.getEngine().getHostWindow();g&&g.addEventListener(_+"up",this._onPointerUp,!1)}}},e.prototype.detachControl=function(){var e=a.b.GetPointerPrefix(),t=this._scene.getEngine().getInputElement(),i=this._scene.getEngine();t&&(t.removeEventListener(e+"move",this._onPointerMove),t.removeEventListener(this._wheelEventName,this._onPointerMove),t.removeEventListener(e+"down",this._onPointerDown),window.removeEventListener(e+"up",this._onPointerUp),this._onCanvasBlurObserver&&i.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&i.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),t.removeEventListener("keydown",this._onKeyDown),t.removeEventListener("keyup",this._onKeyUp),this._scene.doNotHandleCursors||(t.style.cursor=this._scene.defaultCursor))},e.prototype.setPointerOverMesh=function(e){var t;this._pointerOverMesh!==e&&(this._pointerOverMesh&&(t=this._pointerOverMesh._getActionManagerForTrigger(10))&&t.processTrigger(10,o.a.CreateNew(this._pointerOverMesh)),this._pointerOverMesh=e,this._pointerOverMesh&&(t=this._pointerOverMesh._getActionManagerForTrigger(9))&&t.processTrigger(9,o.a.CreateNew(this._pointerOverMesh)))},e.prototype.getPointerOverMesh=function(){return this._pointerOverMesh},e.DragMovementThreshold=10,e.LongPressDelay=500,e.DoubleClickDelay=300,e.ExclusiveDoubleClickMode=!1,e}()}}]);