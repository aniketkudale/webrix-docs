(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"98Qd":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return u}));var o=n("mrSG"),i=n("/SR9"),a=function(){function t(){}return t.POINTERDOWN=1,t.POINTERUP=2,t.POINTERMOVE=4,t.POINTERWHEEL=8,t.POINTERPICK=16,t.POINTERTAP=32,t.POINTERDOUBLETAP=64,t}(),s=function(t,e){this.type=t,this.event=e},r=function(t){function e(e,n,o,a){var s=t.call(this,e,n)||this;return s.ray=null,s.skipOnPointerObservable=!1,s.localPosition=new i.d(o,a),s}return Object(o.c)(e,t),e}(s),u=function(t){function e(e,n,o){var i=t.call(this,e,n)||this;return i.pickInfo=o,i}return Object(o.c)(e,t),e}(s)},K1vB:function(t,e,n){"use strict";var o,i=n("tVVT"),a=n("Yap0"),s=n("ps+7"),r=n("h87I"),u=n("mrSG"),h=n("/SR9"),d=n("2/Cc"),c=n("e2Mr"),p=n("M9Dn");!function(t){t[t.VIVE=0]="VIVE",t[t.OCULUS=1]="OCULUS",t[t.WINDOWS=2]="WINDOWS",t[t.GEAR_VR=3]="GEAR_VR",t[t.DAYDREAM=4]="DAYDREAM",t[t.GENERIC=5]="GENERIC"}(o||(o={}));var b,l,_=function(){function t(){}return t.InitiateController=function(t){for(var e=0,n=this._ControllerFactories;e<n.length;e++){var o=n[e];if(o.canCreate(t))return o.create(t)}if(this._DefaultControllerFactory)return this._DefaultControllerFactory(t);throw"The type of gamepad you are trying to load needs to be imported first or is not supported."},t._ControllerFactories=[],t._DefaultControllerFactory=null,t}();!function(t){function e(e){var n=t.call(this,e.id,e.index,e)||this;return n.isXR=!1,n._deviceRoomPosition=h.e.Zero(),n._deviceRoomRotationQuaternion=new h.b,n.devicePosition=h.e.Zero(),n.deviceRotationQuaternion=new h.b,n.deviceScaleFactor=1,n._trackPosition=!0,n._maxRotationDistFromHeadset=Math.PI/5,n._draggedRoomRotation=0,n._leftHandSystemQuaternion=new h.b,n._deviceToWorld=h.a.Identity(),n._pointingPoseNode=null,n._workingMatrix=h.a.Identity(),n._meshAttachedObservable=new s.a,n.type=p.a.POSE_ENABLED,n.controllerType=o.GENERIC,n.position=h.e.Zero(),n.rotationQuaternion=new h.b,n._calculatedPosition=h.e.Zero(),n._calculatedRotation=new h.b,h.b.RotationYawPitchRollToRef(Math.PI,0,0,n._leftHandSystemQuaternion),n}Object(u.c)(e,t),e.prototype._disableTrackPosition=function(t){this._trackPosition&&(this._calculatedPosition.copyFrom(t),this._trackPosition=!1)},e.prototype.update=function(){t.prototype.update.call(this),this._updatePoseAndMesh()},e.prototype._updatePoseAndMesh=function(){if(!this.isXR){var t=this.browserGamepad.pose;if(this.updateFromDevice(t),!this._trackPosition&&c.a.LastCreatedScene&&c.a.LastCreatedScene.activeCamera&&c.a.LastCreatedScene.activeCamera.devicePosition)if((e=c.a.LastCreatedScene.activeCamera)._computeDevicePosition(),this._deviceToWorld.setTranslation(e.devicePosition),e.deviceRotationQuaternion){var e;(e=e)._deviceRoomRotationQuaternion.toEulerAnglesToRef(h.c.Vector3[0]);var n=Math.atan2(Math.sin(h.c.Vector3[0].y-this._draggedRoomRotation),Math.cos(h.c.Vector3[0].y-this._draggedRoomRotation));if(Math.abs(n)>this._maxRotationDistFromHeadset){var o=n-(n<0?-this._maxRotationDistFromHeadset:this._maxRotationDistFromHeadset);this._draggedRoomRotation+=o;var i=Math.sin(-o),a=Math.cos(-o);this._calculatedPosition.x=this._calculatedPosition.x*a-this._calculatedPosition.z*i,this._calculatedPosition.z=this._calculatedPosition.x*i+this._calculatedPosition.z*a}}h.e.TransformCoordinatesToRef(this._calculatedPosition,this._deviceToWorld,this.devicePosition),this._deviceToWorld.getRotationMatrixToRef(this._workingMatrix),h.b.FromRotationMatrixToRef(this._workingMatrix,this.deviceRotationQuaternion),this.deviceRotationQuaternion.multiplyInPlace(this._calculatedRotation),this._mesh&&(this._mesh.position.copyFrom(this.devicePosition),this._mesh.rotationQuaternion&&this._mesh.rotationQuaternion.copyFrom(this.deviceRotationQuaternion))}},e.prototype.updateFromDevice=function(t){if(!this.isXR&&t){this.rawPose=t,t.position&&(this._deviceRoomPosition.copyFromFloats(t.position[0],t.position[1],-t.position[2]),this._mesh&&this._mesh.getScene().useRightHandedSystem&&(this._deviceRoomPosition.z*=-1),this._trackPosition&&this._deviceRoomPosition.scaleToRef(this.deviceScaleFactor,this._calculatedPosition),this._calculatedPosition.addInPlace(this.position));var e=this.rawPose;t.orientation&&e.orientation&&4===e.orientation.length&&(this._deviceRoomRotationQuaternion.copyFromFloats(e.orientation[0],e.orientation[1],-e.orientation[2],-e.orientation[3]),this._mesh&&(this._mesh.getScene().useRightHandedSystem?(this._deviceRoomRotationQuaternion.z*=-1,this._deviceRoomRotationQuaternion.w*=-1):this._deviceRoomRotationQuaternion.multiplyToRef(this._leftHandSystemQuaternion,this._deviceRoomRotationQuaternion)),this._deviceRoomRotationQuaternion.multiplyToRef(this.rotationQuaternion,this._calculatedRotation))}},e.prototype.attachToMesh=function(t){if(this._mesh&&(this._mesh.parent=null),this._mesh=t,this._poseControlledCamera&&(this._mesh.parent=this._poseControlledCamera),this._mesh.rotationQuaternion||(this._mesh.rotationQuaternion=new h.b),!this.isXR&&(this._updatePoseAndMesh(),this._pointingPoseNode)){for(var e=[],n=this._pointingPoseNode;n.parent;)e.push(n.parent),n=n.parent;e.reverse().forEach((function(t){t.computeWorldMatrix(!0)}))}this._meshAttachedObservable.notifyObservers(t)},e.prototype.attachToPoseControlledCamera=function(t){this._poseControlledCamera=t,this._mesh&&(this._mesh.parent=this._poseControlledCamera)},e.prototype.dispose=function(){this._mesh&&this._mesh.dispose(),this._mesh=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"mesh",{get:function(){return this._mesh},enumerable:!0,configurable:!0}),e.prototype.getForwardRay=function(t){if(void 0===t&&(t=100),!this.mesh)return new d.a(h.e.Zero(),new h.e(0,0,1),t);var e=this._pointingPoseNode?this._pointingPoseNode.getWorldMatrix():this.mesh.getWorldMatrix(),n=e.getTranslation(),o=new h.e(0,0,-1),i=h.e.TransformNormal(o,e),a=h.e.Normalize(i);return new d.a(n,a,t)},e.POINTING_POSE="POINTING_POSE"}(p.a);!function(t){t[t.A=0]="A",t[t.B=1]="B",t[t.X=2]="X",t[t.Y=3]="Y",t[t.LB=4]="LB",t[t.RB=5]="RB",t[t.Back=8]="Back",t[t.Start=9]="Start",t[t.LeftStick=10]="LeftStick",t[t.RightStick=11]="RightStick"}(b||(b={})),function(t){t[t.Up=12]="Up",t[t.Down=13]="Down",t[t.Left=14]="Left",t[t.Right=15]="Right"}(l||(l={}));var f,g,m=function(t){function e(e,n,o,i){void 0===i&&(i=!1);var a=t.call(this,e,n,o,0,1,2,3)||this;return a._leftTrigger=0,a._rightTrigger=0,a.onButtonDownObservable=new s.a,a.onButtonUpObservable=new s.a,a.onPadDownObservable=new s.a,a.onPadUpObservable=new s.a,a._buttonA=0,a._buttonB=0,a._buttonX=0,a._buttonY=0,a._buttonBack=0,a._buttonStart=0,a._buttonLB=0,a._buttonRB=0,a._buttonLeftStick=0,a._buttonRightStick=0,a._dPadUp=0,a._dPadDown=0,a._dPadLeft=0,a._dPadRight=0,a._isXboxOnePad=!1,a.type=p.a.XBOX,a._isXboxOnePad=i,a}return Object(u.c)(e,t),e.prototype.onlefttriggerchanged=function(t){this._onlefttriggerchanged=t},e.prototype.onrighttriggerchanged=function(t){this._onrighttriggerchanged=t},Object.defineProperty(e.prototype,"leftTrigger",{get:function(){return this._leftTrigger},set:function(t){this._onlefttriggerchanged&&this._leftTrigger!==t&&this._onlefttriggerchanged(t),this._leftTrigger=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTrigger",{get:function(){return this._rightTrigger},set:function(t){this._onrighttriggerchanged&&this._rightTrigger!==t&&this._onrighttriggerchanged(t),this._rightTrigger=t},enumerable:!0,configurable:!0}),e.prototype.onbuttondown=function(t){this._onbuttondown=t},e.prototype.onbuttonup=function(t){this._onbuttonup=t},e.prototype.ondpaddown=function(t){this._ondpaddown=t},e.prototype.ondpadup=function(t){this._ondpadup=t},e.prototype._setButtonValue=function(t,e,n){return t!==e&&(1===t&&(this._onbuttondown&&this._onbuttondown(n),this.onButtonDownObservable.notifyObservers(n)),0===t&&(this._onbuttonup&&this._onbuttonup(n),this.onButtonUpObservable.notifyObservers(n))),t},e.prototype._setDPadValue=function(t,e,n){return t!==e&&(1===t&&(this._ondpaddown&&this._ondpaddown(n),this.onPadDownObservable.notifyObservers(n)),0===t&&(this._ondpadup&&this._ondpadup(n),this.onPadUpObservable.notifyObservers(n))),t},Object.defineProperty(e.prototype,"buttonA",{get:function(){return this._buttonA},set:function(t){this._buttonA=this._setButtonValue(t,this._buttonA,b.A)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonB",{get:function(){return this._buttonB},set:function(t){this._buttonB=this._setButtonValue(t,this._buttonB,b.B)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonX",{get:function(){return this._buttonX},set:function(t){this._buttonX=this._setButtonValue(t,this._buttonX,b.X)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonY",{get:function(){return this._buttonY},set:function(t){this._buttonY=this._setButtonValue(t,this._buttonY,b.Y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonStart",{get:function(){return this._buttonStart},set:function(t){this._buttonStart=this._setButtonValue(t,this._buttonStart,b.Start)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonBack",{get:function(){return this._buttonBack},set:function(t){this._buttonBack=this._setButtonValue(t,this._buttonBack,b.Back)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonLB",{get:function(){return this._buttonLB},set:function(t){this._buttonLB=this._setButtonValue(t,this._buttonLB,b.LB)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonRB",{get:function(){return this._buttonRB},set:function(t){this._buttonRB=this._setButtonValue(t,this._buttonRB,b.RB)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonLeftStick",{get:function(){return this._buttonLeftStick},set:function(t){this._buttonLeftStick=this._setButtonValue(t,this._buttonLeftStick,b.LeftStick)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonRightStick",{get:function(){return this._buttonRightStick},set:function(t){this._buttonRightStick=this._setButtonValue(t,this._buttonRightStick,b.RightStick)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadUp",{get:function(){return this._dPadUp},set:function(t){this._dPadUp=this._setDPadValue(t,this._dPadUp,l.Up)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadDown",{get:function(){return this._dPadDown},set:function(t){this._dPadDown=this._setDPadValue(t,this._dPadDown,l.Down)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadLeft",{get:function(){return this._dPadLeft},set:function(t){this._dPadLeft=this._setDPadValue(t,this._dPadLeft,l.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadRight",{get:function(){return this._dPadRight},set:function(t){this._dPadRight=this._setDPadValue(t,this._dPadRight,l.Right)},enumerable:!0,configurable:!0}),e.prototype.update=function(){t.prototype.update.call(this),this._isXboxOnePad,this.buttonA=this.browserGamepad.buttons[0].value,this.buttonB=this.browserGamepad.buttons[1].value,this.buttonX=this.browserGamepad.buttons[2].value,this.buttonY=this.browserGamepad.buttons[3].value,this.buttonLB=this.browserGamepad.buttons[4].value,this.buttonRB=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.buttons[6].value,this.rightTrigger=this.browserGamepad.buttons[7].value,this.buttonBack=this.browserGamepad.buttons[8].value,this.buttonStart=this.browserGamepad.buttons[9].value,this.buttonLeftStick=this.browserGamepad.buttons[10].value,this.buttonRightStick=this.browserGamepad.buttons[11].value,this.dPadUp=this.browserGamepad.buttons[12].value,this.dPadDown=this.browserGamepad.buttons[13].value,this.dPadLeft=this.browserGamepad.buttons[14].value,this.dPadRight=this.browserGamepad.buttons[15].value},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear(),this.onPadDownObservable.clear(),this.onPadUpObservable.clear()},e}(p.a),y=n("qUIE");!function(t){t[t.Cross=0]="Cross",t[t.Circle=1]="Circle",t[t.Square=2]="Square",t[t.Triangle=3]="Triangle",t[t.L1=4]="L1",t[t.R1=5]="R1",t[t.Share=8]="Share",t[t.Options=9]="Options",t[t.LeftStick=10]="LeftStick",t[t.RightStick=11]="RightStick"}(f||(f={})),function(t){t[t.Up=12]="Up",t[t.Down=13]="Down",t[t.Left=14]="Left",t[t.Right=15]="Right"}(g||(g={}));var v=function(t){function e(e,n,o){var i=t.call(this,e.replace("STANDARD GAMEPAD","SONY PLAYSTATION DUALSHOCK"),n,o,0,1,2,3)||this;return i._leftTrigger=0,i._rightTrigger=0,i.onButtonDownObservable=new s.a,i.onButtonUpObservable=new s.a,i.onPadDownObservable=new s.a,i.onPadUpObservable=new s.a,i._buttonCross=0,i._buttonCircle=0,i._buttonSquare=0,i._buttonTriangle=0,i._buttonShare=0,i._buttonOptions=0,i._buttonL1=0,i._buttonR1=0,i._buttonLeftStick=0,i._buttonRightStick=0,i._dPadUp=0,i._dPadDown=0,i._dPadLeft=0,i._dPadRight=0,i.type=p.a.DUALSHOCK,i}return Object(u.c)(e,t),e.prototype.onlefttriggerchanged=function(t){this._onlefttriggerchanged=t},e.prototype.onrighttriggerchanged=function(t){this._onrighttriggerchanged=t},Object.defineProperty(e.prototype,"leftTrigger",{get:function(){return this._leftTrigger},set:function(t){this._onlefttriggerchanged&&this._leftTrigger!==t&&this._onlefttriggerchanged(t),this._leftTrigger=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTrigger",{get:function(){return this._rightTrigger},set:function(t){this._onrighttriggerchanged&&this._rightTrigger!==t&&this._onrighttriggerchanged(t),this._rightTrigger=t},enumerable:!0,configurable:!0}),e.prototype.onbuttondown=function(t){this._onbuttondown=t},e.prototype.onbuttonup=function(t){this._onbuttonup=t},e.prototype.ondpaddown=function(t){this._ondpaddown=t},e.prototype.ondpadup=function(t){this._ondpadup=t},e.prototype._setButtonValue=function(t,e,n){return t!==e&&(1===t&&(this._onbuttondown&&this._onbuttondown(n),this.onButtonDownObservable.notifyObservers(n)),0===t&&(this._onbuttonup&&this._onbuttonup(n),this.onButtonUpObservable.notifyObservers(n))),t},e.prototype._setDPadValue=function(t,e,n){return t!==e&&(1===t&&(this._ondpaddown&&this._ondpaddown(n),this.onPadDownObservable.notifyObservers(n)),0===t&&(this._ondpadup&&this._ondpadup(n),this.onPadUpObservable.notifyObservers(n))),t},Object.defineProperty(e.prototype,"buttonCross",{get:function(){return this._buttonCross},set:function(t){this._buttonCross=this._setButtonValue(t,this._buttonCross,f.Cross)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonCircle",{get:function(){return this._buttonCircle},set:function(t){this._buttonCircle=this._setButtonValue(t,this._buttonCircle,f.Circle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonSquare",{get:function(){return this._buttonSquare},set:function(t){this._buttonSquare=this._setButtonValue(t,this._buttonSquare,f.Square)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonTriangle",{get:function(){return this._buttonTriangle},set:function(t){this._buttonTriangle=this._setButtonValue(t,this._buttonTriangle,f.Triangle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonOptions",{get:function(){return this._buttonOptions},set:function(t){this._buttonOptions=this._setButtonValue(t,this._buttonOptions,f.Options)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonShare",{get:function(){return this._buttonShare},set:function(t){this._buttonShare=this._setButtonValue(t,this._buttonShare,f.Share)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonL1",{get:function(){return this._buttonL1},set:function(t){this._buttonL1=this._setButtonValue(t,this._buttonL1,f.L1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonR1",{get:function(){return this._buttonR1},set:function(t){this._buttonR1=this._setButtonValue(t,this._buttonR1,f.R1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonLeftStick",{get:function(){return this._buttonLeftStick},set:function(t){this._buttonLeftStick=this._setButtonValue(t,this._buttonLeftStick,f.LeftStick)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonRightStick",{get:function(){return this._buttonRightStick},set:function(t){this._buttonRightStick=this._setButtonValue(t,this._buttonRightStick,f.RightStick)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadUp",{get:function(){return this._dPadUp},set:function(t){this._dPadUp=this._setDPadValue(t,this._dPadUp,g.Up)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadDown",{get:function(){return this._dPadDown},set:function(t){this._dPadDown=this._setDPadValue(t,this._dPadDown,g.Down)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadLeft",{get:function(){return this._dPadLeft},set:function(t){this._dPadLeft=this._setDPadValue(t,this._dPadLeft,g.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dPadRight",{get:function(){return this._dPadRight},set:function(t){this._dPadRight=this._setDPadValue(t,this._dPadRight,g.Right)},enumerable:!0,configurable:!0}),e.prototype.update=function(){t.prototype.update.call(this),this.buttonCross=this.browserGamepad.buttons[0].value,this.buttonCircle=this.browserGamepad.buttons[1].value,this.buttonSquare=this.browserGamepad.buttons[2].value,this.buttonTriangle=this.browserGamepad.buttons[3].value,this.buttonL1=this.browserGamepad.buttons[4].value,this.buttonR1=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.buttons[6].value,this.rightTrigger=this.browserGamepad.buttons[7].value,this.buttonShare=this.browserGamepad.buttons[8].value,this.buttonOptions=this.browserGamepad.buttons[9].value,this.buttonLeftStick=this.browserGamepad.buttons[10].value,this.buttonRightStick=this.browserGamepad.buttons[11].value,this.dPadUp=this.browserGamepad.buttons[12].value,this.dPadDown=this.browserGamepad.buttons[13].value,this.dPadLeft=this.browserGamepad.buttons[14].value,this.dPadRight=this.browserGamepad.buttons[15].value},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear(),this.onPadDownObservable.clear(),this.onPadUpObservable.clear()},e}(p.a),P=function(){function t(t){var e=this;if(this._scene=t,this._babylonGamepads=[],this._oneGamepadConnected=!1,this._isMonitoring=!1,this.onGamepadDisconnectedObservable=new s.a,r.a.IsWindowObjectExist()?(this._gamepadEventSupported="GamepadEvent"in window,this._gamepadSupport=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads):this._gamepadEventSupported=!1,this.onGamepadConnectedObservable=new s.a((function(t){for(var n in e._babylonGamepads){var o=e._babylonGamepads[n];o&&o._isConnected&&e.onGamepadConnectedObservable.notifyObserver(t,o)}})),this._onGamepadConnectedEvent=function(t){var n,o=t.gamepad;o.index in e._babylonGamepads&&e._babylonGamepads[o.index].isConnected||(e._babylonGamepads[o.index]?((n=e._babylonGamepads[o.index]).browserGamepad=o,n._isConnected=!0):n=e._addNewGamepad(o),e.onGamepadConnectedObservable.notifyObservers(n),e._startMonitoringGamepads())},this._onGamepadDisconnectedEvent=function(t){var n=t.gamepad;for(var o in e._babylonGamepads)if(e._babylonGamepads[o].index===n.index){var i=e._babylonGamepads[o];i._isConnected=!1,e.onGamepadDisconnectedObservable.notifyObservers(i),i.dispose&&i.dispose();break}},this._gamepadSupport)if(this._updateGamepadObjects(),this._babylonGamepads.length&&this._startMonitoringGamepads(),this._gamepadEventSupported){var n=this._scene?this._scene.getEngine().getHostWindow():window;n&&(n.addEventListener("gamepadconnected",this._onGamepadConnectedEvent,!1),n.addEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent,!1))}else this._startMonitoringGamepads()}return Object.defineProperty(t.prototype,"gamepads",{get:function(){return this._babylonGamepads},enumerable:!0,configurable:!0}),t.prototype.getGamepadByType=function(t){void 0===t&&(t=p.a.XBOX);for(var e=0,n=this._babylonGamepads;e<n.length;e++){var o=n[e];if(o&&o.type===t)return o}return null},t.prototype.dispose=function(){this._gamepadEventSupported&&(this._onGamepadConnectedEvent&&window.removeEventListener("gamepadconnected",this._onGamepadConnectedEvent),this._onGamepadDisconnectedEvent&&window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent),this._onGamepadConnectedEvent=null,this._onGamepadDisconnectedEvent=null),this._babylonGamepads.forEach((function(t){t.dispose()})),this.onGamepadConnectedObservable.clear(),this.onGamepadDisconnectedObservable.clear(),this._oneGamepadConnected=!1,this._stopMonitoringGamepads(),this._babylonGamepads=[]},t.prototype._addNewGamepad=function(t){var e;this._oneGamepadConnected||(this._oneGamepadConnected=!0);var n=-1!==t.id.search("054c"),o=-1!==t.id.search("Xbox One");return e=o||-1!==t.id.search("Xbox 360")||-1!==t.id.search("xinput")?new m(t.id,t.index,t,o):n?new v(t.id,t.index,t):t.pose?_.InitiateController(t):new p.b(t.id,t.index,t),this._babylonGamepads[e.index]=e,e},t.prototype._startMonitoringGamepads=function(){this._isMonitoring||(this._isMonitoring=!0,this._scene||this._checkGamepadsStatus())},t.prototype._stopMonitoringGamepads=function(){this._isMonitoring=!1},t.prototype._checkGamepadsStatus=function(){var t=this;for(var e in this._updateGamepadObjects(),this._babylonGamepads){var n=this._babylonGamepads[e];n&&n.isConnected&&n.update()}this._isMonitoring&&!this._scene&&y.a.QueueNewFrame((function(){t._checkGamepadsStatus()}))},t.prototype._updateGamepadObjects=function(){for(var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],e=0;e<t.length;e++){var n=t[e];if(n)if(this._babylonGamepads[n.index])this._babylonGamepads[e].browserGamepad=n,this._babylonGamepads[e].isConnected||(this._babylonGamepads[e]._isConnected=!0,this.onGamepadConnectedObservable.notifyObservers(this._babylonGamepads[e]));else{var o=this._addNewGamepad(n);this.onGamepadConnectedObservable.notifyObservers(o)}}},t}(),w=n("g739"),O=n("5Jap"),G=n("HcSi"),S=n("gJ7H");Object.defineProperty(i.a.prototype,"gamepadManager",{get:function(){if(!this._gamepadManager){this._gamepadManager=new P(this);var t=this._getComponent(a.a.NAME_GAMEPAD);t||(t=new R(this),this._addComponent(t))}return this._gamepadManager},enumerable:!0,configurable:!0}),w.a.prototype.addGamepad=function(){return this.add(new O.a),this},G.a.prototype.addGamepad=function(){return this.add(new S.a),this};var R=function(){function t(t){this.name=a.a.NAME_GAMEPAD,this.scene=t}return t.prototype.register=function(){this.scene._beforeCameraUpdateStage.registerStep(a.a.STEP_BEFORECAMERAUPDATE_GAMEPAD,this,this._beforeCameraUpdate)},t.prototype.rebuild=function(){},t.prototype.dispose=function(){var t=this.scene._gamepadManager;t&&(t.dispose(),this.scene._gamepadManager=null)},t.prototype._beforeCameraUpdate=function(){var t=this.scene._gamepadManager;t&&t._isMonitoring&&t._checkGamepadsStatus()},t}()},M9Dn:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var o=n("mrSG"),i=n("ps+7"),a=function(){function t(e,n,o,i,a,s,r){void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=2),void 0===r&&(r=3),this.id=e,this.index=n,this.browserGamepad=o,this._leftStick={x:0,y:0},this._rightStick={x:0,y:0},this._isConnected=!0,this._invertLeftStickY=!1,this.type=t.GAMEPAD,this._leftStickAxisX=i,this._leftStickAxisY=a,this._rightStickAxisX=s,this._rightStickAxisY=r,this.browserGamepad.axes.length>=2&&(this._leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]}),this.browserGamepad.axes.length>=4&&(this._rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})}return Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!0,configurable:!0}),t.prototype.onleftstickchanged=function(t){this._onleftstickchanged=t},t.prototype.onrightstickchanged=function(t){this._onrightstickchanged=t},Object.defineProperty(t.prototype,"leftStick",{get:function(){return this._leftStick},set:function(t){!this._onleftstickchanged||this._leftStick.x===t.x&&this._leftStick.y===t.y||this._onleftstickchanged(t),this._leftStick=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightStick",{get:function(){return this._rightStick},set:function(t){!this._onrightstickchanged||this._rightStick.x===t.x&&this._rightStick.y===t.y||this._onrightstickchanged(t),this._rightStick=t},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._leftStick&&(this.leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]},this._invertLeftStickY&&(this.leftStick.y*=-1)),this._rightStick&&(this.rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})},t.prototype.dispose=function(){},t.GAMEPAD=0,t.GENERIC=1,t.XBOX=2,t.POSE_ENABLED=3,t.DUALSHOCK=4,t}(),s=function(t){function e(e,n,o){var s=t.call(this,e,n,o)||this;return s.onButtonDownObservable=new i.a,s.onButtonUpObservable=new i.a,s.type=a.GENERIC,s._buttons=new Array(o.buttons.length),s}return Object(o.c)(e,t),e.prototype.onbuttondown=function(t){this._onbuttondown=t},e.prototype.onbuttonup=function(t){this._onbuttonup=t},e.prototype._setButtonValue=function(t,e,n){return t!==e&&(1===t&&(this._onbuttondown&&this._onbuttondown(n),this.onButtonDownObservable.notifyObservers(n)),0===t&&(this._onbuttonup&&this._onbuttonup(n),this.onButtonUpObservable.notifyObservers(n))),t},e.prototype.update=function(){t.prototype.update.call(this);for(var e=0;e<this._buttons.length;e++)this._buttons[e]=this._setButtonValue(this.browserGamepad.buttons[e].value,this._buttons[e],e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear()},e}(a)},jSHE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var o=n("mrSG"),i=function(){function t(){}return t.KEYDOWN=1,t.KEYUP=2,t}(),a=function(t,e){this.type=t,this.event=e},s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type=e,o.event=n,o.skipOnPointerObservable=!1,o}return Object(o.c)(e,t),e}(a)}}]);