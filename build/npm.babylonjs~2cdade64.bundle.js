(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{C1Wc:function(t,i,e){"use strict";e.d(i,"a",(function(){return h})),e.d(i,"b",(function(){return u}));var r=e("mrSG"),n=e("y4Ty"),o=e("1m8g"),s=e("T5H4"),a=e("lJNW"),h=function(){function t(){this._materialDefines=null,this._materialEffect=null}return Object.defineProperty(t.prototype,"materialDefines",{get:function(){return this._materialDefines},set:function(t){this._materialDefines=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return this._materialEffect},enumerable:!0,configurable:!0}),t.prototype.setEffect=function(t,i){void 0===i&&(i=null),this._materialEffect!==t?(this._materialDefines=i,this._materialEffect=t):t||(this._materialDefines=null)},t}(),u=function(t){function i(i,e,r,n,o,s,a,h){void 0===h&&(h=!0);var u=t.call(this)||this;return u.materialIndex=i,u.verticesStart=e,u.verticesCount=r,u.indexStart=n,u.indexCount=o,u._linesIndexCount=0,u._linesIndexBuffer=null,u._lastColliderWorldVertices=null,u._lastColliderTransformMatrix=null,u._renderId=0,u._alphaIndex=0,u._distanceToCamera=0,u._currentMaterial=null,u._mesh=s,u._renderingMesh=a||s,s.subMeshes.push(u),u._trianglePlanes=[],u._id=s.subMeshes.length-1,h&&(u.refreshBoundingInfo(),s.computeWorldMatrix(!0)),u}return Object(r.c)(i,t),i.AddToMesh=function(t,e,r,n,o,s,a,h){return void 0===h&&(h=!0),new i(t,e,r,n,o,s,a,h)},Object.defineProperty(i.prototype,"IsGlobal",{get:function(){return 0===this.verticesStart&&this.verticesCount===this._mesh.getTotalVertices()},enumerable:!0,configurable:!0}),i.prototype.getBoundingInfo=function(){return this.IsGlobal?this._mesh.getBoundingInfo():this._boundingInfo},i.prototype.setBoundingInfo=function(t){return this._boundingInfo=t,this},i.prototype.getMesh=function(){return this._mesh},i.prototype.getRenderingMesh=function(){return this._renderingMesh},i.prototype.getMaterial=function(){var t=this._renderingMesh.material;if(null==t)return this._mesh.getScene().defaultMaterial;if(t.getSubMaterial){var i=t.getSubMaterial(this.materialIndex);return this._currentMaterial!==i&&(this._currentMaterial=i,this._materialDefines=null),i}return t},i.prototype.refreshBoundingInfo=function(t){if(void 0===t&&(t=null),this._lastColliderWorldVertices=null,this.IsGlobal||!this._renderingMesh||!this._renderingMesh.geometry)return this;if(t||(t=this._renderingMesh.getVerticesData(n.b.PositionKind)),!t)return this._boundingInfo=this._mesh.getBoundingInfo(),this;var i,e=this._renderingMesh.getIndices();if(0===this.indexStart&&this.indexCount===e.length){var r=this._renderingMesh.getBoundingInfo();i={minimum:r.minimum.clone(),maximum:r.maximum.clone()}}else i=Object(a.b)(t,e,this.indexStart,this.indexCount,this._renderingMesh.geometry.boundingBias);return this._boundingInfo?this._boundingInfo.reConstruct(i.minimum,i.maximum):this._boundingInfo=new s.a(i.minimum,i.maximum),this},i.prototype._checkCollision=function(t){return this.getBoundingInfo()._checkCollision(t)},i.prototype.updateBoundingInfo=function(t){var i=this.getBoundingInfo();return i||(this.refreshBoundingInfo(),i=this.getBoundingInfo()),i&&i.update(t),this},i.prototype.isInFrustum=function(t){var i=this.getBoundingInfo();return!!i&&i.isInFrustum(t,this._mesh.cullingStrategy)},i.prototype.isCompletelyInFrustum=function(t){var i=this.getBoundingInfo();return!!i&&i.isCompletelyInFrustum(t)},i.prototype.render=function(t){return this._renderingMesh.render(this,t,this._mesh._internalAbstractMeshDataInfo._actAsRegularMesh?this._mesh:void 0),this},i.prototype._getLinesIndexBuffer=function(t,i){if(!this._linesIndexBuffer){for(var e=[],r=this.indexStart;r<this.indexStart+this.indexCount;r+=3)e.push(t[r],t[r+1],t[r+1],t[r+2],t[r+2],t[r]);this._linesIndexBuffer=i.createIndexBuffer(e),this._linesIndexCount=e.length}return this._linesIndexBuffer},i.prototype.canIntersects=function(t){var i=this.getBoundingInfo();return!!i&&t.intersectsBox(i.boundingBox)},i.prototype.intersects=function(t,i,e,r,n){var o=this.getMaterial();if(!o)return null;var s=3,a=!1;switch(o.fillMode){case 3:case 4:case 5:case 6:case 8:return null;case 7:s=1,a=!0}return"InstancedLinesMesh"===this._mesh.getClassName()||"LinesMesh"===this._mesh.getClassName()?e.length?this._intersectLines(t,i,e,this._mesh.intersectionThreshold,r):this._intersectUnIndexedLines(t,i,e,this._mesh.intersectionThreshold,r):!e.length&&this._mesh._unIndexed?this._intersectUnIndexedTriangles(t,i,e,r,n):this._intersectTriangles(t,i,e,s,a,r,n)},i.prototype._intersectLines=function(t,i,e,r,n){for(var s=null,a=this.indexStart;a<this.indexStart+this.indexCount;a+=2){var h=i[e[a]],u=i[e[a+1]],c=t.intersectionSegment(h,u,r);if(!(c<0)&&((n||!s||c<s.distance)&&((s=new o.a(null,null,c)).faceId=a/2,n)))break}return s},i.prototype._intersectUnIndexedLines=function(t,i,e,r,n){for(var s=null,a=this.verticesStart;a<this.verticesStart+this.verticesCount;a+=2){var h=i[a],u=i[a+1],c=t.intersectionSegment(h,u,r);if(!(c<0)&&((n||!s||c<s.distance)&&((s=new o.a(null,null,c)).faceId=a/2,n)))break}return s},i.prototype._intersectTriangles=function(t,i,e,r,n,o,s){for(var a=null,h=-1,u=this.indexStart;u<this.indexStart+this.indexCount;u+=r){h++;var c=e[u],l=e[u+1],d=e[u+2];if(n&&4294967295===d)u+=2;else{var f=i[c],p=i[l],m=i[d];if(!s||s(f,p,m,t)){var g=t.intersectsTriangle(f,p,m);if(g){if(g.distance<0)continue;if((o||!a||g.distance<a.distance)&&((a=g).faceId=h,o))break}}}}return a},i.prototype._intersectUnIndexedTriangles=function(t,i,e,r,n){for(var o=null,s=this.verticesStart;s<this.verticesStart+this.verticesCount;s+=3){var a=i[s],h=i[s+1],u=i[s+2];if(!n||n(a,h,u,t)){var c=t.intersectsTriangle(a,h,u);if(c){if(c.distance<0)continue;if((r||!o||c.distance<o.distance)&&((o=c).faceId=s/3,r))break}}}return o},i.prototype._rebuild=function(){this._linesIndexBuffer&&(this._linesIndexBuffer=null)},i.prototype.clone=function(t,e){var r=new i(this.materialIndex,this.verticesStart,this.verticesCount,this.indexStart,this.indexCount,t,e,!1);if(!this.IsGlobal){var n=this.getBoundingInfo();if(!n)return r;r._boundingInfo=new s.a(n.minimum,n.maximum)}return r},i.prototype.dispose=function(){this._linesIndexBuffer&&(this._mesh.getScene().getEngine()._releaseBuffer(this._linesIndexBuffer),this._linesIndexBuffer=null);var t=this._mesh.subMeshes.indexOf(this);this._mesh.subMeshes.splice(t,1)},i.prototype.getClassName=function(){return"SubMesh"},i.CreateFromIndices=function(t,e,r,n,o){for(var s=Number.MAX_VALUE,a=-Number.MAX_VALUE,h=(o||n).getIndices(),u=e;u<e+r;u++){var c=h[u];c<s&&(s=c),c>a&&(a=c)}return new i(t,s,a-s+1,e,r,n,o)},i}(h)},I2E9:function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var r=function(t,i){this.distance=t,this.mesh=i}},It3q:function(t,i,e){"use strict";e.d(i,"a",(function(){return f}));var r=e("mrSG"),n=e("uyO6"),o=e("/SR9"),s=e("y4Ty"),a=e("wAMR"),h=e("UtUh"),u=e("qUIE"),c=e("Gldd"),l=function(t){function i(i,e){var r=t.call(this,i.x,i.y)||this;return r.index=e,r}return Object(r.c)(i,t),i}(o.d),d=function(){function t(){this.elements=new Array}return t.prototype.add=function(t){var i=this,e=new Array;return t.forEach((function(t){if(0===e.length||!t.equalsWithEpsilon(e[0])){var r=new l(t,i.elements.length);e.push(r),i.elements.push(r)}})),e},t.prototype.computeBounds=function(){var t=new o.d(this.elements[0].x,this.elements[0].y),i=new o.d(this.elements[0].x,this.elements[0].y);return this.elements.forEach((function(e){e.x<t.x?t.x=e.x:e.x>i.x&&(i.x=e.x),e.y<t.y?t.y=e.y:e.y>i.y&&(i.y=e.y)})),{min:t,max:i,width:i.x-t.x,height:i.y-t.y}},t}(),f=(function(){function t(){}t.Rectangle=function(t,i,e,r){return[new o.d(t,i),new o.d(e,i),new o.d(e,r),new o.d(t,r)]},t.Circle=function(t,i,e,r){void 0===i&&(i=0),void 0===e&&(e=0),void 0===r&&(r=32);for(var n=new Array,s=0,a=2*Math.PI/r,h=0;h<r;h++)n.push(new o.d(i+Math.cos(s)*t,e+Math.sin(s)*t)),s-=a;return n},t.Parse=function(t){var i,e=t.split(/[^-+eE\.\d]+/).map(parseFloat).filter((function(t){return!isNaN(t)})),r=[];for(i=0;i<(2147483646&e.length);i+=2)r.push(new o.d(e[i],e[i+1]));return r},t.StartingAt=function(t,i){return c.a.StartingAt(t,i)}}(),function(){function t(t,i,e,r){var o;void 0===r&&(r=earcut),this._points=new d,this._outlinepoints=new d,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=r,this._name=t,this._scene=e||u.a.LastCreatedScene,o=i instanceof c.a?i.getPoints():i,this._addToepoint(o),this._points.add(o),this._outlinepoints.add(o),void 0===this.bjsEarcut&&n.a.Warn("Earcut was not found, the polygon will not be built.")}return t.prototype._addToepoint=function(t){for(var i=0,e=t;i<e.length;i++){var r=e[i];this._epoints.push(r.x,r.y)}},t.prototype.addHole=function(t){this._points.add(t);var i=new d;return i.add(t),this._holes.push(i),this._eholes.push(this._epoints.length/2),this._addToepoint(t),this},t.prototype.build=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=0);var e=new a.a(this._name,this._scene),r=this.buildVertexData(i);return e.setVerticesData(s.b.PositionKind,r.positions,t),e.setVerticesData(s.b.NormalKind,r.normals,t),e.setVerticesData(s.b.UVKind,r.uvs,t),e.setIndices(r.indices),e},t.prototype.buildVertexData=function(t){var i=this;void 0===t&&(t=0);var e=new h.a,r=new Array,n=new Array,o=new Array,s=this._points.computeBounds();this._points.elements.forEach((function(t){r.push(0,1,0),n.push(t.x,0,t.y),o.push((t.x-s.min.x)/s.width,(t.y-s.min.y)/s.height)}));for(var a=new Array,u=this.bjsEarcut(this._epoints,this._eholes,2),c=0;c<u.length;c++)a.push(u[c]);if(t>0){var l=n.length/3;this._points.elements.forEach((function(i){r.push(0,-1,0),n.push(i.x,-t,i.y),o.push(1-(i.x-s.min.x)/s.width,1-(i.y-s.min.y)/s.height)}));var d=a.length;for(c=0;c<d;c+=3){var f=a[c+0],p=a[c+1],m=a[c+2];a.push(m+l),a.push(p+l),a.push(f+l)}this.addSide(n,r,o,a,s,this._outlinepoints,t,!1),this._holes.forEach((function(e){i.addSide(n,r,o,a,s,e,t,!0)}))}return e.indices=a,e.positions=n,e.normals=r,e.uvs=o,e},t.prototype.addSide=function(t,i,e,r,n,s,a,h){for(var u=t.length/3,c=0,l=0;l<s.elements.length;l++){var d,f=s.elements[l];d=l+1>s.elements.length-1?s.elements[0]:s.elements[l+1],t.push(f.x,0,f.y),t.push(f.x,-a,f.y),t.push(d.x,0,d.y),t.push(d.x,-a,d.y);var p=new o.e(f.x,0,f.y),m=new o.e(d.x,0,d.y).subtract(p),g=new o.e(0,1,0),v=o.e.Cross(m,g);v=v.normalize(),e.push(c/n.width,0),e.push(c/n.width,1),c+=m.length(),e.push(c/n.width,0),e.push(c/n.width,1),h?(i.push(v.x,v.y,v.z),i.push(v.x,v.y,v.z),i.push(v.x,v.y,v.z),i.push(v.x,v.y,v.z),r.push(u),r.push(u+2),r.push(u+1),r.push(u+1),r.push(u+2),r.push(u+3)):(i.push(-v.x,-v.y,-v.z),i.push(-v.x,-v.y,-v.z),i.push(-v.x,-v.y,-v.z),i.push(-v.x,-v.y,-v.z),r.push(u),r.push(u+1),r.push(u+2),r.push(u+1),r.push(u+3),r.push(u+2)),u+=4}},t}())},PjzG:function(t,i,e){"use strict";var r=e("O2A8"),n=e("e993"),o=e("HZbn"),s=e("aXRn"),a=e("H22S"),h=e("5xLc"),u=e("s3JK"),c=e("qq9P"),l=e("IIC5"),d=e("RhQe"),f=e("SgR9"),p=e("eC2D"),m=e("NNSw"),g=e("cykt"),v=e("bnDv"),b=e("2Qj2"),x=e("RV+K"),_=e("dhMq"),y=e("66Nj");!function(){function t(){}t.CreateBox=function(t,i,e){return void 0===e&&(e=null),o.a.CreateBox(t,i,e)},t.CreateTiledBox=function(t,i,e){return void 0===e&&(e=null),s.a.CreateTiledBox(t,i,e)},t.CreateSphere=function(t,i,e){return void 0===e&&(e=null),a.a.CreateSphere(t,i,e)},t.CreateDisc=function(t,i,e){return void 0===e&&(e=null),n.a.CreateDisc(t,i,e)},t.CreateIcoSphere=function(t,i,e){return void 0===e&&(e=null),_.a.CreateIcoSphere(t,i,e)},t.CreateRibbon=function(t,i,e){return void 0===e&&(e=null),r.a.CreateRibbon(t,i,e)},t.CreateCylinder=function(t,i,e){return void 0===e&&(e=null),h.a.CreateCylinder(t,i,e)},t.CreateTorus=function(t,i,e){return void 0===e&&(e=null),u.a.CreateTorus(t,i,e)},t.CreateTorusKnot=function(t,i,e){return void 0===e&&(e=null),c.a.CreateTorusKnot(t,i,e)},t.CreateLineSystem=function(t,i,e){return l.a.CreateLineSystem(t,i,e)},t.CreateLines=function(t,i,e){return void 0===e&&(e=null),l.a.CreateLines(t,i,e)},t.CreateDashedLines=function(t,i,e){return void 0===e&&(e=null),l.a.CreateDashedLines(t,i,e)},t.ExtrudeShape=function(t,i,e){return void 0===e&&(e=null),f.a.ExtrudeShape(t,i,e)},t.ExtrudeShapeCustom=function(t,i,e){return void 0===e&&(e=null),f.a.ExtrudeShapeCustom(t,i,e)},t.CreateLathe=function(t,i,e){return void 0===e&&(e=null),p.a.CreateLathe(t,i,e)},t.CreateTiledPlane=function(t,i,e){return void 0===e&&(e=null),g.a.CreateTiledPlane(t,i,e)},t.CreatePlane=function(t,i,e){return void 0===e&&(e=null),m.a.CreatePlane(t,i,e)},t.CreateGround=function(t,i,e){return void 0===e&&(e=null),v.a.CreateGround(t,i,e)},t.CreateTiledGround=function(t,i,e){return void 0===e&&(e=null),v.a.CreateTiledGround(t,i,e)},t.CreateGroundFromHeightMap=function(t,i,e,r){return void 0===r&&(r=null),v.a.CreateGroundFromHeightMap(t,i,e,r)},t.CreatePolygon=function(t,i,e,r){return void 0===e&&(e=null),void 0===r&&(r=earcut),d.a.CreatePolygon(t,i,e,r)},t.ExtrudePolygon=function(t,i,e,r){return void 0===e&&(e=null),void 0===r&&(r=earcut),d.a.ExtrudePolygon(t,i,e,r)},t.CreateTube=function(t,i,e){return void 0===e&&(e=null),b.a.CreateTube(t,i,e)},t.CreatePolyhedron=function(t,i,e){return void 0===e&&(e=null),x.a.CreatePolyhedron(t,i,e)},t.CreateDecal=function(t,i,e){return y.a.CreateDecal(t,i,e)}}()},UtUh:function(t,i,e){"use strict";e.d(i,"a",(function(){return a}));var r=e("/SR9"),n=e("y4Ty"),o=e("n5HA"),s=e("Xeau"),a=function(){function t(){}return t.prototype.set=function(t,i){switch(i){case n.b.PositionKind:this.positions=t;break;case n.b.NormalKind:this.normals=t;break;case n.b.TangentKind:this.tangents=t;break;case n.b.UVKind:this.uvs=t;break;case n.b.UV2Kind:this.uvs2=t;break;case n.b.UV3Kind:this.uvs3=t;break;case n.b.UV4Kind:this.uvs4=t;break;case n.b.UV5Kind:this.uvs5=t;break;case n.b.UV6Kind:this.uvs6=t;break;case n.b.ColorKind:this.colors=t;break;case n.b.MatricesIndicesKind:this.matricesIndices=t;break;case n.b.MatricesWeightsKind:this.matricesWeights=t;break;case n.b.MatricesIndicesExtraKind:this.matricesIndicesExtra=t;break;case n.b.MatricesWeightsExtraKind:this.matricesWeightsExtra=t}},t.prototype.applyToMesh=function(t,i){return this._applyTo(t,i),this},t.prototype.applyToGeometry=function(t,i){return this._applyTo(t,i),this},t.prototype.updateMesh=function(t){return this._update(t),this},t.prototype.updateGeometry=function(t){return this._update(t),this},t.prototype._applyTo=function(t,i){return void 0===i&&(i=!1),this.positions&&t.setVerticesData(n.b.PositionKind,this.positions,i),this.normals&&t.setVerticesData(n.b.NormalKind,this.normals,i),this.tangents&&t.setVerticesData(n.b.TangentKind,this.tangents,i),this.uvs&&t.setVerticesData(n.b.UVKind,this.uvs,i),this.uvs2&&t.setVerticesData(n.b.UV2Kind,this.uvs2,i),this.uvs3&&t.setVerticesData(n.b.UV3Kind,this.uvs3,i),this.uvs4&&t.setVerticesData(n.b.UV4Kind,this.uvs4,i),this.uvs5&&t.setVerticesData(n.b.UV5Kind,this.uvs5,i),this.uvs6&&t.setVerticesData(n.b.UV6Kind,this.uvs6,i),this.colors&&t.setVerticesData(n.b.ColorKind,this.colors,i),this.matricesIndices&&t.setVerticesData(n.b.MatricesIndicesKind,this.matricesIndices,i),this.matricesWeights&&t.setVerticesData(n.b.MatricesWeightsKind,this.matricesWeights,i),this.matricesIndicesExtra&&t.setVerticesData(n.b.MatricesIndicesExtraKind,this.matricesIndicesExtra,i),this.matricesWeightsExtra&&t.setVerticesData(n.b.MatricesWeightsExtraKind,this.matricesWeightsExtra,i),this.indices?t.setIndices(this.indices,null,i):t.setIndices([],null),this},t.prototype._update=function(t,i,e){return this.positions&&t.updateVerticesData(n.b.PositionKind,this.positions,i,e),this.normals&&t.updateVerticesData(n.b.NormalKind,this.normals,i,e),this.tangents&&t.updateVerticesData(n.b.TangentKind,this.tangents,i,e),this.uvs&&t.updateVerticesData(n.b.UVKind,this.uvs,i,e),this.uvs2&&t.updateVerticesData(n.b.UV2Kind,this.uvs2,i,e),this.uvs3&&t.updateVerticesData(n.b.UV3Kind,this.uvs3,i,e),this.uvs4&&t.updateVerticesData(n.b.UV4Kind,this.uvs4,i,e),this.uvs5&&t.updateVerticesData(n.b.UV5Kind,this.uvs5,i,e),this.uvs6&&t.updateVerticesData(n.b.UV6Kind,this.uvs6,i,e),this.colors&&t.updateVerticesData(n.b.ColorKind,this.colors,i,e),this.matricesIndices&&t.updateVerticesData(n.b.MatricesIndicesKind,this.matricesIndices,i,e),this.matricesWeights&&t.updateVerticesData(n.b.MatricesWeightsKind,this.matricesWeights,i,e),this.matricesIndicesExtra&&t.updateVerticesData(n.b.MatricesIndicesExtraKind,this.matricesIndicesExtra,i,e),this.matricesWeightsExtra&&t.updateVerticesData(n.b.MatricesWeightsExtraKind,this.matricesWeightsExtra,i,e),this.indices&&t.setIndices(this.indices,null),this},t.prototype.transform=function(t){var i,e=t.m[0]*t.m[5]*t.m[10]<0,n=r.e.Zero();if(this.positions){var o=r.e.Zero();for(i=0;i<this.positions.length;i+=3)r.e.FromArrayToRef(this.positions,i,o),r.e.TransformCoordinatesToRef(o,t,n),this.positions[i]=n.x,this.positions[i+1]=n.y,this.positions[i+2]=n.z}if(this.normals){var s=r.e.Zero();for(i=0;i<this.normals.length;i+=3)r.e.FromArrayToRef(this.normals,i,s),r.e.TransformNormalToRef(s,t,n),this.normals[i]=n.x,this.normals[i+1]=n.y,this.normals[i+2]=n.z}if(this.tangents){var a=r.f.Zero(),h=r.f.Zero();for(i=0;i<this.tangents.length;i+=4)r.f.FromArrayToRef(this.tangents,i,a),r.f.TransformNormalToRef(a,t,h),this.tangents[i]=h.x,this.tangents[i+1]=h.y,this.tangents[i+2]=h.z,this.tangents[i+3]=h.w}if(e&&this.indices)for(i=0;i<this.indices.length;i+=3){var u=this.indices[i+1];this.indices[i+1]=this.indices[i+2],this.indices[i+2]=u}return this},t.prototype.merge=function(t,i){if(void 0===i&&(i=!1),this._validate(),t._validate(),!this.normals!=!t.normals||!this.tangents!=!t.tangents||!this.uvs!=!t.uvs||!this.uvs2!=!t.uvs2||!this.uvs3!=!t.uvs3||!this.uvs4!=!t.uvs4||!this.uvs5!=!t.uvs5||!this.uvs6!=!t.uvs6||!this.colors!=!t.colors||!this.matricesIndices!=!t.matricesIndices||!this.matricesWeights!=!t.matricesWeights||!this.matricesIndicesExtra!=!t.matricesIndicesExtra||!this.matricesWeightsExtra!=!t.matricesWeightsExtra)throw new Error("Cannot merge vertex data that do not have the same set of attributes");if(t.indices){this.indices||(this.indices=[]);var e=this.positions?this.positions.length/3:0;if(void 0!==this.indices.BYTES_PER_ELEMENT){var r=this.indices.length+t.indices.length,n=i||this.indices instanceof Uint32Array?new Uint32Array(r):new Uint16Array(r);n.set(this.indices);for(var o=this.indices.length,s=0;s<t.indices.length;s++)n[o+s]=t.indices[s]+e;this.indices=n}else for(s=0;s<t.indices.length;s++)this.indices.push(t.indices[s]+e)}return this.positions=this._mergeElement(this.positions,t.positions),this.normals=this._mergeElement(this.normals,t.normals),this.tangents=this._mergeElement(this.tangents,t.tangents),this.uvs=this._mergeElement(this.uvs,t.uvs),this.uvs2=this._mergeElement(this.uvs2,t.uvs2),this.uvs3=this._mergeElement(this.uvs3,t.uvs3),this.uvs4=this._mergeElement(this.uvs4,t.uvs4),this.uvs5=this._mergeElement(this.uvs5,t.uvs5),this.uvs6=this._mergeElement(this.uvs6,t.uvs6),this.colors=this._mergeElement(this.colors,t.colors),this.matricesIndices=this._mergeElement(this.matricesIndices,t.matricesIndices),this.matricesWeights=this._mergeElement(this.matricesWeights,t.matricesWeights),this.matricesIndicesExtra=this._mergeElement(this.matricesIndicesExtra,t.matricesIndicesExtra),this.matricesWeightsExtra=this._mergeElement(this.matricesWeightsExtra,t.matricesWeightsExtra),this},t.prototype._mergeElement=function(t,i){if(!t)return i;if(!i)return t;var e=i.length+t.length,r=t instanceof Float32Array,n=i instanceof Float32Array;if(r){var o=new Float32Array(e);return o.set(t),o.set(i,t.length),o}if(n){var s=t.slice(0),a=0;for(e=i.length;a<e;a++)s.push(i[a]);return s}return t.concat(i)},t.prototype._validate=function(){if(!this.positions)throw new Error("Positions are required");var t=function(t,i){var e=n.b.DeduceStride(t);if(i.length%e!=0)throw new Error("The "+t+"s array count must be a multiple of "+e);return i.length/e},i=t(n.b.PositionKind,this.positions),e=function(e,r){var n=t(e,r);if(n!==i)throw new Error("The "+e+"s element count ("+n+") does not match the positions count ("+i+")")};this.normals&&e(n.b.NormalKind,this.normals),this.tangents&&e(n.b.TangentKind,this.tangents),this.uvs&&e(n.b.UVKind,this.uvs),this.uvs2&&e(n.b.UV2Kind,this.uvs2),this.uvs3&&e(n.b.UV3Kind,this.uvs3),this.uvs4&&e(n.b.UV4Kind,this.uvs4),this.uvs5&&e(n.b.UV5Kind,this.uvs5),this.uvs6&&e(n.b.UV6Kind,this.uvs6),this.colors&&e(n.b.ColorKind,this.colors),this.matricesIndices&&e(n.b.MatricesIndicesKind,this.matricesIndices),this.matricesWeights&&e(n.b.MatricesWeightsKind,this.matricesWeights),this.matricesIndicesExtra&&e(n.b.MatricesIndicesExtraKind,this.matricesIndicesExtra),this.matricesWeightsExtra&&e(n.b.MatricesWeightsExtraKind,this.matricesWeightsExtra)},t.prototype.serialize=function(){var t=this.serialize();return this.positions&&(t.positions=this.positions),this.normals&&(t.normals=this.normals),this.tangents&&(t.tangents=this.tangents),this.uvs&&(t.uvs=this.uvs),this.uvs2&&(t.uvs2=this.uvs2),this.uvs3&&(t.uvs3=this.uvs3),this.uvs4&&(t.uvs4=this.uvs4),this.uvs5&&(t.uvs5=this.uvs5),this.uvs6&&(t.uvs6=this.uvs6),this.colors&&(t.colors=this.colors),this.matricesIndices&&(t.matricesIndices=this.matricesIndices,t.matricesIndices._isExpanded=!0),this.matricesWeights&&(t.matricesWeights=this.matricesWeights),this.matricesIndicesExtra&&(t.matricesIndicesExtra=this.matricesIndicesExtra,t.matricesIndicesExtra._isExpanded=!0),this.matricesWeightsExtra&&(t.matricesWeightsExtra=this.matricesWeightsExtra),t.indices=this.indices,t},t.ExtractFromMesh=function(i,e,r){return t._ExtractFrom(i,e,r)},t.ExtractFromGeometry=function(i,e,r){return t._ExtractFrom(i,e,r)},t._ExtractFrom=function(i,e,r){var o=new t;return i.isVerticesDataPresent(n.b.PositionKind)&&(o.positions=i.getVerticesData(n.b.PositionKind,e,r)),i.isVerticesDataPresent(n.b.NormalKind)&&(o.normals=i.getVerticesData(n.b.NormalKind,e,r)),i.isVerticesDataPresent(n.b.TangentKind)&&(o.tangents=i.getVerticesData(n.b.TangentKind,e,r)),i.isVerticesDataPresent(n.b.UVKind)&&(o.uvs=i.getVerticesData(n.b.UVKind,e,r)),i.isVerticesDataPresent(n.b.UV2Kind)&&(o.uvs2=i.getVerticesData(n.b.UV2Kind,e,r)),i.isVerticesDataPresent(n.b.UV3Kind)&&(o.uvs3=i.getVerticesData(n.b.UV3Kind,e,r)),i.isVerticesDataPresent(n.b.UV4Kind)&&(o.uvs4=i.getVerticesData(n.b.UV4Kind,e,r)),i.isVerticesDataPresent(n.b.UV5Kind)&&(o.uvs5=i.getVerticesData(n.b.UV5Kind,e,r)),i.isVerticesDataPresent(n.b.UV6Kind)&&(o.uvs6=i.getVerticesData(n.b.UV6Kind,e,r)),i.isVerticesDataPresent(n.b.ColorKind)&&(o.colors=i.getVerticesData(n.b.ColorKind,e,r)),i.isVerticesDataPresent(n.b.MatricesIndicesKind)&&(o.matricesIndices=i.getVerticesData(n.b.MatricesIndicesKind,e,r)),i.isVerticesDataPresent(n.b.MatricesWeightsKind)&&(o.matricesWeights=i.getVerticesData(n.b.MatricesWeightsKind,e,r)),i.isVerticesDataPresent(n.b.MatricesIndicesExtraKind)&&(o.matricesIndicesExtra=i.getVerticesData(n.b.MatricesIndicesExtraKind,e,r)),i.isVerticesDataPresent(n.b.MatricesWeightsExtraKind)&&(o.matricesWeightsExtra=i.getVerticesData(n.b.MatricesWeightsExtraKind,e,r)),o.indices=i.getIndices(e,r),o},t.CreateRibbon=function(t){throw o.a.WarnImport("ribbonBuilder")},t.CreateBox=function(t){throw o.a.WarnImport("boxBuilder")},t.CreateTiledBox=function(t){throw o.a.WarnImport("tiledBoxBuilder")},t.CreateTiledPlane=function(t){throw o.a.WarnImport("tiledPlaneBuilder")},t.CreateSphere=function(t){throw o.a.WarnImport("sphereBuilder")},t.CreateCylinder=function(t){throw o.a.WarnImport("cylinderBuilder")},t.CreateTorus=function(t){throw o.a.WarnImport("torusBuilder")},t.CreateLineSystem=function(t){throw o.a.WarnImport("linesBuilder")},t.CreateDashedLines=function(t){throw o.a.WarnImport("linesBuilder")},t.CreateGround=function(t){throw o.a.WarnImport("groundBuilder")},t.CreateTiledGround=function(t){throw o.a.WarnImport("groundBuilder")},t.CreateGroundFromHeightMap=function(t){throw o.a.WarnImport("groundBuilder")},t.CreatePlane=function(t){throw o.a.WarnImport("planeBuilder")},t.CreateDisc=function(t){throw o.a.WarnImport("discBuilder")},t.CreatePolygon=function(t,i,e,r,n,s){throw o.a.WarnImport("polygonBuilder")},t.CreateIcoSphere=function(t){throw o.a.WarnImport("icoSphereBuilder")},t.CreatePolyhedron=function(t){throw o.a.WarnImport("polyhedronBuilder")},t.CreateTorusKnot=function(t){throw o.a.WarnImport("torusKnotBuilder")},t.ComputeNormals=function(t,i,e,n){var o=0,s=0,a=0,h=0,u=0,c=0,l=0,d=0,f=0,p=0,m=0,g=0,v=0,b=0,x=0,_=0,y=0,M=0,I=0,D=0,P=!1,T=!1,R=!1,E=!1,C=1,w=0,S=null;if(n&&(P=!!n.facetNormals,T=!!n.facetPositions,R=!!n.facetPartitioning,C=!0===n.useRightHandedSystem?-1:1,w=n.ratio||0,E=!!n.depthSort,S=n.distanceTo,E)){void 0===S&&(S=r.e.Zero());var V=n.depthSortedFacets}var W=0,B=0,A=0,O=0;if(R&&n&&n.bbSize){var K=0,L=0,U=0,z=0,F=0,N=0,Q=0,j=0,k=0,Z=0,G=0,q=0,Y=0,H=0,X=0,J=0,$=n.bbSize.x>n.bbSize.y?n.bbSize.x:n.bbSize.y;$=$>n.bbSize.z?$:n.bbSize.z,W=n.subDiv.X*w/n.bbSize.x,B=n.subDiv.Y*w/n.bbSize.y,A=n.subDiv.Z*w/n.bbSize.z,O=n.subDiv.max*n.subDiv.max,n.facetPartitioning.length=0}for(o=0;o<t.length;o++)e[o]=0;var tt=i.length/3|0;for(o=0;o<tt;o++){if(v=(g=3*i[3*o])+1,b=g+2,_=(x=3*i[3*o+1])+1,y=x+2,I=(M=3*i[3*o+2])+1,D=M+2,s=t[g]-t[x],a=t[v]-t[_],h=t[b]-t[y],u=t[M]-t[x],c=t[I]-t[_],d=C*(a*(l=t[D]-t[y])-h*c),f=C*(h*u-s*l),p=C*(s*c-a*u),d/=m=0===(m=Math.sqrt(d*d+f*f+p*p))?1:m,f/=m,p/=m,P&&n&&(n.facetNormals[o].x=d,n.facetNormals[o].y=f,n.facetNormals[o].z=p),T&&n&&(n.facetPositions[o].x=(t[g]+t[x]+t[M])/3,n.facetPositions[o].y=(t[v]+t[_]+t[I])/3,n.facetPositions[o].z=(t[b]+t[y]+t[D])/3),R&&n&&(K=Math.floor((n.facetPositions[o].x-n.bInfo.minimum.x*w)*W),L=Math.floor((n.facetPositions[o].y-n.bInfo.minimum.y*w)*B),U=Math.floor((n.facetPositions[o].z-n.bInfo.minimum.z*w)*A),z=Math.floor((t[g]-n.bInfo.minimum.x*w)*W),F=Math.floor((t[v]-n.bInfo.minimum.y*w)*B),N=Math.floor((t[b]-n.bInfo.minimum.z*w)*A),Q=Math.floor((t[x]-n.bInfo.minimum.x*w)*W),j=Math.floor((t[_]-n.bInfo.minimum.y*w)*B),k=Math.floor((t[y]-n.bInfo.minimum.z*w)*A),Z=Math.floor((t[M]-n.bInfo.minimum.x*w)*W),G=Math.floor((t[I]-n.bInfo.minimum.y*w)*B),q=Math.floor((t[D]-n.bInfo.minimum.z*w)*A),H=z+n.subDiv.max*F+O*N,X=Q+n.subDiv.max*j+O*k,J=Z+n.subDiv.max*G+O*q,Y=K+n.subDiv.max*L+O*U,n.facetPartitioning[Y]=n.facetPartitioning[Y]?n.facetPartitioning[Y]:new Array,n.facetPartitioning[H]=n.facetPartitioning[H]?n.facetPartitioning[H]:new Array,n.facetPartitioning[X]=n.facetPartitioning[X]?n.facetPartitioning[X]:new Array,n.facetPartitioning[J]=n.facetPartitioning[J]?n.facetPartitioning[J]:new Array,n.facetPartitioning[H].push(o),X!=H&&n.facetPartitioning[X].push(o),J!=X&&J!=H&&n.facetPartitioning[J].push(o),Y!=H&&Y!=X&&Y!=J&&n.facetPartitioning[Y].push(o)),E&&n&&n.facetPositions){var it=V[o];it.ind=3*o,it.sqDistance=r.e.DistanceSquared(n.facetPositions[o],S)}e[g]+=d,e[v]+=f,e[b]+=p,e[x]+=d,e[_]+=f,e[y]+=p,e[M]+=d,e[I]+=f,e[D]+=p}for(o=0;o<e.length/3;o++)d=e[3*o],f=e[3*o+1],p=e[3*o+2],d/=m=0===(m=Math.sqrt(d*d+f*f+p*p))?1:m,f/=m,p/=m,e[3*o]=d,e[3*o+1]=f,e[3*o+2]=p},t._ComputeSides=function(i,e,n,o,s,a,h){var u,c,l=n.length,d=o.length;switch(i=i||t.DEFAULTSIDE){case t.FRONTSIDE:break;case t.BACKSIDE:var f;for(u=0;u<l;u+=3)f=n[u],n[u]=n[u+2],n[u+2]=f;for(c=0;c<d;c++)o[c]=-o[c];break;case t.DOUBLESIDE:for(var p=e.length,m=p/3,g=0;g<p;g++)e[p+g]=e[g];for(u=0;u<l;u+=3)n[u+l]=n[u+2]+m,n[u+1+l]=n[u+1]+m,n[u+2+l]=n[u]+m;for(c=0;c<d;c++)o[d+c]=-o[c];var v=s.length,b=0;for(b=0;b<v;b++)s[b+v]=s[b];for(a=a||new r.f(0,0,1,1),h=h||new r.f(0,0,1,1),b=0,u=0;u<v/2;u++)s[b]=a.x+(a.z-a.x)*s[b],s[b+1]=a.y+(a.w-a.y)*s[b+1],s[b+v]=h.x+(h.z-h.x)*s[b+v],s[b+v+1]=h.y+(h.w-h.y)*s[b+v+1],b+=2}},t.ImportVertexData=function(i,e){var r=new t,o=i.positions;o&&r.set(o,n.b.PositionKind);var a=i.normals;a&&r.set(a,n.b.NormalKind);var h=i.tangents;h&&r.set(h,n.b.TangentKind);var u=i.uvs;u&&r.set(u,n.b.UVKind);var c=i.uv2s;c&&r.set(c,n.b.UV2Kind);var l=i.uv3s;l&&r.set(l,n.b.UV3Kind);var d=i.uv4s;d&&r.set(d,n.b.UV4Kind);var f=i.uv5s;f&&r.set(f,n.b.UV5Kind);var p=i.uv6s;p&&r.set(p,n.b.UV6Kind);var m=i.colors;m&&r.set(s.b.CheckColors4(m,o.length/3),n.b.ColorKind);var g=i.matricesIndices;g&&r.set(g,n.b.MatricesIndicesKind);var v=i.matricesWeights;v&&r.set(v,n.b.MatricesWeightsKind);var b=i.indices;b&&(r.indices=b),e.setAllVerticesData(r,i.updatable)},t.FRONTSIDE=0,t.BACKSIDE=1,t.DOUBLESIDE=2,t.DEFAULTSIDE=0,t}()},qVgn:function(t,i,e){"use strict";e.d(i,"a",(function(){return u}));var r=e("mrSG"),n=e("ADVu"),o=e("ps+7"),s=e("/SR9"),a=e("Ufda"),h=e("SYzJ"),u=function(t){function i(e,r,n){void 0===r&&(r=null),void 0===n&&(n=!0);var a=t.call(this,e,r)||this;return a._forward=new s.e(0,0,1),a._forwardInverted=new s.e(0,0,-1),a._up=new s.e(0,1,0),a._right=new s.e(1,0,0),a._rightInverted=new s.e(-1,0,0),a._position=s.e.Zero(),a._rotation=s.e.Zero(),a._rotationQuaternion=null,a._scaling=s.e.One(),a._isDirty=!1,a._transformToBoneReferal=null,a._isAbsoluteSynced=!1,a._billboardMode=i.BILLBOARDMODE_NONE,a._preserveParentRotationForBillboard=!1,a.scalingDeterminant=1,a._infiniteDistance=!1,a.ignoreNonUniformScaling=!1,a.reIntegrateRotationIntoRotationQuaternion=!1,a._poseMatrix=null,a._localMatrix=s.a.Zero(),a._usePivotMatrix=!1,a._absolutePosition=s.e.Zero(),a._absoluteScaling=s.e.Zero(),a._absoluteRotationQuaternion=s.b.Identity(),a._pivotMatrix=s.a.Identity(),a._postMultiplyPivotMatrix=!1,a._isWorldMatrixFrozen=!1,a._indexInSceneTransformNodesArray=-1,a.onAfterWorldMatrixUpdateObservable=new o.a,a._nonUniformScaling=!1,n&&a.getScene().addTransformNode(a),a}return Object(r.c)(i,t),Object.defineProperty(i.prototype,"billboardMode",{get:function(){return this._billboardMode},set:function(t){this._billboardMode!==t&&(this._billboardMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"preserveParentRotationForBillboard",{get:function(){return this._preserveParentRotationForBillboard},set:function(t){t!==this._preserveParentRotationForBillboard&&(this._preserveParentRotationForBillboard=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"infiniteDistance",{get:function(){return this._infiniteDistance},set:function(t){this._infiniteDistance!==t&&(this._infiniteDistance=t)},enumerable:!0,configurable:!0}),i.prototype.getClassName=function(){return"TransformNode"},Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._rotationQuaternion=null,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scaling",{get:function(){return this._scaling},set:function(t){this._scaling=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationQuaternion",{get:function(){return this._rotationQuaternion},set:function(t){this._rotationQuaternion=t,t&&this._rotation.setAll(0),this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"forward",{get:function(){return s.e.Normalize(s.e.TransformNormal(this.getScene().useRightHandedSystem?this._forwardInverted:this._forward,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"up",{get:function(){return s.e.Normalize(s.e.TransformNormal(this._up,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return s.e.Normalize(s.e.TransformNormal(this.getScene().useRightHandedSystem?this._rightInverted:this._right,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),i.prototype.updatePoseMatrix=function(t){return this._poseMatrix?(this._poseMatrix.copyFrom(t),this):(this._poseMatrix=t.clone(),this)},i.prototype.getPoseMatrix=function(){return this._poseMatrix||(this._poseMatrix=s.a.Identity()),this._poseMatrix},i.prototype._isSynchronized=function(){var t=this._cache;if(this.billboardMode!==t.billboardMode||this.billboardMode!==i.BILLBOARDMODE_NONE)return!1;if(t.pivotMatrixUpdated)return!1;if(this.infiniteDistance)return!1;if(!t.position.equals(this._position))return!1;if(this._rotationQuaternion){if(!t.rotationQuaternion.equals(this._rotationQuaternion))return!1}else if(!t.rotation.equals(this._rotation))return!1;return!!t.scaling.equals(this._scaling)},i.prototype._initCache=function(){t.prototype._initCache.call(this);var i=this._cache;i.localMatrixUpdated=!1,i.position=s.e.Zero(),i.scaling=s.e.Zero(),i.rotation=s.e.Zero(),i.rotationQuaternion=new s.b(0,0,0,0),i.billboardMode=-1,i.infiniteDistance=!1},i.prototype.markAsDirty=function(t){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this},Object.defineProperty(i.prototype,"absolutePosition",{get:function(){return this._absolutePosition},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"absoluteScaling",{get:function(){return this._syncAbsoluteScalingAndRotation(),this._absoluteScaling},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"absoluteRotationQuaternion",{get:function(){return this._syncAbsoluteScalingAndRotation(),this._absoluteRotationQuaternion},enumerable:!0,configurable:!0}),i.prototype.setPreTransformMatrix=function(t){return this.setPivotMatrix(t,!1)},i.prototype.setPivotMatrix=function(t,i){return void 0===i&&(i=!0),this._pivotMatrix.copyFrom(t),this._usePivotMatrix=!this._pivotMatrix.isIdentity(),this._cache.pivotMatrixUpdated=!0,this._postMultiplyPivotMatrix=i,this._postMultiplyPivotMatrix&&(this._pivotMatrixInverse?this._pivotMatrix.invertToRef(this._pivotMatrixInverse):this._pivotMatrixInverse=s.a.Invert(this._pivotMatrix)),this},i.prototype.getPivotMatrix=function(){return this._pivotMatrix},i.prototype.instantiateHierarchy=function(t,i,e){void 0===t&&(t=null);var r=this.clone("Clone of "+(this.name||this.id),t||this.parent,!0);r&&e&&e(this,r);for(var n=0,o=this.getChildTransformNodes(!0);n<o.length;n++){o[n].instantiateHierarchy(r,i,e)}return r},i.prototype.freezeWorldMatrix=function(t){return void 0===t&&(t=null),t?this._worldMatrix=t:(this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0)),this._isDirty=!1,this._isWorldMatrixFrozen=!0,this},i.prototype.unfreezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this},Object.defineProperty(i.prototype,"isWorldMatrixFrozen",{get:function(){return this._isWorldMatrixFrozen},enumerable:!0,configurable:!0}),i.prototype.getAbsolutePosition=function(){return this.computeWorldMatrix(),this._absolutePosition},i.prototype.setAbsolutePosition=function(t){if(!t)return this;var i,e,r;if(void 0===t.x){if(arguments.length<3)return this;i=arguments[0],e=arguments[1],r=arguments[2]}else i=t.x,e=t.y,r=t.z;if(this.parent){var n=s.c.Matrix[0];this.parent.getWorldMatrix().invertToRef(n),s.e.TransformCoordinatesFromFloatsToRef(i,e,r,n,this.position)}else this.position.x=i,this.position.y=e,this.position.z=r;return this},i.prototype.setPositionWithLocalVector=function(t){return this.computeWorldMatrix(),this.position=s.e.TransformNormal(t,this._localMatrix),this},i.prototype.getPositionExpressedInLocalSpace=function(){this.computeWorldMatrix();var t=s.c.Matrix[0];return this._localMatrix.invertToRef(t),s.e.TransformNormal(this.position,t)},i.prototype.locallyTranslate=function(t){return this.computeWorldMatrix(!0),this.position=s.e.TransformCoordinates(t,this._localMatrix),this},i.prototype.lookAt=function(t,e,r,n,o){void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=h.b.LOCAL);var a=i._lookAtVectorCache,u=o===h.b.LOCAL?this.position:this.getAbsolutePosition();if(t.subtractToRef(u,a),this.setDirection(a,e,r,n),o===h.b.WORLD&&this.parent)if(this.rotationQuaternion){var c=s.c.Matrix[0];this.rotationQuaternion.toRotationMatrix(c);var l=s.c.Matrix[1];this.parent.getWorldMatrix().getRotationMatrixToRef(l),l.invert(),c.multiplyToRef(l,c),this.rotationQuaternion.fromRotationMatrix(c)}else{var d=s.c.Quaternion[0];s.b.FromEulerVectorToRef(this.rotation,d);c=s.c.Matrix[0];d.toRotationMatrix(c);l=s.c.Matrix[1];this.parent.getWorldMatrix().getRotationMatrixToRef(l),l.invert(),c.multiplyToRef(l,c),d.fromRotationMatrix(c),d.toEulerAnglesToRef(this.rotation)}return this},i.prototype.getDirection=function(t){var i=s.e.Zero();return this.getDirectionToRef(t,i),i},i.prototype.getDirectionToRef=function(t,i){return s.e.TransformNormalToRef(t,this.getWorldMatrix(),i),this},i.prototype.setDirection=function(t,i,e,r){void 0===i&&(i=0),void 0===e&&(e=0),void 0===r&&(r=0);var n=-Math.atan2(t.z,t.x)+Math.PI/2,o=Math.sqrt(t.x*t.x+t.z*t.z),a=-Math.atan2(t.y,o);return this.rotationQuaternion?s.b.RotationYawPitchRollToRef(n+i,a+e,r,this.rotationQuaternion):(this.rotation.x=a+e,this.rotation.y=n+i,this.rotation.z=r),this},i.prototype.setPivotPoint=function(t,i){void 0===i&&(i=h.b.LOCAL),0==this.getScene().getRenderId()&&this.computeWorldMatrix(!0);var e=this.getWorldMatrix();if(i==h.b.WORLD){var r=s.c.Matrix[0];e.invertToRef(r),t=s.e.TransformCoordinates(t,r)}return this.setPivotMatrix(s.a.Translation(-t.x,-t.y,-t.z),!0)},i.prototype.getPivotPoint=function(){var t=s.e.Zero();return this.getPivotPointToRef(t),t},i.prototype.getPivotPointToRef=function(t){return t.x=-this._pivotMatrix.m[12],t.y=-this._pivotMatrix.m[13],t.z=-this._pivotMatrix.m[14],this},i.prototype.getAbsolutePivotPoint=function(){var t=s.e.Zero();return this.getAbsolutePivotPointToRef(t),t},i.prototype.getAbsolutePivotPointToRef=function(t){return t.x=this._pivotMatrix.m[12],t.y=this._pivotMatrix.m[13],t.z=this._pivotMatrix.m[14],this.getPivotPointToRef(t),s.e.TransformCoordinatesToRef(t,this.getWorldMatrix(),t),this},i.prototype.setParent=function(t){if(!t&&!this.parent)return this;var i=s.c.Quaternion[0],e=s.c.Vector3[0],r=s.c.Vector3[1];if(t){var n=s.c.Matrix[0],o=s.c.Matrix[1];this.computeWorldMatrix(!0),t.computeWorldMatrix(!0),t.getWorldMatrix().invertToRef(o),this.getWorldMatrix().multiplyToRef(o,n),n.decompose(r,i,e)}else this.computeWorldMatrix(!0),this.getWorldMatrix().decompose(r,i,e);return this.rotationQuaternion?this.rotationQuaternion.copyFrom(i):i.toEulerAnglesToRef(this.rotation),this.scaling.copyFrom(r),this.position.copyFrom(e),this.parent=t,this},Object.defineProperty(i.prototype,"nonUniformScaling",{get:function(){return this._nonUniformScaling},enumerable:!0,configurable:!0}),i.prototype._updateNonUniformScalingState=function(t){return this._nonUniformScaling!==t&&(this._nonUniformScaling=t,!0)},i.prototype.attachToBone=function(t,i){return this._transformToBoneReferal=i,this.parent=t,t.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this},i.prototype.detachFromBone=function(){return this.parent?(this.parent.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this._transformToBoneReferal=null,this.parent=null,this):this},i.prototype.rotate=function(t,e,r){var n;if(t.normalize(),this.rotationQuaternion||(this.rotationQuaternion=this.rotation.toQuaternion(),this.rotation.setAll(0)),r&&r!==h.b.LOCAL){if(this.parent){var o=s.c.Matrix[0];this.parent.getWorldMatrix().invertToRef(o),t=s.e.TransformNormal(t,o)}(n=s.b.RotationAxisToRef(t,e,i._rotationAxisCache)).multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)}else n=s.b.RotationAxisToRef(t,e,i._rotationAxisCache),this.rotationQuaternion.multiplyToRef(n,this.rotationQuaternion);return this},i.prototype.rotateAround=function(t,i,e){i.normalize(),this.rotationQuaternion||(this.rotationQuaternion=s.b.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z),this.rotation.setAll(0));var r=s.c.Vector3[0],n=s.c.Vector3[1],o=s.c.Vector3[2],a=s.c.Quaternion[0],h=s.c.Matrix[0],u=s.c.Matrix[1],c=s.c.Matrix[2],l=s.c.Matrix[3];return t.subtractToRef(this.position,r),s.a.TranslationToRef(r.x,r.y,r.z,h),s.a.TranslationToRef(-r.x,-r.y,-r.z,u),s.a.RotationAxisToRef(i,e,c),u.multiplyToRef(c,l),l.multiplyToRef(h,l),l.decompose(n,a,o),this.position.addInPlace(o),a.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion),this},i.prototype.translate=function(t,i,e){var r=t.scale(i);if(e&&e!==h.b.LOCAL)this.setAbsolutePosition(this.getAbsolutePosition().add(r));else{var n=this.getPositionExpressedInLocalSpace().add(r);this.setPositionWithLocalVector(n)}return this},i.prototype.addRotation=function(t,i,e){var r;this.rotationQuaternion?r=this.rotationQuaternion:(r=s.c.Quaternion[1],s.b.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,r));var n=s.c.Quaternion[0];return s.b.RotationYawPitchRollToRef(i,t,e,n),r.multiplyInPlace(n),this.rotationQuaternion||r.toEulerAnglesToRef(this.rotation),this},i.prototype._getEffectiveParent=function(){return this.parent},i.prototype.computeWorldMatrix=function(t){if(this._isWorldMatrixFrozen&&!this._isDirty)return this._worldMatrix;var e=this.getScene().getRenderId();if(!this._isDirty&&!t&&this.isSynchronized())return this._currentRenderId=e,this._worldMatrix;var r=this.getScene().activeCamera,n=0!=(this._billboardMode&i.BILLBOARDMODE_USE_POSITION),o=this._billboardMode!==i.BILLBOARDMODE_NONE&&!this.preserveParentRotationForBillboard;o&&r&&n&&(this.lookAt(r.position),(this.billboardMode&i.BILLBOARDMODE_X)!==i.BILLBOARDMODE_X&&(this.rotation.x=0),(this.billboardMode&i.BILLBOARDMODE_Y)!==i.BILLBOARDMODE_Y&&(this.rotation.y=0),(this.billboardMode&i.BILLBOARDMODE_Z)!==i.BILLBOARDMODE_Z&&(this.rotation.z=0)),this._updateCache();var a=this._cache;a.pivotMatrixUpdated=!1,a.billboardMode=this.billboardMode,a.infiniteDistance=this.infiniteDistance,this._currentRenderId=e,this._childUpdateId++,this._isDirty=!1;var h=this._getEffectiveParent(),u=a.scaling,c=a.position;if(this._infiniteDistance)if(!this.parent&&r){var l=r.getWorldMatrix(),d=new s.e(l.m[12],l.m[13],l.m[14]);c.copyFromFloats(this._position.x+d.x,this._position.y+d.y,this._position.z+d.z)}else c.copyFrom(this._position);else c.copyFrom(this._position);u.copyFromFloats(this._scaling.x*this.scalingDeterminant,this._scaling.y*this.scalingDeterminant,this._scaling.z*this.scalingDeterminant);var f=a.rotationQuaternion;if(this._rotationQuaternion){if(this.reIntegrateRotationIntoRotationQuaternion)this.rotation.lengthSquared()&&(this._rotationQuaternion.multiplyInPlace(s.b.RotationYawPitchRoll(this._rotation.y,this._rotation.x,this._rotation.z)),this._rotation.copyFromFloats(0,0,0));f.copyFrom(this._rotationQuaternion)}else s.b.RotationYawPitchRollToRef(this._rotation.y,this._rotation.x,this._rotation.z,f),a.rotation.copyFrom(this._rotation);if(this._usePivotMatrix){var p=s.c.Matrix[1];s.a.ScalingToRef(u.x,u.y,u.z,p);var m=s.c.Matrix[0];f.toRotationMatrix(m),this._pivotMatrix.multiplyToRef(p,s.c.Matrix[4]),s.c.Matrix[4].multiplyToRef(m,this._localMatrix),this._postMultiplyPivotMatrix&&this._localMatrix.multiplyToRef(this._pivotMatrixInverse,this._localMatrix),this._localMatrix.addTranslationFromFloats(c.x,c.y,c.z)}else s.a.ComposeToRef(u,f,c,this._localMatrix);if(h&&h.getWorldMatrix){if(t&&h.computeWorldMatrix(),o){this._transformToBoneReferal?h.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),s.c.Matrix[7]):s.c.Matrix[7].copyFrom(h.getWorldMatrix());var g=s.c.Vector3[5],v=s.c.Vector3[6];s.c.Matrix[7].decompose(v,void 0,g),s.a.ScalingToRef(v.x,v.y,v.z,s.c.Matrix[7]),s.c.Matrix[7].setTranslation(g),this._localMatrix.multiplyToRef(s.c.Matrix[7],this._worldMatrix)}else this._transformToBoneReferal?(this._localMatrix.multiplyToRef(h.getWorldMatrix(),s.c.Matrix[6]),s.c.Matrix[6].multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),this._worldMatrix)):this._localMatrix.multiplyToRef(h.getWorldMatrix(),this._worldMatrix);this._markSyncedWithParent()}else this._worldMatrix.copyFrom(this._localMatrix);if(o&&r&&this.billboardMode&&!n){var b=s.c.Vector3[0];if(this._worldMatrix.getTranslationToRef(b),s.c.Matrix[1].copyFrom(r.getViewMatrix()),s.c.Matrix[1].setTranslationFromFloats(0,0,0),s.c.Matrix[1].invertToRef(s.c.Matrix[0]),(this.billboardMode&i.BILLBOARDMODE_ALL)!==i.BILLBOARDMODE_ALL){s.c.Matrix[0].decompose(void 0,s.c.Quaternion[0],void 0);var x=s.c.Vector3[1];s.c.Quaternion[0].toEulerAnglesToRef(x),(this.billboardMode&i.BILLBOARDMODE_X)!==i.BILLBOARDMODE_X&&(x.x=0),(this.billboardMode&i.BILLBOARDMODE_Y)!==i.BILLBOARDMODE_Y&&(x.y=0),(this.billboardMode&i.BILLBOARDMODE_Z)!==i.BILLBOARDMODE_Z&&(x.z=0),s.a.RotationYawPitchRollToRef(x.y,x.x,x.z,s.c.Matrix[0])}this._worldMatrix.setTranslationFromFloats(0,0,0),this._worldMatrix.multiplyToRef(s.c.Matrix[0],this._worldMatrix),this._worldMatrix.setTranslation(s.c.Vector3[0])}return this.ignoreNonUniformScaling?this._updateNonUniformScalingState(!1):this._scaling.isNonUniform?this._updateNonUniformScalingState(!0):h&&h._nonUniformScaling?this._updateNonUniformScalingState(h._nonUniformScaling):this._updateNonUniformScalingState(!1),this._afterComputeWorldMatrix(),this._absolutePosition.copyFromFloats(this._worldMatrix.m[12],this._worldMatrix.m[13],this._worldMatrix.m[14]),this._isAbsoluteSynced=!1,this.onAfterWorldMatrixUpdateObservable.notifyObservers(this),this._poseMatrix||(this._poseMatrix=s.a.Invert(this._worldMatrix)),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix},i.prototype.resetLocalMatrix=function(t){if(void 0===t&&(t=!0),this.computeWorldMatrix(),t)for(var i=this.getChildren(),e=0;e<i.length;++e){var r=i[e];if(r){r.computeWorldMatrix();var n=s.c.Matrix[0];r._localMatrix.multiplyToRef(this._localMatrix,n);var o=s.c.Quaternion[0];n.decompose(r.scaling,o,r.position),r.rotationQuaternion?r.rotationQuaternion=o:o.toEulerAnglesToRef(r.rotation)}}this.scaling.copyFromFloats(1,1,1),this.position.copyFromFloats(0,0,0),this.rotation.copyFromFloats(0,0,0),this.rotationQuaternion&&(this.rotationQuaternion=s.b.Identity()),this._worldMatrix=s.a.Identity()},i.prototype._afterComputeWorldMatrix=function(){},i.prototype.registerAfterWorldMatrixUpdate=function(t){return this.onAfterWorldMatrixUpdateObservable.add(t),this},i.prototype.unregisterAfterWorldMatrixUpdate=function(t){return this.onAfterWorldMatrixUpdateObservable.removeCallback(t),this},i.prototype.getPositionInCameraSpace=function(t){return void 0===t&&(t=null),t||(t=this.getScene().activeCamera),s.e.TransformCoordinates(this.absolutePosition,t.getViewMatrix())},i.prototype.getDistanceToCamera=function(t){return void 0===t&&(t=null),t||(t=this.getScene().activeCamera),this.absolutePosition.subtract(t.globalPosition).length()},i.prototype.clone=function(t,e,r){var o=this,s=n.a.Clone((function(){return new i(t,o.getScene())}),this);if(s.name=t,s.id=t,e&&(s.parent=e),!r)for(var a=this.getDescendants(!0),h=0;h<a.length;h++){var u=a[h];u.clone&&u.clone(t+"."+u.name,s)}return s},i.prototype.serialize=function(t){var i=n.a.Serialize(this,t);return i.type=this.getClassName(),this.parent&&(i.parentId=this.parent.id),i.localMatrix=this.getPivotMatrix().asArray(),i.isEnabled=this.isEnabled(),this.parent&&(i.parentId=this.parent.id),i},i.Parse=function(t,e,r){var o=n.a.Parse((function(){return new i(t.name,e)}),t,e,r);return t.localMatrix?o.setPreTransformMatrix(s.a.FromArray(t.localMatrix)):t.pivotMatrix&&o.setPivotMatrix(s.a.FromArray(t.pivotMatrix)),o.setEnabled(t.isEnabled),t.parentId&&(o._waitingParentId=t.parentId),o},i.prototype.getChildTransformNodes=function(t,e){var r=[];return this._getDescendants(r,t,(function(t){return(!e||e(t))&&t instanceof i})),r},i.prototype.dispose=function(i,e){if(void 0===e&&(e=!1),this.getScene().stopAnimation(this),this.getScene().removeTransformNode(this),this.onAfterWorldMatrixUpdateObservable.clear(),i)for(var r=0,n=this.getChildTransformNodes(!0);r<n.length;r++){var o=n[r];o.parent=null,o.computeWorldMatrix(!0)}t.prototype.dispose.call(this,i,e)},i.prototype.normalizeToUnitCube=function(t,i,e){void 0===t&&(t=!0),void 0===i&&(i=!1);var r=null,n=null;i&&(this.rotationQuaternion?(n=this.rotationQuaternion.clone(),this.rotationQuaternion.copyFromFloats(0,0,0,1)):this.rotation&&(r=this.rotation.clone(),this.rotation.copyFromFloats(0,0,0)));var o=this.getHierarchyBoundingVectors(t,e),s=o.max.subtract(o.min),a=Math.max(s.x,s.y,s.z);if(0===a)return this;var h=1/a;return this.scaling.scaleInPlace(h),i&&(this.rotationQuaternion&&n?this.rotationQuaternion.copyFrom(n):this.rotation&&r&&this.rotation.copyFrom(r)),this},i.prototype._syncAbsoluteScalingAndRotation=function(){this._isAbsoluteSynced||(this._worldMatrix.decompose(this._absoluteScaling,this._absoluteRotationQuaternion),this._isAbsoluteSynced=!0)},i.BILLBOARDMODE_NONE=0,i.BILLBOARDMODE_X=1,i.BILLBOARDMODE_Y=2,i.BILLBOARDMODE_Z=4,i.BILLBOARDMODE_ALL=7,i.BILLBOARDMODE_USE_POSITION=128,i._lookAtVectorCache=new s.e(0,0,0),i._rotationAxisCache=new s.b,Object(r.b)([Object(n.l)("position")],i.prototype,"_position",void 0),Object(r.b)([Object(n.l)("rotation")],i.prototype,"_rotation",void 0),Object(r.b)([Object(n.j)("rotationQuaternion")],i.prototype,"_rotationQuaternion",void 0),Object(r.b)([Object(n.l)("scaling")],i.prototype,"_scaling",void 0),Object(r.b)([Object(n.c)("billboardMode")],i.prototype,"_billboardMode",void 0),Object(r.b)([Object(n.c)()],i.prototype,"scalingDeterminant",void 0),Object(r.b)([Object(n.c)("infiniteDistance")],i.prototype,"_infiniteDistance",void 0),Object(r.b)([Object(n.c)()],i.prototype,"ignoreNonUniformScaling",void 0),Object(r.b)([Object(n.c)()],i.prototype,"reIntegrateRotationIntoRotationQuaternion",void 0),i}(a.a)}}]);