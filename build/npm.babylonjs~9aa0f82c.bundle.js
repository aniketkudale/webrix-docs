(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Ndcg:function(e,t,s){"use strict";var r=s("/SR9"),n=s("Xeau"),i=s("YKqZ"),o=s("UtUh"),a=s("yk6c"),l=s("wAMR"),p=s("R0D4"),u=s("FH9a"),h=s("aCSs"),m=s("kdvT"),c=function(){function e(){this.materials=[]}return e.prototype.parseMTL=function(t,s,r,i){if(!(s instanceof ArrayBuffer)){for(var o,a=s.split("\n"),l=/\s+/,p=null,u=0;u<a.length;u++){var h=a[u].trim();if(0!==h.length&&"#"!==h.charAt(0)){var c=h.indexOf(" "),f=c>=0?h.substring(0,c):h;f=f.toLowerCase();var d=c>=0?h.substring(c+1).trim():"";"newmtl"===f?(p&&this.materials.push(p),t._blockEntityCollection=i,p=new m.a(d,t),t._blockEntityCollection=!1):"kd"===f&&p?(o=d.split(l,3).map(parseFloat),p.diffuseColor=n.a.FromArray(o)):"ka"===f&&p?(o=d.split(l,3).map(parseFloat),p.ambientColor=n.a.FromArray(o)):"ks"===f&&p?(o=d.split(l,3).map(parseFloat),p.specularColor=n.a.FromArray(o)):"ke"===f&&p?(o=d.split(l,3).map(parseFloat),p.emissiveColor=n.a.FromArray(o)):"ns"===f&&p?p.specularPower=parseFloat(d):"d"===f&&p?p.alpha=parseFloat(d):"map_ka"===f&&p?p.ambientTexture=e._getTexture(r,d,t):"map_kd"===f&&p?p.diffuseTexture=e._getTexture(r,d,t):"map_ks"===f&&p?p.specularTexture=e._getTexture(r,d,t):"map_ns"===f||("map_bump"===f&&p?p.bumpTexture=e._getTexture(r,d,t):"map_d"===f&&p&&(p.opacityTexture=e._getTexture(r,d,t)))}}p&&this.materials.push(p)}},e._getTexture=function(t,s,r){if(!s)return null;var n=t;if("file:"===t){var i=s.lastIndexOf("\\");-1===i&&(i=s.lastIndexOf("/")),n+=i>-1?s.substr(i+1):s}else n+=s;return new h.a(n,r,!1,e.INVERT_TEXTURE_Y)},e.INVERT_TEXTURE_Y=!0,e}(),f=function(){function e(t){this.name="obj",this.extensions=".obj",this.obj=/^o/,this.group=/^g/,this.mtllib=/^mtllib /,this.usemtl=/^usemtl /,this.smooth=/^s /,this.vertexPattern=/v( +[\d|\.|\+|\-|e|E]+){3,7}/,this.normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.facePattern1=/f\s+(([\d]{1,}[\s]?){3,})+/,this.facePattern2=/f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern3=/f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern4=/f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/,this.facePattern5=/f\s+(((-[\d]{1,}\/-[\d]{1,}\/-[\d]{1,}[\s]?){3,})+)/,this._forAssetContainer=!1,this._meshLoadOptions=t||e.currentMeshLoadOptions}return Object.defineProperty(e,"INVERT_TEXTURE_Y",{get:function(){return c.INVERT_TEXTURE_Y},set:function(e){c.INVERT_TEXTURE_Y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentMeshLoadOptions",{get:function(){return{ComputeNormals:e.COMPUTE_NORMALS,ImportVertexColors:e.IMPORT_VERTEX_COLORS,InvertY:e.INVERT_Y,InvertTextureY:e.INVERT_TEXTURE_Y,UVScaling:e.UV_SCALING,MaterialLoadingFailsSilently:e.MATERIAL_LOADING_FAILS_SILENTLY,OptimizeWithUV:e.OPTIMIZE_WITH_UV,SkipMaterials:e.SKIP_MATERIALS}},enumerable:!0,configurable:!0}),e.prototype._loadMTL=function(e,t,s,r){var n=i.b.BaseUrl+t+e;i.b.LoadFile(n,s,void 0,void 0,!1,(function(e,t){r(n,t)}))},e.prototype.createPlugin=function(){return new e(e.currentMeshLoadOptions)},e.prototype.canDirectLoad=function(e){return!1},e.prototype.importMeshAsync=function(e,t,s,r,n,i){return this._parseSolid(e,t,s,r).then((function(e){return{meshes:e,particleSystems:[],skeletons:[],animationGroups:[]}}))},e.prototype.loadAsync=function(e,t,s,r,n){return this.importMeshAsync(null,e,t,s,r).then((function(){}))},e.prototype.loadAssetContainerAsync=function(e,t,s,r,n){var i=this;return this._forAssetContainer=!0,this.importMeshAsync(null,e,t,s).then((function(t){var s=new u.a(e);return t.meshes.forEach((function(e){return s.meshes.push(e)})),t.meshes.forEach((function(e){var t=e.material;t&&(-1==s.materials.indexOf(t)&&(s.materials.push(t),t.getActiveTextures().forEach((function(e){-1==s.textures.indexOf(e)&&s.textures.push(e)}))))})),i._forAssetContainer=!1,s})).catch((function(e){throw i._forAssetContainer=!1,e}))},e.prototype._parseSolid=function(t,s,p,u){for(var h,m=this,f=[],d=[],v=[],_=[],g=[],I=[],T=[],x=[],L=[],E=[],O=[],A=0,y=!1,C=[],b=[],M=[],P=[],R=[],V="",w="",F=new c,S=1,N=!0,U=new n.b(.5,.5,.5,1),k=function(e,t,s,r,n,i,o){var a;-1===(a=m._meshLoadOptions.OptimizeWithUV?function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[],uv:[]});var s=e[t[0]].normals.indexOf(t[1]);return 1!=s&&t[2]===e[t[0]].uv[s]?e[t[0]].idx[s]:-1}(O,[e,s,t]):function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[]});var s=e[t[0]].normals.indexOf(t[1]);return-1===s?-1:e[t[0]].idx[s]}(O,[e,s]))?(I.push(T.length),T.push(r),x.push(n),E.push(i),void 0!==o&&L.push(o),O[e].normals.push(s),O[e].idx.push(A++),m._meshLoadOptions.OptimizeWithUV&&O[e].uv.push(t)):I.push(a)},Y=function(){for(var e=0;e<T.length;e++)C.push(T[e].x,T[e].y,T[e].z),M.push(E[e].x,E[e].y,E[e].z),P.push(x[e].x,x[e].y);!0===m._meshLoadOptions.ImportVertexColors&&b.push(L[e].r,L[e].g,L[e].b,L[e].a),T=[],E=[],x=[],L=[],O=[],A=0},X=function(e,t){for(var s=t;s<e.length-1;s++)R.push(e[0],e[s],e[s+1])},G=function(e,t){X(e,t);for(var s=0;s<R.length;s++){var n=parseInt(R[s])-1;k(n,0,0,f[n],r.d.Zero(),r.e.Up(),!0===m._meshLoadOptions.ImportVertexColors?_[n]:void 0)}R=[]},W=function(e,t){X(e,t);for(var s=0;s<R.length;s++){var n=R[s].split("/"),i=parseInt(n[0])-1,o=parseInt(n[1])-1;k(i,o,0,f[i],v[o],r.e.Up(),!0===m._meshLoadOptions.ImportVertexColors?_[i]:void 0)}R=[]},j=function(e,t){X(e,t);for(var s=0;s<R.length;s++){var r=R[s].split("/"),n=parseInt(r[0])-1,i=parseInt(r[1])-1,o=parseInt(r[2])-1;k(n,i,o,f[n],v[i],d[o])}R=[]},z=function(e,t){X(e,t);for(var s=0;s<R.length;s++){var n=R[s].split("//"),i=parseInt(n[0])-1,o=parseInt(n[1])-1;k(i,1,o,f[i],r.d.Zero(),d[o],!0===m._meshLoadOptions.ImportVertexColors?_[i]:void 0)}R=[]},Z=function(e,t){X(e,t);for(var s=0;s<R.length;s++){var r=R[s].split("/"),n=f.length+parseInt(r[0]),i=v.length+parseInt(r[1]),o=d.length+parseInt(r[2]);k(n,i,o,f[n],v[i],d[o],!0===m._meshLoadOptions.ImportVertexColors?_[n]:void 0)}R=[]},D=function(){g.length>0&&(h=g[g.length-1],Y(),I.reverse(),h.indices=I.slice(),h.positions=C.slice(),h.normals=M.slice(),h.uvs=P.slice(),!0===m._meshLoadOptions.ImportVertexColors&&(h.colors=b.slice()),I=[],C=[],b=[],M=[],P=[])},H=p.split("\n"),K=0;K<H.length;K++){var B,J=H[K].trim().replace(/\s\s/g," ");if(0!==J.length&&"#"!==J.charAt(0))if(this.vertexPattern.test(J))B=J.match(/[^ ]+/g),f.push(new r.e(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3]))),!0===this._meshLoadOptions.ImportVertexColors&&(B.length>=7?_.push(new n.b(parseFloat(B[4]),parseFloat(B[5]),parseFloat(B[6]),7===B.length||void 0===B[7]?1:parseFloat(B[7]))):_.push(U));else if(null!==(B=this.normalPattern.exec(J)))d.push(new r.e(parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3])));else if(null!==(B=this.uvPattern.exec(J)))v.push(new r.d(parseFloat(B[1])*e.UV_SCALING.x,parseFloat(B[2])*e.UV_SCALING.y));else if(null!==(B=this.facePattern3.exec(J)))j(B[1].trim().split(" "),1);else if(null!==(B=this.facePattern4.exec(J)))z(B[1].trim().split(" "),1);else if(null!==(B=this.facePattern5.exec(J)))Z(B[1].trim().split(" "),1);else if(null!==(B=this.facePattern2.exec(J)))W(B[1].trim().split(" "),1);else if(null!==(B=this.facePattern1.exec(J)))G(B[1].trim().split(" "),1);else if(this.group.test(J)||this.obj.test(J)){var q={name:J.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:""};D(),g.push(q),y=!0,N=!0,S=1}else if(this.usemtl.test(J)){if(V=J.substring(7).trim(),!N||!y){D();q={name:"mesh_mm"+S.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:V};S++,g.push(q),y=!0}y&&N&&(g[g.length-1].materialName=V,N=!1)}else this.mtllib.test(J)?w=J.substring(7).trim():this.smooth.test(J)||console.log("Unhandled expression at line : "+J)}y&&(h=g[g.length-1],I.reverse(),Y(),h.indices=I,h.positions=C,h.normals=M,h.uvs=P,!0===this._meshLoadOptions.ImportVertexColors&&(h.colors=b)),y||(I.reverse(),Y(),g.push({name:a.a.RandomId(),indices:I,positions:C,colors:b,normals:M,uvs:P,materialName:V}));for(var Q=[],$=new Array,ee=0;ee<g.length;ee++){if(t&&g[ee].name)if(t instanceof Array){if(-1===t.indexOf(g[ee].name))continue}else if(g[ee].name!==t)continue;h=g[ee],s._blockEntityCollection=this._forAssetContainer;var te=new l.a(g[ee].name,s);s._blockEntityCollection=!1,$.push(g[ee].materialName);var se=new o.a;if(se.uvs=h.uvs,se.indices=h.indices,se.positions=h.positions,!0===this._meshLoadOptions.ComputeNormals){var re=new Array;o.a.ComputeNormals(h.positions,h.indices,re),se.normals=re}else se.normals=h.normals;!0===this._meshLoadOptions.ImportVertexColors&&(se.colors=h.colors),se.applyToMesh(te),this._meshLoadOptions.InvertY&&(te.scaling.y*=-1),Q.push(te)}var ne=[];return""!==w&&!1===this._meshLoadOptions.SkipMaterials&&ne.push(new Promise((function(e,t){m._loadMTL(w,u,(function(r){try{F.parseMTL(s,r,u,m._forAssetContainer);for(var n=0;n<F.materials.length;n++){for(var o,a=0,l=[];(o=$.indexOf(F.materials[n].name,a))>-1;)l.push(o),a=o+1;if(-1===o&&0===l.length)F.materials[n].dispose();else for(var p=0;p<l.length;p++)Q[l[p]].material=F.materials[n]}e()}catch(s){i.b.Warn("Error processing MTL file: '"+w+"'"),m._meshLoadOptions.MaterialLoadingFailsSilently?e():t(s)}}),(function(s,r){i.b.Warn("Error downloading MTL file: '"+w+"'"),m._meshLoadOptions.MaterialLoadingFailsSilently?e():t(r)}))}))),Promise.all(ne).then((function(){return Q}))},e.OPTIMIZE_WITH_UV=!0,e.INVERT_Y=!1,e.IMPORT_VERTEX_COLORS=!1,e.COMPUTE_NORMALS=!1,e.UV_SCALING=new r.d(1,1),e.SKIP_MATERIALS=!1,e.MATERIAL_LOADING_FAILS_SILENTLY=!0,e}();p.a&&p.a.RegisterPlugin(new f)}}]);